(function(){var __webpack_modules__={22223:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var vuex__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34665),_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(97341),_utils_time__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(32101),ansi_up__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24336),ansi_up__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(ansi_up__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__.Z={name:"JobInfo",data(){return{index:0,hostName:"",podName:"",showHostName:!1,showPodName:!1,rizhiDialogVisible:!1,viewDialogVisible:!1,logs:"",viewLogs:"",jsonObj:null,train:{epoch:[],loss:[],epochtime:[],time:[]},test:[],options:[],selected:[]}},computed:{...(0,vuex__WEBPACK_IMPORTED_MODULE_2__.rn)("Job",["joblist","jobInfoList","jobInfoCurrPageNum","jobInfoPageCount","jobInfoPageSize"]),formatedJobInfoList(){let e=this.jobInfoList;for(let t=0;t<e.length;t++)e[t].startTime=(0,_utils_time__WEBPACK_IMPORTED_MODULE_3__.m)(e[t].startTime),e[t].endTime=(0,_utils_time__WEBPACK_IMPORTED_MODULE_3__.m)(e[t].endTime),"1970-01-01 08:00:00"==(0,_utils_time__WEBPACK_IMPORTED_MODULE_3__.m)(e[t].startTime)&&(e[t].startTime=""),"1970-01-01 08:00:00"==(0,_utils_time__WEBPACK_IMPORTED_MODULE_3__.m)(e[t].endTime)&&(e[t].endTime="");return e}},methods:{changeSelected(){this.initEcharts()},initEcharts(){let e,t=[],a=[];if("train"==this.selected[0]){if(t=this.train.epoch,"loss"==this.selected[1]){if(t!=[]&&t.length<t[t.length-1]){var s=t[t.length-1];t=[];for(var i=0;i<s;i++)t.push(i+1);let e=this.train.loss[this.train.loss.length-1]*this.train.epoch[0];for(i=1;i<this.train.epoch[0];i++)a.push(e),i<10&&e>this.train.loss[this.train.loss.length-1]*this.train.epoch[0]/2?e-=this.train.loss[this.train.loss.length-1]*(Math.random()+5):i<20&&e>this.train.loss[this.train.loss.length-1]*this.train.epoch[0]/4?e-=this.train.loss[this.train.loss.length-1]*(Math.random()+2):i<30&&e>this.train.loss[this.train.loss.length-1]*this.train.epoch[0]/5?e-=this.train.loss[this.train.loss.length-1]*(Math.random()+1)/2:i<40&&e>this.train.loss[this.train.loss.length-1]?e-=this.train.loss[this.train.loss.length-1]*(Math.random()+.5)/2:e<this.train.loss[this.train.loss.length-1]?e=this.train.loss[this.train.loss.length-i]:e-=e/(this.train.epoch[0]-i)}a.push(...this.train.loss)}else a=this.train.epochtime;e=this.selected[1]}else{for(i=0;i<this.test[1].length;i++)t.push(i+1);e=this.test[0][this.selected[1]-1],a=this.test[this.selected[1]]}let l=Math.floor(Math.abs((a[0]-a[a.length-1])/4)),o=Math.floor(a[a.length-1])<Math.ceil(a[0])?Math.ceil(a[a.length-1]):Math.ceil(a[0]);0==l&&(l=1),console.log(l);let n={title:{text:e,left:"1%",top:"3%"},tooltip:{trigger:"axis"},grid:{left:"5%",right:"15%",bottom:"17%"},xAxis:{data:t},visualMap:{top:50,right:10,pieces:[{gt:0,lte:l+o,color:"#93CE07"},{gt:l+o,lte:2*l+o,color:"#FBDB0F"},{gt:2*l+o,lte:3*l+o,color:"#FC7D02"},{gt:3*l+o,color:"#FD0100"}],outOfRange:{color:"#999"}},yAxis:{},toolbox:{right:10,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},dataZoom:[{startValue:t.length-8},{type:"inside"}],series:{name:e,type:"line",data:a,markLine:{silent:!0,lineStyle:{color:"#333"}}}};this.$echarts.init(document.getElementById("chart")).setOption(n)},handleViewClose(){this.train={epoch:[],loss:[],epochtime:[],time:[]},this.test=[],this.viewLogs="",this.jsonObj=null,this.viewDialogVisible=!1},async ConvertViewLogs(index,row){this.viewDialogVisible=!0;let result=await(0,_api__WEBPACK_IMPORTED_MODULE_0__.zq)({clusterId:this.joblist[this.index].clusterId,containerName:this.jobInfoList[index].containerName,follow:!1,namespace:this.jobInfoList[index].projectName,podName:this.jobInfoList[index].podName,tailLines:300}),myStrTrain=result.data,regTrain=/{"train":(.*)/;while(-1!=myStrTrain.indexOf('{"train":')){let e=regTrain.exec(myStrTrain)[1].trim();this.viewLogs+='{"train":'+e,myStrTrain=myStrTrain.slice(myStrTrain.indexOf(e)+e.length,myStrTrain.length)}let regTest=/{"test":(.*)/,myStrTest=result.data;while(-1!=myStrTest.indexOf('{"test":')){let e=regTest.exec(myStrTest)[1].trim();this.viewLogs+='{"test":'+e,myStrTest=myStrTest.slice(myStrTest.indexOf(e)+e.length,myStrTest.length)}let view='{"info": ['+this.viewLogs+"],}";this.jsonObj=eval("("+view+")");for(let e=0;e<this.jsonObj.info.length;e++)if(this.jsonObj.info[e].train)this.train.epoch.push(this.jsonObj.info[e].train.epoch),this.train.loss.push(this.jsonObj.info[e].train.loss),this.train.epochtime.push(this.jsonObj.info[e].train.epochtime),this.train.time.push(this.jsonObj.info[e].train.time);else{0==this.test.length&&this.test.push(this.jsonObj.info[e].test.name);for(let t=0;t<this.jsonObj.info[e].test.name.length;t++){if(1==this.test.length)for(let t=0;t<this.jsonObj.info[e].test.name.length;t++)this.test.push([]);this.test[t+1].push(this.jsonObj.info[e].test.val[t])}}if(this.options=[],0!=this.train.epoch.length&&this.options.push({value:"train",label:"train",children:[{value:"loss",label:"loss"}]}),this.test.length){let e=[];for(let t=0;t<this.test[0].length;t++)e.push({value:t+1,label:this.test[0][t]});this.options.push({value:"test",label:"test",children:e})}this.selected=[],this.selected.push(this.options[0].value,this.options[0].children[0].value);let _this=this;setTimeout((()=>{_this.initEcharts()}),200)},async getJobLogs(e,t){this.rizhiDialogVisible=!0;let a=await(0,_api__WEBPACK_IMPORTED_MODULE_0__.zq)({clusterId:this.joblist[this.index].clusterId,containerName:this.jobInfoList[e].containerName,follow:!1,namespace:this.jobInfoList[e].projectName,podName:this.jobInfoList[e].podName,tailLines:300});this.logs+=a.data,this.logs.replace(/\n/g,"<br/>");var s=document.getElementById("statusLog");s.innerHTML=this.logs;let i=this;this.timer=setInterval((async()=>{let t=await(0,_api__WEBPACK_IMPORTED_MODULE_0__.zq)({clusterId:this.joblist[this.index].clusterId,containerName:this.jobInfoList[e].containerName,follow:!1,podName:this.jobInfoList[e].podName,tailLines:300});t.data&&(i.logs+=t.data),i.logs.replace(/\n/g,"<br/>")}),1e4)},handleClose(){clearInterval(this.timer),this.logs="",this.rizhiDialogVisible=!1},toJob(){this.$router.push("/job")},searchList(){""!=this.hostName&&(this.showHostName=!0),""!=this.podName&&(this.showPodName=!0),this.search()},clearHostSearch(){this.hostName="",this.showHostName=!1,this.search()},clearPodSearch(){this.podName="",this.showPodName=!1,this.search()},async search(){let e=await(0,_api__WEBPACK_IMPORTED_MODULE_0__.Xs)(this.joblist[this.index].clusterId,1,this.hostName,this.jobInfoPageSize,this.podName,this.joblist[this.index].vcJobName);1==e.success&&this.$store.dispatch("Job/getJobInfoList",{currPageNum:e.currPageNum,pageCount:e.pageCount,pageSize:e.pageSize,jobInfoList:e.rows})},async handleCurrentChange(e){let t=await(0,_api__WEBPACK_IMPORTED_MODULE_0__.Xs)(this.joblist[this.index].clusterId,e,this.hostName,this.jobInfoPageSize,this.podName,this.joblist[this.index].vcJobName);1==t.success&&this.$store.dispatch("Job/getJobInfoList",{currPageNum:t.currPageNum,pageCount:t.pageCount,pageSize:t.pageSize,jobInfoList:t.rows})},async handleSizeChange(e){let t=await(0,_api__WEBPACK_IMPORTED_MODULE_0__.Xs)(this.joblist[this.index].clusterId,1,this.hostName,e,this.podName,this.joblist[this.index].vcJobName);1==t.success&&this.$store.dispatch("Job/getJobInfoList",{currPageNum:t.currPageNum,pageCount:t.pageCount,pageSize:t.pageSize,jobInfoList:t.rows})}},async mounted(){this.index=this.$route.params.index,0==this.joblist.length&&this.$router.push("/job");let e=await(0,_api__WEBPACK_IMPORTED_MODULE_0__.Xs)(this.joblist[this.index].clusterId,1,"",10,"",this.joblist[this.index].vcJobName);1==e.success&&this.$store.dispatch("Job/getJobInfoList",{currPageNum:e.currPageNum,pageCount:e.pageCount,pageSize:e.pageSize,jobInfoList:e.rows})}}},97341:function(e,t,a){"use strict";a.d(t,{OJ:function(){return G},ek:function(){return K},k1:function(){return R},gf:function(){return de},l5:function(){return U},Wd:function(){return y},iM:function(){return pe},H8:function(){return Y},AJ:function(){return B},cR:function(){return _e},Wt:function(){return H},_W:function(){return Q},gg:function(){return O},O$:function(){return M},vP:function(){return A},Uk:function(){return le},zy:function(){return se},Ud:function(){return ce},oj:function(){return ae},Qs:function(){return te},Xs:function(){return ie},Sc:function(){return q},zq:function(){return fe},tZ:function(){return ve},BB:function(){return be},zd:function(){return j},LU:function(){return X},qu:function(){return oe},J6:function(){return _},EO:function(){return w},rH:function(){return ye},OI:function(){return me},$D:function(){return we},C:function(){return Z},Z2:function(){return W},jx:function(){return ge},$Z:function(){return ue},Tf:function(){return ee},GS:function(){return x},Ar:function(){return C},ZY:function(){return I},WZ:function(){return P},KD:function(){return S},sy:function(){return k},E0:function(){return L},uR:function(){return $},xI:function(){return F},Nz:function(){return E},kr:function(){return N},at:function(){return z},T3:function(){return T},vs:function(){return D},bV:function(){return J},v1:function(){return V},LM:function(){return he},Cp:function(){return re},ei:function(){return ne}});a(21703);var s=a(26166),i=a.n(s),l=a(39879),o=a.n(l);const n=i().create({baseURL:"/bocloud",timeout:5e4});n.interceptors.request.use((e=>(o().start(),e.headers["token"]=localStorage.getItem("token"),e.headers["refreshToken"]=localStorage.getItem("refreshToken"),e.headers["modelId"]=1,e.headers["systemId"]=1,e))),n.interceptors.response.use((e=>(o().done(),e.data.token&&localStorage.setItem("token",e.data.token),201==e.data.code&&(localStorage.clear(),vue.$router.push({name:"login"})),e.data)),(e=>(o().done(),Promise.reject(new Error("fail")))));var r=n;const c=i().create({baseURL:"/ide",timeout:5e4});c.interceptors.request.use((e=>(o().start(),e))),c.interceptors.response.use((e=>(o().done(),e.data.token&&localStorage.setItem("token",e.data.token),201==e.data.code&&(localStorage.clear(),vue.$router.push({name:"login"})),e.data)),(e=>(o().done(),Promise.reject(new Error("fail")))));var p=c;const d=i().create({baseURL:"/userInfo",timeout:5e11});d.interceptors.request.use((e=>(o().start(),e.headers["userInfoToken"]=localStorage.getItem("userInfoToken"),e))),d.interceptors.response.use((e=>(o().done(),e.data.token&&localStorage.setItem("userInfoToken",e.data.token),"203"==e.data.code&&(localStorage.clear(),vue.$router.push({name:"login"})),e.data)),(e=>(o().done(),Promise.reject(new Error("fail")))));var m=d;const h=i().create({baseURL:"/accessdata",timeout:5e4});h.interceptors.request.use((e=>(o().start(),e))),h.interceptors.response.use((e=>(o().done(),e.data.token&&localStorage.setItem("token",e.data.token),201==e.data.code&&(localStorage.clear(),vue.$router.push({name:"login"})),e.data)),(e=>(o().done(),Promise.reject(new Error("fail")))));var u=h;const g=i().create({baseURL:"/satelite",timeout:5e4});g.interceptors.request.use((e=>(o().start(),e.headers["userInfoToken"]=localStorage.getItem("userInfoToken"),e))),g.interceptors.response.use((e=>(o().done(),e.data.token&&localStorage.setItem("token",e.data.token),201==e.data.code&&(localStorage.clear(),vue.$router.push({name:"login"})),e.data)),(e=>(o().done(),Promise.reject(new Error("fail")))));var f=g,b=a(57421),v=a.n(b);const w=e=>f({url:"/picture/list",method:"get",params:e}),_=e=>f({url:`/picture/${e}`,method:"get"}),y=e=>u({url:"/api/fs/list",method:"post",data:e}),x=()=>m({url:"/datapath/path",method:"get"}),I=()=>m({url:"/datapath/access",method:"get"}),S=e=>m({url:"/view/csv/",method:"get",params:{path:e}}),k=e=>m({url:"/imagecatalog/getcatalogcount/",method:"get",params:{parent:e}}),P=e=>m({url:"/image/deleteprocess",method:"get",params:{id:e}}),C=e=>m({url:"/image/createimageprocess",method:"post",params:{newImageProcessName:e}}),L=()=>m({url:"/image/imageprocesslist",method:"post"}),N=({id:e,filepath:t,imageNameAndVersion:a})=>m({url:"/image/updatestepone",method:"get",params:{id:e,filepath:t,imageNameAndVersion:a}}),T=({id:e,filepath:t,imageNameAndVersion:a,imageTag:s,parentCatalog:i})=>m({url:"/image/updatesteptwo",method:"get",params:{id:e,filepath:t,imageNameAndVersion:a,imageTag:s,parentCatalog:i}}),z=({id:e,filepath:t,imageTag:a,imageCatalog:s,parentCatalog:i})=>m({url:"/image/updatestepthree",method:"get",params:{id:e,filepath:t,imageTag:a,imageCatalog:s,parentCatalog:i}}),D=e=>m({url:"/icon/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:{file:e}}),E=e=>m({url:"/user/updategender",method:"PUT",params:{sex:e}}),F=e=>m({url:"/user/regist",method:"POST",data:e}),$=e=>m({url:"/user/login",method:"POST",data:e}),O=({name:e,password:t})=>p({url:"/node-manager/user/login",method:"POST",data:v().stringify({name:e,password:t})}),M=()=>p({url:"/node-manager/workspace/start",method:"POST",withCredentials:!0}),A=()=>p({url:"/node-manager/workspace/stop",method:"POST",withCredentials:!0}),R=()=>p({url:"/node-manager/workspace",method:"POST",withCredentials:!0}),J=e=>r({url:"/paas-web/upmstreeapi/login",method:"POST",data:e}),V=e=>r({url:"/paas-web/upmstreeapi/accessToken",method:"get",params:{code:e}}),q=e=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJob/list",method:"post",data:e}),B=(e,t)=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJob/delete",method:"post",data:{clusterId:e,vcJobId:t}}),j=(e,t,a)=>r({url:"/paas-web/bocapi/dataBcc/list",method:"get",params:{type:e,self:t,isPlatform:a}}),G=(e,t,a,s)=>r({url:"/paas-web/bocapi/fileBcc/pageList",method:"get",params:{dataId:e,filePath:t,current:a,size:s}}),U=(e,t,a,s)=>r({url:"/paas-web/bocapi/dataBcc/add",method:"post",data:{name:e,remark:t,storageId:a,type:s}}),H=e=>r({url:`/paas-web/bocapi/dataBcc/${e}`,method:"delete"}),W=(e,t,a,s,i)=>r({url:"/paas-web/bocapi/dataBcc/update",method:"put",data:{id:e,name:t,remark:a,storageId:s,type:i}}),Z=(e,t,a,s)=>r({url:"/paas-web/bocapi/fileBcc/rename",method:"get",params:{dataId:e,filePath:t,fileName:a,newName:s}}),K=(e,t,a,s)=>r({url:"/paas-web/bocapi/fileBcc/createFolder",method:"get",params:{dataId:e,filePath:t,folderName:a,desc:s}}),Q=(e,t,a,s)=>r({url:"/paas-web/bocapi/fileBcc/download",method:"get",params:{fileName:e,dataId:t,filePath:a,fileType:1}}),X=e=>r({url:"/paas-web/bocapi/fileBcc/status",method:"get",params:{filePath:e}}),Y=(e,t,a)=>r({url:"/paas-web/bocapi/fileBcc/deleteFiles",method:"post",data:{dataId:e,fileList:t,filePath:a}}),ee=(e,t,a,s,i,l,o,n)=>r({url:"/paas-web/bocapi/fileBcc/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:{chunkNumber:"1",chunkSize:"2048000",currentChunkSize:e,totalSize:t,identifier:a,filename:s,relativePath:i,totalChunks:"1",filePath:l,rootPath:"/opt/bcc/storage1/",dataId:o,file:n}}),te=(e,t,a,s,i,l)=>r({url:"/paas-web/bocapi/image/v2.3/queryRegImageList",method:"post",data:{currPageNum:e,imageCatalogId:t,imageCatalogType:a,imageName:s,pageSize:i,warehouseId:l}}),ae=e=>r({url:"/paas-web/bocapi/image/v2.3/queryRegImageVersionList",method:"post",data:{currPageNum:1,imageName:e,pageSize:1e3}}),se=e=>r({url:"/paas-web/bocapi/warehouse/v2.3/overview",method:"post",data:{envId:e||1}}),ie=(e,t,a,s,i,l)=>r({url:"/paas-web/bocapi/volcano/v3.3/pod/info1",method:"post",data:{clusterId:e,currPageNum:t,nodeName:a,pageSize:s,podName:i,queueName:"default",vcJobName:l}}),le=e=>r({url:"/paas-web/bocapi/image/v2.3/queryRegImages",method:"post",data:{imageCatalogId:e}}),oe=()=>r({url:"/paas-web/bocapi/volcano/v3.3/queue/list",method:"post",data:{currPageNum:1,envId:1,pageSize:1e3}}),ne=e=>r({url:"/paas-web/bocapi/warehouse/v2.3/getList",method:"post",data:{clusterId:e,envId:1,types:["Registry","Harbor","Artifactory"]}}),re=e=>r({url:"/paas-web/bocapi/imageCatalog/v3.0/list",method:"post",data:{envId:1,warehouseId:e,withPublic:!0}}),ce=e=>r({url:"/paas-web/bocapi/image/v2.3/queryRegImageVersionList",method:"post",data:{imageName:e}}),pe=e=>r({url:"/paas-web/bocapi/dataBcc/list",method:"get",params:{type:e,self:0}}),de=({target:e,vcJob:t,tasks:a})=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJob/create",method:"post",data:{target:e,vcJob:t,tasks:a}}),me=(e,t)=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJob/start",method:"post",data:{clusterId:e,vcJobId:t}}),he=e=>r({url:"/paas-web/upmstreeapi/login/password",method:"get",params:{oldPassword:e}}),ue=e=>r({url:"/paas-web/upmstreeapi/login/password",method:"PUT",data:e}),ge=e=>r({url:"/paas-web/upmstreeapi/core/account",method:"put",data:e}),fe=e=>r({url:"/paas-web/bocapi/volcano/v3.3/pod/startLogs",method:"post",data:e}),be=()=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJobTemplate/list",method:"post",data:{currPageNum:1,pageSize:100,vcJobName:null,vcJobType:null,envId:1}}),ve=e=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJob/getById",method:"post",data:e}),we=e=>r({url:"/paas-web/bocapi/volcano/v3.3/tasks/getById",method:"post",data:e}),_e=e=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJobTemplate/delete",method:"post",data:e}),ye=e=>r({url:"/paas-web/bocapi/volcano/v3.3/vcJob/saveAsTemplate",method:"post",data:e})},9285:function(e,t,a){"use strict";var s=a(28935),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.$route.meta.show?a("el-container",{staticStyle:{height:"100%"}},[e.$route.meta.show?a("el-header",[a("Header")],1):e._e(),a("el-container",[e.$route.meta.show?a("el-aside",{attrs:{width:"200px"}},[a("SideBar")],1):e._e(),a("el-container",[a("el-main",[a("router-view")],1),e.$route.meta.show?a("el-footer",[a("Footer")],1):e._e()],1)],1)],1):e._e(),e.$route.meta.show?e._e():a("Login")],1)},l=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",[s("el-menu",{attrs:{mode:"horizontal","background-color":"#ADB6CA","text-color":"black"}},[s("el-col",{attrs:{span:20}},[s("div",{staticStyle:{"text-align":"center",height:"60px"}},[s("img",{staticStyle:{height:"60px",width:"210px","margin-left":"10px",float:"left"},attrs:{src:a(57570)}}),s("span",{staticClass:"font"},[e._v("米级国产卫星数据存算共享云平台 ")])])]),s("el-col",{attrs:{span:1}},[s("div",{staticStyle:{"text-align":"center",height:"60px","font-size":"16px"}})]),s("el-col",{staticStyle:{width:"100px"}},[s("el-submenu",{staticStyle:{padding:"0px"},attrs:{index:"1"}},[s("el-menu-item",{staticStyle:{padding:"0px"},attrs:{index:"1"},on:{click:function(t){e.passwordDialogVisible=!0}}},[s("i",{staticClass:"el-icon-edit",staticStyle:{color:"black"}},[e._v("修改密码")])]),s("el-menu-item",{staticStyle:{padding:"0px"},attrs:{index:"2"},on:{click:function(t){e.uploadDialogVisible=!0}}},[s("i",{staticClass:"el-icon-upload",staticStyle:{color:"black"}},[e._v("上传头像")])]),s("template",{slot:"title"},[s("el-avatar",{attrs:{src:e.iconurl}})],1)],2)],1),s("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[s("el-menu-item",{staticClass:"size",staticStyle:{padding:"0px","font-size":"16px"},attrs:{index:"2"},on:{click:e.logout}},[e._v("Logout")])],1)],1),s("el-dialog",{staticClass:"dialogClass",attrs:{title:"修改密码",visible:e.passwordDialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.passwordDialogVisible=t}}},[s("el-form",{ref:"passwdForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{"label-position":"right","label-width":"100px",rules:e.passwdRules,model:e.passwd}},[s("el-row",[s("el-form-item",{attrs:{label:"当前密码",prop:"oldPassword"}},[s("el-input",{staticStyle:{width:"270px"},attrs:{placeholder:"请输入当前密码",size:"small","show-password":""},on:{blur:function(t){return e.verifyPasswd()}},model:{value:e.passwd.oldPassword,callback:function(t){e.$set(e.passwd,"oldPassword",t)},expression:"passwd.oldPassword"}})],1)],1),s("el-row",[s("el-form-item",{attrs:{label:"新密码",prop:"newPassword1"}},[s("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请输入新密码",size:"small"},model:{value:e.passwd.newPassword1,callback:function(t){e.$set(e.passwd,"newPassword1",t)},expression:"passwd.newPassword1"}})],1)],1),s("el-row",[s("el-form-item",{attrs:{label:"二次确认",prop:"newPassword2"}},[s("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请再次输入新密码",size:"small"},model:{value:e.passwd.newPassword2,callback:function(t){e.$set(e.passwd,"newPassword2",t)},expression:"passwd.newPassword2"}})],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closePasswd()}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updatePasswd()}}},[e._v("确 定")])],1)],1),s("el-dialog",{staticClass:"dialogClass",attrs:{title:"上传头像",visible:e.uploadDialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.uploadDialogVisible=t}}},[s("el-upload",{ref:"upload",staticStyle:{"margin-left":"18px"},attrs:{drag:"",action:"","http-request":e.uploadFile,multiple:!1,"auto-upload":!1,accept:".png, .jpg, .JPG, .JPEG, .jpeg, .PNG, .GIF, .gif"}},[s("i",{staticClass:"el-icon-upload"}),s("div",{staticClass:"el-upload__text"},[e._v(" 将图片拖到此处，或 "),s("em",[e._v("点击上传")])]),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})]),s("el-row",[s("el-button",{staticStyle:{"margin-left":"320px"},attrs:{type:"primary",size:"small"},on:{click:e.submitUpload}},[e._v("上 传")])],1)],1)],1)},n=[],r=(a(21703),a(97341)),c=a(34665),p={name:"Header",data(){var e=(e,t,a)=>""===this.passwd.newPassword2?a(new Error("请再次输入密码")):this.passwd.newPassword2!=this.passwd.newPassword1?a(new Error("两次输入密码不一致!")):a();return{iconurl:"",uploadDialogVisible:!1,passwordDialogVisible:!1,passwd:{oldPassword:"",newPassword1:"",newPassword2:""},passwdRules:{oldPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword1:[{required:!0,message:"请输入新密码",trigger:"blur"}],newPassword2:[{required:!0,validator:e,trigger:"change"}]}}},computed:{...(0,c.rn)("User",["userInfo"]),username(){return this.userInfo.name}},methods:{submitUpload(){this.$refs.upload.submit()},async uploadFile(e){const t=new FormData;t.append("file",e.file);let a=await(0,r.vs)(e.file);"200"==a.code?(localStorage.setItem("userotherInfo",JSON.stringify(a.data)),this.iconurl=a.data.icon,this.$message({type:"success",message:a.message})):this.$message.error(a.message)},logout(){localStorage.clear(),this.$router.push({name:"login"})},async verifyPasswd(){let e=a(79719).Base64;if(""!=this.passwd.oldPassword){let t=await(0,r.LM)(e.encode(this.passwd.oldPassword));!0!==t.data&&(this.$message.error("原密码错误!"),this.passwd.oldPassword="")}},handleClose(e){let t=this;this.$confirm("确认关闭？").then((a=>{t.passwd.oldPassword="",t.passwd.newPassword1="",t.passwd.newPassword2="",t.$refs.upload.clearFiles(),e()})).catch((e=>{}))},closePasswd(){this.passwordDialogVisible=!1,this.passwd.oldPassword="",this.passwd.newPassword1="",this.passwd.newPassword2="",this.$refs["passwdForm"].resetFields()},updatePasswd(){this.passwordDialogVisible=!1;let e=this;this.$refs["passwdForm"].validate((async t=>{if(!t)return!1;{let t=a(79719).Base64;await(0,r.$Z)({password:t.encode(this.passwd.newPassword1),oldPassword:t.encode(this.passwd.oldPassword),id:this.userInfo.id});e.logout()}}))}},mounted(){this.iconurl=JSON.parse(localStorage.getItem("userotherInfo")).icon}},d=p,m=a(1001),h=(0,m.Z)(d,o,n,!1,null,null,null),u=h.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("el-menu",{attrs:{"default-active":e.$route.path,"unique-opened":!0}},[a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-folder"}),a("span",{staticClass:"size"},[e._v("数据集管理")])]),a("el-menu-item",{key:"satelite",attrs:{index:"/satelite"},on:{click:e.toSatelite}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    卫星视图")])]),a("el-menu-item",{key:"date",attrs:{index:"/date"},on:{click:e.toDate}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    日期视图")])]),a("el-menu-item",{key:"area",attrs:{index:"/area"},on:{click:e.toArea}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    地区视图")])]),a("el-menu-item",{key:"database",attrs:{index:"/database"},on:{click:e.toDataBaseManager}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    数据文件")])])],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-takeaway-box"}),a("span",{staticClass:"size"},[e._v("模型管理")])]),a("el-menu-item",{key:"data",attrs:{index:"/data"},on:{click:e.toData}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    模型数据")])]),a("el-menu-item",{key:"ide",attrs:{index:"/ide"},on:{click:e.toIDE}},[a("template",{slot:"title"},[a("span",{staticClass:"subsize"},[e._v("    在线IDE")])])],2)],2),a("el-submenu",{attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-copy-document"}),a("span",{staticClass:"size"},[e._v("镜像仓库")])]),a("el-menu-item",{key:"createimage",attrs:{index:"/createimage"},on:{click:e.toCreateImages}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    镜像制作")])]),a("el-menu-item",{key:"images",attrs:{index:"/images"},on:{click:e.toImages}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    镜像概览")])])],2),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-cpu"}),a("span",{staticClass:"size"},[e._v("我的作业")])]),a("el-menu-item",{key:"job",attrs:{index:"/job"},on:{click:function(t){return e.toJob()}}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    作业列表")])]),a("el-menu-item",{key:"resultdata",attrs:{index:"/resultdata"},on:{click:e.toResultData}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    模型结果")])]),a("el-menu-item",{key:"standardjob",attrs:{index:"/standardjob"},on:{click:function(t){return e.goStandardJob()}}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    新建作业")])]),a("el-menu-item",{key:"template",attrs:{index:"/template"},on:{click:function(t){return e.toTemplate()}}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("    作业模板")])])],2),a("div",{on:{click:e.toDataView}},[a("el-menu-item",{key:"dataview",attrs:{index:"/dataview"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-view"}),a("span",{staticClass:"size",attrs:{slot:"title"},slot:"title"},[e._v("结果可视化")])])],2)],1),a("div",{on:{click:e.toUserInfo}},[a("el-menu-item",{key:"userinfo",attrs:{index:"/userinfo"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user"}),a("span",{staticClass:"size"},[e._v("个人中心")])])],2)],1)],1)],1)],1)},f=[],b=a(74549),v=a.n(b),w={name:"SideBar",data(){return{}},methods:{toSatelite(){this.$router.push({name:"satelite"})},toDate(){this.$router.push({name:"date"})},toArea(){this.$router.push({name:"area"})},toDataBaseManager(){this.$router.push({name:"database"})},toTemplate(){this.$router.push({name:"template"})},toCreateImages(){this.$router.push({name:"createimage"})},toProcessView(){this.$router.push({name:"processview"})},toDataView(){this.$router.push({name:"dataview"})},toResultView(){this.$router.push({name:"resultview"})},toJob(){this.$router.push({name:"job"})},goStandardJob(){this.$router.push({name:"standardjob"})},toData(){this.$router.push({name:"data"})},toResultData(){this.$router.push({name:"resultdata"})},toImages(){this.$router.push({name:"images"})},toIDE(){this.$router.push({name:"ide"})},toUserInfo(){this.$router.push({name:"userinfo"})}}},_=w,y=(0,m.Z)(_,g,f,!1,null,"70b8015d",null),x=y.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center","font-size":"16px"}},[e._v(" Copyright©2023 南京信息工程大学 ")])},S=[],k={name:"Footer",data(){return{}},methods:{}},P=k,C=(0,m.Z)(P,I,S,!1,null,"46806e01",null),L=C.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-menu",{attrs:{mode:"horizontal","background-color":"#ADB6CA","text-color":"black"}},[s("el-col",{attrs:{span:20}},[s("div",{staticStyle:{"text-align":"center",height:"60px"}},[s("img",{staticStyle:{height:"60px",width:"210px","margin-left":"10px",float:"left"},attrs:{src:a(57570)}}),s("div",{staticClass:"font",staticStyle:{"padding-top":"13px"}},[e._v(" 米级国产卫星数据存算共享云平台 ")])])])],1)],1),s("div",{staticClass:"container"},[s("div",{staticClass:"forms-container"},[s("div",{staticClass:"signin-signup"},[s("form",{staticClass:"sign-in-form",attrs:{action:"#"}},[s("h2",{staticClass:"title"},[e._v("登录")]),s("div",{staticClass:"input-field"},[s("i",{staticClass:"fas fa-user"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})]),s("div",{staticClass:"input-field"},[s("i",{staticClass:"fas fa-lock"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),s("div",{ref:"dragDiv",staticClass:"drag"},[s("div",{staticClass:"drag_bg"}),s("div",{staticClass:"drag_text"},[e._v(e._s(e.confirmWords))]),s("div",{ref:"moveDiv",staticClass:"handler handler_bg",class:{handler_ok_bg:e.confirmSuccess},staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{mousedown:function(t){return e.mousedownFn(t)}}})]),s("input",{staticClass:"btn solid",attrs:{type:"submit",value:"立即登录"},on:{click:e.doLogin}})])])]),e._m(0)]),e._m(1)],1)},T=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"panels-container"},[s("div",{staticClass:"panel left-panel"},[s("div",{staticClass:"content"},[s("h3",[e._v("欢迎使用")]),s("h5",{staticStyle:{"margin-top":"10px","font-size":"16px"}},[e._v(" 米级国产卫星数据存算共享云平台 ")])]),s("img",{staticClass:"image",attrs:{src:a(83630),alt:""}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center","font-size":"16px",height:"60px","background-color":"#b6c0cf"}},[a("p",{staticStyle:{"padding-top":"22px"}},[e._v("Copyright©2022 南京信息工程大学")])])}],z=a(10311),D=a.n(z),E={generatekey(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="";for(var s=0;s<e;s++){let e=Math.floor(Math.random()*t.length);a+=t.substring(e,e+1)}return a},encrypt(e,t){t=t||"wqdsadevkbrovabr";var a=D().enc.Utf8.parse(t),s=D().enc.Utf8.parse(e),i=D().AES.encrypt(s,a,{mode:D().mode.ECB,padding:D().pad.Pkcs7});return i.toString()},decrypt(e,t){t=t||"wqdsadevkbrovabr";var a=D().enc.Utf8.parse(t),s=D().AES.decrypt(e,a,{mode:D().mode.ECB,padding:D().pad.Pkcs7});return D().enc.Utf8.stringify(s).toString()}},F={name:"Login",data(){return{user:{username:"",password:""},beginClientX:0,mouseMoveStata:!1,maxwidth:"",confirmWords:"拖动滑块验证",confirmSuccess:!1}},computed:{...(0,c.rn)("User",["userInfo"])},methods:{async doLogin(){if(1==this.confirmSuccess){let e=a(79719).Base64;if(localStorage.getItem("token"))this.$router.push({name:"job"});else{let t={userName:this.user.username,password:e.encode(this.user.password),typeConfigId:0,clientId:"be2030fc2aa0416d8c9dcaa5081fb1ad"},a=await(0,r.bV)(t);if("200"==a.code){this.$store.dispatch("User/getUserInfo",a.data);await(0,r.xI)({username:E.encrypt("cloudplatform@1998"+JSON.parse(localStorage.getItem("userInfo")).login),password:E.encrypt("userInfo@0916"+JSON.parse(localStorage.getItem("userInfo")).name)});let e=await(0,r.uR)({username:E.encrypt("cloudplatform@1998"+JSON.parse(localStorage.getItem("userInfo")).login),password:E.encrypt("userInfo@0916"+JSON.parse(localStorage.getItem("userInfo")).name)});localStorage.setItem("userotherInfo",JSON.stringify(e.data));let t=await(0,r.v1)(a.data.code);"200"==t.code&&(this.$store.dispatch("User/getUserToken",{token:t.data.token,refreshToken:t.data.refreshToken}),this.$message({message:"登陆成功",type:"success"}),localStorage.setItem("user",this.user.username),this.$router.push({name:"job"}))}else this.$message.error("登录失败")}}else this.$message.warning("请先滑动验证!")},mousedownFn:function(e){this.confirmSuccess||(e.preventDefault&&e.preventDefault(),this.mouseMoveStata=!0,this.beginClientX=e.clientX)},successFunction(){this.confirmSuccess=!0,this.confirmWords="验证通过",window.addEventListener?(document.getElementsByTagName("html")[0].removeEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].removeEventListener("mouseup",this.moseUpFn)):document.getElementsByTagName("html")[0].removeEventListener("mouseup",(()=>{})),document.getElementsByClassName("drag_text")[0].style.color="#fff",document.getElementsByClassName("handler")[0].style.left=this.maxwidth+"px",document.getElementsByClassName("drag_bg")[0].style.width=this.maxwidth+"px"},mouseMoveFn(e){if(this.mouseMoveStata){let t=e.clientX-this.beginClientX;t>0&&t<=this.maxwidth?(document.getElementsByClassName("handler")[0].style.left=t+"px",document.getElementsByClassName("drag_bg")[0].style.width=t+"px"):t>this.maxwidth&&this.successFunction()}},moseUpFn(e){this.mouseMoveStata=!1;var t=e.clientX-this.beginClientX;t<this.maxwidth&&(document.getElementsByClassName("handler")[0].style.left="0px",document.getElementsByClassName("drag_bg")[0].style.width="0px")}},mounted(){this.maxwidth=this.$refs.dragDiv.clientWidth-this.$refs.moveDiv.clientWidth,document.getElementsByTagName("html")[0].addEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].addEventListener("mouseup",this.moseUpFn)}},$=F,O=(0,m.Z)($,N,T,!1,null,"a73319f6",null),M=O.exports,A={name:"App",components:{Header:u,SideBar:x,Footer:L,Login:M},mounted(){}},R=A,J=(0,m.Z)(R,i,l,!1,null,"67ffb6eb",null),V=J.exports;const q={async getJobList({commit:e},t){let a=await(0,r.Sc)(t);!0===a.success&&(e("JOBLIST",a.rows),e("PAGENUM",a.currPageNum),e("PAGESIZE",a.pageSize),e("TOTALPAGE",a.pageCount))},getJobInfoList({commit:e},{currPageNum:t,pageCount:a,pageSize:s,jobInfoList:i}){e("JOBINFOCURRENTPAGENUM",t),e("JOBINFOPAGECOUNT",a),e("JOBINFOPAGESIZE",s),e("JOBINFOLIST",i)}},B={JOBLIST(e,t){e.joblist=t},PAGENUM(e,t){e.pagenum=t},PAGESIZE(e,t){e.pagesize=t},TOTALPAGE(e,t){e.totalpage=t},JOBINFOCURRENTPAGENUM(e,t){e.jobInfoCurrPageNum=t},JOBINFOPAGECOUNT(e,t){e.jobInfoPageCount=t},JOBINFOPAGESIZE(e,t){e.jobInfoPageSize=t},JOBINFOLIST(e,t){e.jobInfoList=t}},j={jobInfoCurrPageNum:"",jobInfoPageCount:"",jobInfoPageSize:"",joblist:[],pagesize:"",pagenum:"",totalpage:"",jobInfoList:[]},G={};var U={namespaced:!0,actions:q,mutations:B,state:j,getters:G};const H={getParentFileList({commit:e},t){e("PARENTFILELIST",t)},async getChildFileList({commit:e},t){let a=await(0,r.OJ)(t.dataId,t.filePath,t.current,t.size);200==a.code&&(e("PAGENUM",a.data.current),e("FILEPATH",a.data.filePath),e("CHILDFILELIST",a.data.fileList),e("PAGESIZE",a.data.size),e("TOATLRECORD",a.data.total))}},W={PARENTFILELIST(e,t){e.parentFileList=t},PAGENUM(e,t){e.pageNum=t},FILEPATH(e,t){e.filePath=t},CHILDFILELIST(e,t){e.childFileList=t},PAGESIZE(e,t){e.pageSize=t},TOATLRECORD(e,t){e.totalRecord=t}},Z={parentFileList:[],childFileList:[],pageNum:1,filePath:"",pageSize:"",totalRecord:""},K={};var Q={namespaced:!0,actions:H,mutations:W,state:Z,getters:K};const X={getParentFileList({commit:e},t){e("PARENTFILELIST",t)},async getChildFileList({commit:e},t){let a=await(0,r.OJ)(t.dataId,t.filePath,t.current,t.size);200==a.code&&(e("PAGENUM",a.data.current),e("FILEPATH",a.data.filePath),e("CHILDFILELIST",a.data.fileList),e("PAGESIZE",a.data.size),e("TOATLRECORD",a.data.total))}},Y={PARENTFILELIST(e,t){e.parentFileList=t},PAGENUM(e,t){e.pageNum=t},FILEPATH(e,t){e.filePath=t},CHILDFILELIST(e,t){e.childFileList=t},PAGESIZE(e,t){e.pageSize=t},TOATLRECORD(e,t){e.totalRecord=t}},ee={parentFileList:[],childFileList:[],pageNum:1,filePath:"",pageSize:"",totalRecord:""},te={};var ae={namespaced:!0,actions:X,mutations:Y,state:ee,getters:te};const se={async getUserInfo({commit:e},t){localStorage.setItem("userInfo",JSON.stringify(t)),e("USERINFO",t)},async getUserToken({commit:e},{token:t,refreshToken:a}){e("REFRESHTOKEN",a),e("TOKEN",t),localStorage.setItem("refreshToken",a),localStorage.setItem("token",t)}},ie={USERINFO(e,t){e.userInfo=t},REFRESHTOKEN(e,t){e.refreshToken=t},TOKEN(e,t){e.token=t}},le={userInfo:{},refreshToken:"",token:""},oe={};var ne={namespaced:!0,actions:se,mutations:ie,state:le,getters:oe};const re={getImageOverview({commit:e},{warehouseId:t,warehouseName:a,imageCatalogs:s}){e("WAREHOUSEID",t),e("WAREHOUSENAME",a),e("IMAGECATALOGS",s)},getImageList({commit:e},{imageList:t,totalCount:a,currPageNum:s}){e("IMAGELIST",t),e("TOTALCOUNT",a),e("CURRPAGENUM",s)},getImageVersionList({commit:e},t){e("IMAGEVERSIONLIST",t)}},ce={WAREHOUSEID(e,t){e.warehouseId=t},WAREHOUSENAME(e,t){e.warehouseName=t},IMAGECATALOGS(e,t){e.imageCatalogs=t},IMAGELIST(e,t){e.imageList=t},TOTALCOUNT(e,t){e.totalCount=t},CURRPAGENUM(e,t){e.currPageNum=t},IMAGEVERSIONLIST(e,t){e.imageVersionList=t}},pe={warehouseId:0,warehouseName:"",imageCatalogs:[],imageList:[],pageSize:10,totalCount:"",imageVersionList:[]},de={};var me={namespaced:!0,actions:re,mutations:ce,state:pe,getters:de};const he={getQueueList({commit:e},t){e("QUEUELIST",t)},getWareHouseList({commit:e},t){e("WAREHOUSELIST",t)},getWareHouseImageList({commit:e},t){e("IMAGECATALODLIST",t)},getImage({commit:e},t){e("IMAGELIST",t)},getImageVersion({commit:e},t){e("IMAGEVERSIONLIST",t)},getDataSet({commit:e},t){e("DATA",t)}},ue={DATA(e,t){e.data=t},QUEUELIST(e,t){e.queueList=t},WAREHOUSELIST(e,t){e.warehouseList=t},IMAGECATALODLIST(e,t){e.imageCatalogList=t},IMAGELIST(e,t){e.imageList=t},IMAGEVERSIONLIST(e,t){e.imageVersionList=t}},ge={queueList:[],warehouseList:[],imageCatalogList:[{catalogId:0},{catalogId:0}],imageList:[],imageVersionList:[],data:[]},fe={};var be={namespaced:!0,actions:he,mutations:ue,state:ge,getters:fe};const ve={async getImageProcessList({commit:e}){let t=await(0,r.E0)();200==t.code&&e("IMAGEPROCESSLIST",t.data)}},we={IMAGEPROCESSLIST(e,t){e.imageProcessList=t}},_e={imageProcessList:[]},ye={};var xe={namespaced:!0,actions:ve,mutations:we,state:_e,getters:ye};const Ie={async getJobTemplates({commit:e},t){let a=await(0,r.BB)();1==a.success&&e("JOBTEMPLATES",a.rows)},async getJobTemplate({commit:e},t){let a=await(0,r.tZ)(t);200==a.code&&e("JOBTEMPLATE",a.data)},async getTaskTemplate({commit:e},t){let a=await(0,r.$D)(t);200==a.code&&e("TASKTEMPLATE",a.data)}},Se={JOBTEMPLATES(e,t){e.JobTemplates=t},JOBTEMPLATE(e,t){e.JobTemplate=t},TASKTEMPLATE(e,t){e.TaskTemplate=t}},ke={JobTemplates:[],JobTemplate:{},TaskTemplate:[]},Pe={};var Ce={namespaced:!0,actions:Ie,mutations:Se,state:ke,getters:Pe};const Le=e=>{if(e<1024)return e+"B";if(e<1048576){var t=e/1024;return t=t.toFixed(2),t+"KB"}if(e<1073741824){t=e/1048576;return t=t.toFixed(2),t+"MB"}t=e/1073741824;return t=t.toFixed(2),t+"GB"};var Ne=a(32101);const Te={async getUserInfoDataAccessLevel({commit:e},t){e("DATAACCESS",t)},async getData({commit:e},t){let a=await(0,r.Wd)(t);200==a.code&&(null==a.data.content?(e("DATA",[]),e("TOTALPAGE",0)):(e("DATA",a.data.content),e("TOTALPAGE",a.data.total)))}},ze={DATAACCESS(e,t){e.DataAccess=t},DATA(e,t){for(let a=0;a<t.length;a++)t[a].size=Le(t[a].size),t[a].modified=(0,Ne.m)(t[a].modified);e.Data=t},TOTALPAGE(e,t){e.TotalCount=t}},De={DataAccess:{},Data:[],TotalCount:0},Ee={};var Fe={namespaced:!0,actions:Te,mutations:ze,state:De,getters:Ee};s["default"].use(c.ZP);var $e=new c.ZP.Store({modules:{Job:U,File:Q,User:ne,Image:me,ResultFile:ae,CreateJob:be,ImageProcess:xe,Template:Ce,DataAccess:Fe}}),Oe=a(12809),Me=a(26166),Ae=a.n(Me),Re=a(59483),Je=a(8522),Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[e._v("作业列表")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticClass:"el-icon-circle-plus-outline",staticStyle:{"margin-top":"10px","margin-left":"10px","padding-right":"8px","padding-top":"8px","padding-bottom":"8px","padding-left":"8px"},attrs:{size:"mini",type:"primary"},on:{click:e.toCreateJob}},[e._v("新建作业")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{staticStyle:{width:"98.5%","margin-top":"10px","margin-left":"10px"},attrs:{"row-style":{height:"40px"},"cell-style":{padding:"0px"},data:e.formatedJobList,border:!0,"row-class-name":e.tableRowClassName,"max-height":"700"}},[a("el-table-column",{attrs:{prop:"vcJobCnName",label:"任务名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.toJobInfo(t.$index)}}},[e._v(e._s(t.row.vcJobCnName))])]}}])}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskTotal",label:"总任务数",width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskCompleted",label:"运行完成数",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskPending",label:"排队中",width:"80","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"cpuUsed",label:"cpu使用量",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"memUsed",label:"内存使用量",width:"120"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["Terminated"==t.row.status?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("已终止")]):e._e(),"Pending"==t.row.status?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("排队中")]):e._e(),"Completed"==t.row.status?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("已完成")]):e._e(),"No_Running"==t.row.status?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("未开始")]):e._e(),"Running"==t.row.status?a("el-tag",{attrs:{size:"small"}},[e._v("运行中")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"210",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["No_Running"==t.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.startJob(t.row.clusterId,t.row.vcJobId)}}},[e._v("启动")]):e._e(),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.openTemplateDialog(t.row)}}},[e._v("保存")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteJob(t.row.clusterId,t.row.vcJobId)}}},[e._v("删除")])]}}])})],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":e.page,layout:"prev, pager, next,sizes","page-count":Number(e.totalpage)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"保存为模板",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"templateForm",attrs:{model:e.template,rules:e.templateRules}},[a("el-form-item",{attrs:{label:"中文名称","label-width":"80px",prop:"cnName"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.template.cnName,callback:function(t){e.$set(e.template,"cnName",t)},expression:"template.cnName"}})],1),a("el-form-item",{attrs:{label:"英文名称","label-width":"80px",prop:"enName"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.template.enName,callback:function(t){e.$set(e.template,"enName",t)},expression:"template.enName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancleSaveTemplate()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveTemplate()}}},[e._v("确 定")])],1)],1)],1)},qe=[],Be={name:"Job",data(){return{secondBread:"标准作业",page:8,dialogFormVisible:!1,template:{cnName:null,enName:null},templateRules:{cnName:[{required:!0,message:"请输入作业模板中文名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],enName:[{required:!0,message:"请输入作业模板英文名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 5 个字符",trigger:"blur"}]},vcJob:{}}},computed:{...(0,c.rn)("Job",["joblist","pagesize","pagenum","totalpage"]),formatedJobList(){let e=this.joblist;for(let t=0;t<e.length;t++)e[t].startTime=(0,Ne.m)(e[t].startTime),e[t].endTime=(0,Ne.m)(e[t].endTime),e[t].createTime=(0,Ne.m)(e[t].createTime),"1970-01-01 08:00:00"==(0,Ne.m)(e[t].startTime)&&(e[t].startTime=""),"1970-01-01 08:00:00"==(0,Ne.m)(e[t].endTime)&&(e[t].endTime="");return e}},methods:{openTemplateDialog(e){this.dialogFormVisible=!0,this.vcJob=e},cancleSaveTemplate(){this.vcJob={},this.dialogFormVisible=!1,this.$refs["templateForm"].resetFields()},saveTemplate(){let e=this;this.$refs["templateForm"].validate((async t=>{if(!t)return console.log("error submit!!"),!1;{let t=await(0,r.rH)({tvcJobName:e.template.enName,tvcJobCnName:e.template.cnName,vcJobId:e.vcJob.vcJobId,envId:1});200==t.code?this.$message({type:"success",message:t.message}):this.$message.error("添加失败")}})),this.dialogFormVisible=!1},async startJob(e,t){let a=await(0,r.OI)(e,t);"200"==a.code?(this.$message({message:a.message,type:"success"}),this.handleCurrentChange(this.pagenum)):this.$message.error(a.message)},toJobInfo(e){this.$router.push("/jobinfo/"+e)},toCreateJob(){this.$router.push({name:"standardjob"})},async deleteJob(e,t){let a=await(0,r.AJ)(e,t);"200"==a.code?(this.$message({message:a.message,type:"success"}),this.handleCurrentChange(this.pagenum)):this.$message.error(a.message)},tableRowClassName({rowIndex:e}){return"Completed"===this.joblist[e].status?"success-row":parseInt(this.joblist[e].cpuUsed.split("C")[0])>=5||parseInt(this.joblist[e].memUsed.split("G")[0])>=10?"warning-row":""},handleCurrentChange(e){this.$store.dispatch("Job/getJobList",{envId:1,status:null,templateId:null,vcJobType:"batch",currPageNum:e,pageSize:this.page})},handleSizeChange(e){this.page=e,this.handleCurrentChange(1)}},mounted(){this.handleCurrentChange(1)}},je=Be,Ge=(0,m.Z)(je,Ve,qe,!1,null,"39623594",null),Ue=Ge.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("模型管理")]),a("el-breadcrumb-item",[e._v("模型数据")])],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"left-card",attrs:{"body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"12px"},attrs:{span:16}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 模型示范 ")])]),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-top":"10px","padding-right":"5px","padding-top":"5px","padding-bottom":"5px","padding-left":"3px"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:function(t){e.parentFileDialogVisible=!0}}},[e._v("新建")])],1)],1)],1),a("el-dialog",{attrs:{title:"新建模型数据",visible:e.parentFileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的模型数据名称,只能输入英文字符",size:"small",oninput:"value=value.replace(/[^\\a-\\z\\A-\\Z]/g,'')"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createParentFile}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-table",{staticClass:"size",staticStyle:{width:"100%","margin-top":"10px"},attrs:{"highlight-current-row":"","show-header":!1,"max-height":"600","row-style":{height:"0px"},"cell-style":{padding:"0px"},data:e.parentFileList}},[a("el-table-column",{attrs:{prop:"name",label:"文件名",align:"left","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"parentIcon",on:{click:function(a){return e.updateChileFileList(t.$index,t.row.id,e.pageNum,null,t.row.name)}}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"right",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-edit-outline parentIcon",on:{click:function(a){return e.updateParentFileNameDialogVisible(t.row)}}})]),a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-delete parentIcon",staticStyle:{"margin-left":"10px"},on:{click:function(a){return e.deleteParentFile(t.row.id)}}})])],1)]}}])})],1),a("el-dialog",{attrs:{title:"重命名模型数据",visible:e.parentFileNameDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileNameDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入重命名的模型数据名称,只能输入英文字符",size:"small",oninput:"value=value.replace(/[^\\a-\\z\\A-\\Z]/g,'')"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileNameDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updateParentFileName()}}},[e._v("确 定")])],1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)","margin-top":"10px","margin-left":"10px",overflow:"auto"},attrs:{"body-style":{padding:"0px"}}},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px","margin-top":"3px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 模型数据文件列表 ")])]),a("el-col",{attrs:{span:20}},[e.parentFileName?a("h3",{staticClass:"size",staticStyle:{"margin-top":"3px"}},[e._v(" 当前模型数据: "),a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.parentFileName))])],1):e._e()])],1),a("el-row",{staticStyle:{"margin-top":"10px","margin-left":"10px","font-size":"20px"}},[a("el-input",{staticStyle:{width:"99%"},attrs:{disabled:"",size:"small"},model:{value:e.dirpath,callback:function(t){e.dirpath=t},expression:"dirpath"}},[a("template",{slot:"prepend"},[e._v("当前路径:")])],2)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-d-arrow-left",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-folder-add",size:"small"},on:{click:function(t){e.fileDialogVisible=!0}}},[e._v("新建文件夹")])],1),a("el-dialog",{attrs:{title:"新建文件夹",visible:e.fileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.fileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的文件名",size:"small"},model:{value:e.newDirName,callback:function(t){e.newDirName=t},expression:"newDirName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.fileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.newDir}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-dropdown",{staticStyle:{"margin-top":"10px","margin-left":"10px"},on:{command:e.handleUpload}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload"}},[e._v(" 上传 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"uploadFile"}},[e._v("上传文件")]),a("el-dropdown-item",{attrs:{command:"uploadFiles"}},[e._v("上传文件夹")])],1)],1)],1),a("el-dialog",{attrs:{title:"上传",visible:e.uploadDialogVisible,width:"433px","before-close":e.handleClose},on:{"update:visible":function(t){e.uploadDialogVisible=t}}},[a("el-progress",{staticStyle:{width:"380px","margin-top":"8px","margin-left":"15px","margin-bottom":"10px"},attrs:{percentage:e.progressPercent}}),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:3,offset:17}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.submitUpload}},[e._v("上 传")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:e.close}},[e._v("关 闭")])],1)],1),a("el-upload",{ref:"upload",staticStyle:{"margin-left":"15px"},attrs:{drag:"",action:"","http-request":e.uploadFile,multiple:"","auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.deleteFiles}},[e._v("删除选中")])],1)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{ref:"table",staticClass:"size",staticStyle:{width:"100%"},attrs:{data:e.childFileList,"max-height":"560"},on:{"select-all":e.selectTableAll,select:e.selectFile}},[a("el-table-column",{attrs:{width:"80",type:"selection"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:1}},[1==t.row.fileType?a("i",{staticClass:"el-icon-folder"}):e._e(),1!=t.row.fileType?a("i",{staticClass:"el-icon-document"}):e._e()]),a("el-col",{attrs:{span:22,offset:1}},[e.isShow[t.$index]?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{"margin-left":"5px"},attrs:{size:"mini",placeholder:t.row.fileName},on:{blur:function(a){return e.updatename(t.$index,t.row)},focus:function(a){e.oldname=t.row.fileName}},model:{value:t.row.fileName,callback:function(a){e.$set(t.row,"fileName",a)},expression:"scope.row.fileName"}}):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isShow[t.$index],expression:"!isShow[scope.$index]"}],staticStyle:{"margin-left":"5px"},on:{click:function(a){return e.openDir(t.row)}}},[e._v(e._s(t.row.fileName))])],1)],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"modifyTime",label:"修改时间",width:"300"}}),a("el-table-column",{attrs:{prop:"fileSize",label:"大小","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.changeIsShow(t.$index)}}},[e._v("重命名")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.deleteFile(t.row.fileName)}}},[e._v("删除")])]}}])})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":e.page,layout:"prev, pager, next,sizes",total:Number(e.totalRecord)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)],1)],1)],1)},We=[],Ze={name:"Data",data(){return{terminalDialogVisible:!1,progressPercent:0,dataSetName:"",page:10,isShow:[],parentId:"",parenttag:0,path:[],checkedfile:[],fileDialogVisible:!1,uploadDialogVisible:!1,parentFileDialogVisible:!1,parentFileNameDialogVisible:!1,newDirName:"",oldname:"",parentFileName:"",newParentFileName:"",newParentFileId:""}},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},computed:{...(0,c.rn)("File",["parentFileList","childFileList","pageNum","filePath","totalRecord"]),dirpath(){let e="";return this.path.forEach((t=>{e=e+"/"+t})),this.path.length>=1?e:"/"},iframeSrc(){return"http://127.0.0.1:18080/websshpage?userInfo="+localStorage.getItem("userInfoToken")}},methods:{openTerminal(){this.terminalDialogVisible=!0},handleTerminalClose(){let e=this;this.$confirm("确认关闭？").then((t=>{e.terminalDialogVisible=!1})).catch((e=>{}))},updateChileFileList(e,t,a,s,i){this.path=[],this.parentId=t,this.parentFileName=i,this.parenttag=e,this.updateFileList(t,a,s)},updateParentFileNameDialogVisible(e){this.parentFileNameDialogVisible=!0,this.newParentFileId=e.id},async updateParentFileName(){if(""==this.newParentFileName)return void this.$message.error("请输入模型数据名称");let e=await(0,r.Z2)(this.newParentFileId,this.newParentFileName,"",6,1);"200"==e.code?(this.$message({type:"success",message:"更新成功"}),this.parentFileNameDialogVisible=!1,this.updateParentFileList(),this.newParentFileName=""):this.$message.error("更新失败")},async deleteParentFile(e){alert("是否确认删除?");let t=await(0,r.Wt)(e);"200"==t.code?(this.$message({type:"success",message:"删除成功"}),this.updateParentFileList()):this.$message.error(t.data)},async createParentFile(){if(""==this.newParentFileName)return void this.$message.error("请输入模型数据名称");let e=await(0,r.l5)(this.newParentFileName,"",6,1);"200"==e.code?(this.parentFileDialogVisible=!1,this.$message({type:"success",message:"新建成功"}),this.updateParentFileList(),this.newParentFileName=""):this.$message.error("新建模型数据失败")},changeIsShow(e){let t=!this.isShow[e];this.isShow.splice(e,1,t)},initShow(){if(null!=this.childFileList)for(let e=0;e<this.childFileList.length;e++)this.isShow.push(!1)},previewFile(e){let t="http://127.0.0.1:8080/preview"+this.dirpath+"/"+e,s=a(79719).Base64;window.open("http://127.0.0.1:8012/onlinePreview?url="+encodeURIComponent(s.encode(t)))},async deleteFiles(){let e=await(0,r.H8)(this.parentId,this.checkedfile,this.dirpath);"200"==e.code&&this.$message({type:"success",message:"删除成功"}),this.updateFileList(this.parentId,this.pageNum,this.dirpath),this.checkedfile=[]},async deleteFile(e){let t=[];t.push(e);let a=await(0,r.H8)(this.parentId,t,this.dirpath);"200"==a.code&&this.$message({type:"success",message:"删除成功"}),this.updateFileList(this.parentId,this.pageNum,this.dirpath)},close(){this.uploadDialogVisible=!1,this.progressPercent=0,this.updateFileList(this.parentId,this.pageNum,this.dirpath),this.$refs.upload.clearFiles()},uploadFile(e){this.progressPercent=0;const t=new FormData;t.append("file",e.file);let a=e.file.size+"-"+e.file.name.substring(0,2)+e.file.name.split(".")[e.file.name.split(".").length-1],s=this;this.axios({url:"bocloud/paas-web/bocapi/fileBcc/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:{chunkNumber:"1",chunkSize:"2048000",currentChunkSize:e.file.size,totalSize:e.file.size,identifier:a,filename:e.file.name,relativePath:e.file.webkitRelativePath,totalChunks:"1",filePath:this.dirpath,rootPath:"/opt/bcc/storage1/",dataId:this.parentId,file:e.file},onUploadProgress(e){s.progressPercent=Math.round(e.loaded/e.total*100)}})},submitUpload(){this.$refs.upload.submit()},handleUpload(e){this.uploadDialogVisible=!0,"uploadFile"==e?this.$nextTick((()=>{this.$refs.upload.$children[0].$refs.input.webkitdirectory=!1})):this.$nextTick((()=>{this.$refs.upload.$children[0].$refs.input.webkitdirectory=!0}))},async newDir(){let e=await(0,r.ek)(this.parentId,this.dirpath,this.newDirName,null);"200"==e.code?(this.$message({type:"success",message:"新建成功"}),this.updateFileList(this.parentId,this.pageNum,this.dirpath)):this.$message.error("新建失败:文件名重复!"),this.fileDialogVisible=!1,this.newDirName=""},handleClose(e){this.$confirm("确认关闭？").then((t=>{e()})).catch((e=>{})),this.updateFileList(this.parentId,this.pageNum,this.dirpath)},selectTableAll(){null!=this.childFileList&&(this.checkedfile.length>=this.childFileList.length?this.checkedfile=[]:(this.checkedfile=[],this.childFileList.forEach((e=>{this.checkedfile.push(e.fileName)}))))},selectFile(e,t){this.checkedfile.includes(t.fileName)?this.checkedfile.forEach((function(e,a,s){e==t.fileName&&s.splice(a,1)})):this.checkedfile.push(t.fileName),null!=this.childFileList&&this.checkedfile.length==this.childFileList.length?this.checkedall=!0:this.checkedall=!1},goBack(){this.path.pop(),this.updateFileList(this.parentId,1,this.dirpath)},openDir(e){1==e.fileType&&(this.path.push(e.fileName),this.updateFileList(this.parentId,1,this.dirpath))},updateFileList(e,t,a){null==e&&this.parentFileList.length>0&&(e=this.parentFileList[0].id,this.ParentFileName=this.parentFileList[0].fileName),this.$store.dispatch("File/getChildFileList",{dataId:e,filePath:a,current:t,size:this.page}),this.initShow()},async updateParentFileList(){let e=await(0,r.zd)(1,0,0);"200"==e.code&&(this.$store.dispatch("File/getParentFileList",e.data),this.parentFileName=e.data[0].name,this.parentId=this.parentFileList[0].id),null!=this.parentFileList&&this.updateFileList(this.parentFileList[0].id,this.pageNum,null)},async updatename(e,t){if(this.changeIsShow(e),this.oldname!=t.fileName){let e=await(0,r.C)(this.parentId,this.dirpath,this.oldname,t.fileName);"200"==e.code?this.$message({type:"success",message:"修改成功"}):this.$message.error("修改失败")}else this.$message.warning("新名称与原名称相同")},handleCurrentChange(e){this.updateFileList(this.parentId,e,this.dirpath)},handleSizeChange(e){this.page=e,this.updateFileList(this.parentId,this.pageNum,this.dirpath)}},async mounted(){let e=await(0,r.zd)(1,0,0);e.data.length>0&&(this.$store.dispatch("File/getParentFileList",e.data),this.parentFileName=e.data[0].name,"200"==e.code&&e.data.length>0&&this.$store.dispatch("File/getChildFileList",{dataId:e.data[0].id,filePath:null,current:1,size:this.page}),this.initShow(),this.parentId=e.data[0].id)}},Ke=Ze,Qe=(0,m.Z)(Ke,He,We,!1,null,"ca9a9a98",null),Xe=Qe.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("镜像仓库")]),a("el-breadcrumb-item",[e._v("镜像概览")])],1)],1),a("el-card",{staticStyle:{height:"calc(100vh - 170px)","background-color":"#f0f1f3"},attrs:{"body-style":{padding:"0px"}}},[a("el-col",{staticStyle:{width:"320px"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-select",{staticClass:"size",staticStyle:{width:"300px","margin-left":"10px"},attrs:{placeholder:"请选择仓库"},on:{change:e.selectChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:"cluster-default-default"==e.value?"private":e.value,value:e.value}})})),1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticStyle:{height:"calc(100vh - 200px)",overflow:"auto"}},[e._l(e.imageCatalogs,(function(t,s){return a("div",{key:s,on:{click:function(t){return e.changeWareHouse(s)}}},[a("el-card",{staticStyle:{height:"250px",width:"300px","margin-top":"5px"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticStyle:{height:"250px",width:"100%"},attrs:{id:"publicImageCharts"+s}})])],1)})),a("el-card",{staticStyle:{height:"180px",width:"300px","margin-top":"5px"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("el-empty",{attrs:{description:"暂无更多","image-size":50}})],1)],2)])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticStyle:{width:"100%"}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)","margin-left":"10px","overflow-y":"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:">"}},[a("el-breadcrumb-item",[e._v("镜像仓库")]),a("el-breadcrumb-item",[e._v("镜像管理")]),e.selected?a("el-breadcrumb-item",[e._v(e._s(e.selected))]):e._e()],1)],1)],1),e.selected&&0==e.isShow?a("el-row",[a("el-col",{staticStyle:{margin:"10px"},attrs:{span:4}},[a("el-input",{attrs:{size:"small",placeholder:"请输入镜像名称"},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}})],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:4}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.searchImageList()}}},[e._v("搜索")])],1)],1):e._e(),a("div",{staticStyle:{height:"calc(100vh - 300px)",width:"100%",overflow:"auto"}},[e.selected?e._e():a("el-result",{staticStyle:{"margin-top":"150px"},attrs:{icon:"info",title:"信息提示",subTitle:"点击左侧镜像仓库查看仓库详细信息"}}),e.showInfo?a("el-result",{staticStyle:{"margin-top":"150px"},attrs:{icon:"info",title:"信息提示",subTitle:"没有符合要求的镜像"}}):e._e(),e._l(e.imageList,(function(t,s){return e.selected?a("el-row",{key:s},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[e.showImages[s].head?a("el-card",{staticStyle:{"margin-top":"10px",height:"40px"},attrs:{"body-style":{padding:"0px"}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],staticClass:"circle",on:{click:function(a){return e.changeShowImages(s,t.imageName)}}},[a("i",{staticClass:"el-icon-arrow-right",staticStyle:{"margin-top":"5px","margin-left":"4px"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"circle",on:{click:function(t){return e.fixShowImages(s)}}},[a("i",{staticClass:"el-icon-arrow-down",staticStyle:{"margin-top":"4px","margin-left":"4px"}})]),a("span",{staticClass:"size",staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.imageName))])]):e._e()],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[a("el-row",[a("el-descriptions",{directives:[{name:"show",rawName:"v-show",value:e.showImages[s].body,expression:"showImages[index].body"}],staticStyle:{"margin-left":"30px"}},[a("el-descriptions-item",{attrs:{label:"镜像名称"}},[e._v(e._s(t.imageName))]),a("el-descriptions-item",{attrs:{label:"仓库服务IP"}},[e._v("192.168.0.199")])],1),a("el-timeline",{directives:[{name:"show",rawName:"v-show",value:e.showImages[s].body,expression:"showImages[index].body"}],staticStyle:{"margin-left":"30px"}},e._l(e.activities,(function(t,s){return a("el-timeline-item",{key:s,attrs:{icon:t.icon,type:t.type,color:t.color,size:t.size,timestamp:t.timestamp}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-descriptions",{staticStyle:{"margin-top":"10px","margin-left":"10px"}},[a("el-descriptions-item",{attrs:{label:"版本号"}},[e._v(e._s(t.content))]),a("el-descriptions-item",{attrs:{label:"镜像大小"}},[e._v(e._s(t.fileSize))])],1)],1),a("el-col",{attrs:{span:4}})],1)],1)],1)})),1)],1)],1)],1):e._e()}))],2),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[e.selected&&0==e.isShow?a("el-row",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:Number(e.totalCount)},on:{"current-change":e.handleCurrentChange}})],1):e._e()],1)],1)],1)])],1)],1)},et=[],tt={name:"Images",data(){return{showInfo:!1,activities:[],isShow:!1,Image:[],title:[],options:[],selected:"",imageCatalogId:0,showImages:[],imageName:"",index:0}},computed:{...(0,c.rn)("Image",["warehouseId","warehouseName","imageCatalogs","imageList","totalCount","currPageNum"])},methods:{async handleCurrentChange(e){let t=await(0,r.Qs)(e,this.imageCatalogs[this.index].catalogId,this.imageCatalogs[this.index].catalogType,null,10,this.warehouseId);if(1==t.success&&null!=t.rows){this.showImages=[],this.$store.dispatch("Image/getImageList",{imageList:t.rows,totalCount:t.totalCount,currPageNum:t.currPageNum});for(let e=0;e<t.rows.length;e++)this.showImages.push({head:!0,body:!1})}},fixShowImages(e){this.showInfo=!1,this.isShow=!this.isShow,this.activities=[];for(let t=0;t<this.showImages.length;t++)this.showImages[t].head=!0,this.showImages[t].body=!1},async changeShowImages(e,t){this.showInfo=!1;let a=await(0,r.oj)(t);if(1==a.success){this.$store.dispatch("Image/getImageVersionList",a.rows);for(let e=0;e<a.rows.length;e++){let t={content:"",fileSize:"",timestamp:"",size:"large",type:"primary",icon:"el-icon-star-on",color:"#0bbd87"},s={content:"",fileSize:"",timestamp:"",size:"large",type:"primary"};0==e?(t.content=a.rows[e].imageTag,t.timestamp=(0,Ne.m)(a.rows[e].imageCreatetime),t.fileSize=Le(a.rows[e].imageSize),this.activities.push(t)):(s.content=a.rows[e].imageTag,s.timestamp=(0,Ne.m)(a.rows[e].imageCreatetime),s.fileSize=Le(a.rows[e].imageSize),this.activities.push(s))}}this.isShow=!this.isShow;for(let s=0;s<this.showImages.length;s++)s!=e&&(this.showImages[s].head=!1),s==e&&(this.showImages[s].body=!0)},selectChange(e){this.showInfo=!1,this.activities=[];let t=this.options.findIndex(((t,a)=>t.value==e));this.changeWareHouse(t)},async changeWareHouse(e){this.showInfo=!1,this.index=e,this.activities=[],this.selected=this.title[e].text,this.isShow=!1;let t=await(0,r.Qs)(1,this.imageCatalogs[e].catalogId,this.imageCatalogs[e].catalogType,null,10,this.warehouseId);if(1==t.success&&null!=t.rows){this.showImages=[],this.$store.dispatch("Image/getImageList",{imageList:t.rows,totalCount:t.totalCount,currPageNum:t.currPageNum});for(let e=0;e<t.rows.length;e++)this.showImages.push({head:!0,body:!1})}},async searchImageList(){let e=await(0,r.Qs)(1,this.imageCatalogs[this.index].catalogId,this.imageCatalogs[this.index].catalogType,this.imageName,10,this.warehouseId);if(1==e.success){this.showImages=[],this.$store.dispatch("Image/getImageList",{imageList:e.rows,totalCount:e.totalCount,currPageNum:e.currPageNum});for(let t=0;t<e.rows.length;t++)this.showImages.push({head:!0,body:!1});0==e.rows.length?this.showInfo=!0:this.showInfo=!1,this.imageName=""}},initEcharts(e,t){let a={title:this.title[t],tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{right:"8%",top:"30%",orient:"vertical",selected:{"总   数":!1},formatter:function(e){for(var t,s=a.series[0].data,i=0,l=0;l<s.length;l++)i+=s[l].value,s[l].name==e&&(t=s[l].value);var o=t;Math.round(t/i*100);return`${e}:  ${o}`}},series:[{name:"详细",type:"pie",radius:[10,50],center:["25%","60%"],roseType:"radius",label:{show:!1},data:this.Image[t]}]};this.$echarts.init(e).setOption(a)}},async mounted(){let e=await(0,r.zy)(1);if("200"==e.code&&this.$store.dispatch("Image/getImageOverview",{warehouseId:e.data.warehouseInfo[0].warehouseId,warehouseName:e.data.warehouseInfo[0].warehouseName,imageCatalogs:e.data.warehouseInfo[0].imageCatalogs}),null!=e.data.warehouseInfo[0].imageCatalogs)for(let t=0;t<e.data.warehouseInfo[0].imageCatalogs.length;t++){let a={value:""},s=[{value:0,name:"城市路网提取"},{value:0,name:"水稻长势监测"},{value:0,name:"洪涝灾害监测"},{value:0,name:"基础设施识别"},{value:0,name:"旱情监测"},{value:0,name:"其他"}],i=await(0,r.sy)(t),l={text:"",left:"center",top:"15px"};s[0].value=i.data[0].count,s[1].value=i.data[1].count,s[2].value=i.data[2].count,s[3].value=i.data[3].count,s[4].value=i.data[4].count,s[5].value=i.data[5].count,a.value=e.data.warehouseInfo[0].imageCatalogs[t].envName,l.text=e.data.warehouseInfo[0].imageCatalogs[t].envName,"cluster-default-default"==l.text&&(l.text="private"),this.Image.push(s),this.options.push(a),this.title.push(l)}this.$nextTick((()=>{for(let e=0;e<this.Image.length;e++)this.initEcharts(document.getElementById("publicImageCharts"+e),e)}))}},at=tt,st=(0,m.Z)(at,Ye,et,!1,null,"3aff11af",null),it=st.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[e._v("新建作业")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("h3",{staticClass:"size",staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 作业属性 ")])])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-form",{ref:"jobForm",staticStyle:{"min-width":"1000px",padding:"0px"},attrs:{"label-position":"right","label-width":"100px",model:e.vcJob,rules:e.vcJobRules}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-left":"50px"},attrs:{label:"作业中文名",prop:"vcJobCnName"}},[a("el-col",[a("el-input",{staticStyle:{width:"340px","margin-left":"0px"},attrs:{size:"small",placeholder:"请输入作业中文名"},model:{value:e.vcJob.vcJobCnName,callback:function(t){e.$set(e.vcJob,"vcJobCnName",t)},expression:"vcJob.vcJobCnName"}})],1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"作业英文名",prop:"vcJobName"}},[a("el-col",[a("el-input",{staticStyle:{width:"340px"},attrs:{placeholder:"请输入作业英文名",size:"small"},model:{value:e.vcJob.vcJobName,callback:function(t){e.$set(e.vcJob,"vcJobName",t)},expression:"vcJob.vcJobName"}})],1)],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.jobDialogVisible=!0}}},[e._v("高级配置")])],1)],1),a("el-dialog",{attrs:{title:"作业高级配置",visible:e.jobDialogVisible,width:"800px"},on:{"update:visible":function(t){e.jobDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"作业优先级",prop:"priorityClassName"}},[a("el-col",[a("el-select",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请选择作业的优先级"},model:{value:e.vcJob.priorityClassName,callback:function(t){e.$set(e.vcJob,"priorityClassName",t)},expression:"vcJob.priorityClassName"}},[a("el-option",{attrs:{label:"高",value:"high-priority"}}),a("el-option",{attrs:{label:"中",value:"middle-priority"}}),a("el-option",{attrs:{label:"低",value:"low-priority"}})],1)],1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"所属集群"}},[a("el-col",[a("el-select",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:e.vcJob.queueName,callback:function(t){e.$set(e.vcJob,"queueName",t)},expression:"vcJob.queueName"}},[a("el-option",{attrs:{label:"default",value:"default"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"并行运行"}},[a("el-col",[a("el-switch",{model:{value:e.vcJob.parallelExecution,callback:function(t){e.$set(e.vcJob,"parallelExecution",t)},expression:"vcJob.parallelExecution"}})],1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"重启次数",prop:"maxRetry"}},[a("el-col",[a("el-input-number",{staticStyle:{width:"250px"},attrs:{size:"small",min:0,max:100},model:{value:e.vcJob.maxRetry,callback:function(t){e.$set(e.vcJob,"maxRetry",t)},expression:"vcJob.maxRetry"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("h3",{staticClass:"size",staticStyle:{"margin-top":"8px","margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 任务属性 ")])]),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getImage}},[e._v("添加")])],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"10px","margin-left":"10px","font-size":"16px"},attrs:{"cell-style":{padding:"5px"},data:e.tasks,border:!0,"row-style":{height:"30px"},"max-height":"400px"}},[a("el-table-column",{attrs:{prop:"taskCnName",label:"任务中文名称"}}),a("el-table-column",{attrs:{prop:"taskName",label:"任务英文名称"}}),a("el-table-column",{attrs:{prop:"requestCpu",label:"CPU核心数(核)"}}),a("el-table-column",{attrs:{prop:"requestMemory",label:"内存使用量(GB)"}}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteTask(t.$index)}}},[e._v("删除")])]}}])})],1),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-row",[a("el-col",{attrs:{span:2,offset:22}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createJob}},[e._v("创建")])],1)],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"新建任务",visible:e.dialogFormVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"taskForm",staticStyle:{padding:"0px","min-width":"900px"},attrs:{rules:e.taskRules,model:e.taskInfo,"label-position":"right","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务英文名","label-width":e.formLabelWidth,prop:"taskName"}},[a("el-input",{staticStyle:{width:"340px"},attrs:{autocomplete:"off",placeholder:"请输入任务英文名"},model:{value:e.taskInfo.taskName,callback:function(t){e.$set(e.taskInfo,"taskName",t)},expression:"taskInfo.taskName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务中文名","label-width":e.formLabelWidth,prop:"taskCnName"}},[a("el-input",{staticStyle:{width:"340px"},attrs:{autocomplete:"off",placeholder:"请输入任务中文名"},model:{value:e.taskInfo.taskCnName,callback:function(t){e.$set(e.taskInfo,"taskCnName",t)},expression:"taskInfo.taskCnName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"选择仓库","label-width":e.formLabelWidth,prop:"repositoryDir"}},[a("el-select",{staticStyle:{width:"250px"},on:{change:e.changeImageCatalog},model:{value:e.taskInfo.repositoryDir,callback:function(t){e.$set(e.taskInfo,"repositoryDir",t)},expression:"taskInfo.repositoryDir"}},e._l(e.imageCatalogList,(function(e,t){return a("el-option",{key:t,attrs:{label:"cluster-default-default"==e.envName?"private":e.envName,value:e.catalogId}})})),1)],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"选择镜像","label-width":e.formLabelWidth,prop:"imagePrefix"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择镜像"},on:{change:e.changeImage},model:{value:e.taskInfo.imagePrefix,callback:function(t){e.$set(e.taskInfo,"imagePrefix",t)},expression:"taskInfo.imagePrefix"}},e._l(e.sortedImageList,(function(t,s){return a("el-option",{key:s,attrs:{label:e.imageName(t),value:t.imageName}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"选择版本","label-width":e.formLabelWidth,prop:"imageVersion"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择镜像版本"},model:{value:e.taskInfo.imageVersion,callback:function(t){e.$set(e.taskInfo,"imageVersion",t)},expression:"taskInfo.imageVersion"}},e._l(e.imageVersionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.imageTag,value:e.imageTag}})})),1)],1)],1)],1),a("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"GPU算力","label-width":e.formLabelWidth}},[a("el-row",{staticStyle:{"margin-top":"0px"}},[a("el-col",{attrs:{span:20}},[e.taskInfo.gpuCalPower<100?a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:25,max:100},on:{change:function(t){e.taskInfo.gpuVideoMem=.88*e.taskInfo.gpuCalPower}},model:{value:e.taskInfo.gpuCalPower,callback:function(t){e.$set(e.taskInfo,"gpuCalPower",t)},expression:"taskInfo.gpuCalPower"}}):e._e(),e.taskInfo.gpuCalPower>=100?a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:100,max:300},on:{change:function(t){e.taskInfo.gpuVideoMem=.88*e.taskInfo.gpuCalPower}},model:{value:e.taskInfo.gpuCalPower,callback:function(t){e.$set(e.taskInfo,"gpuCalPower",t)},expression:"taskInfo.gpuCalPower"}}):e._e()],1),a("el-col",{attrs:{span:3}},[a("span",{staticStyle:{"font-size":"16px","margin-left":"10px"}},[e._v("(%)")])]),a("el-col",{attrs:{span:1}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 1、输入1-100内的整数，例如50，是指将50%的cuda core分配给该服务。 ")]),a("p",[e._v(" 2、输入大于100的整数，只能是100的倍数，如200，是指将2张GPU卡都分给该服务。 ")]),a("p",[e._v(" 3、如果输入大于等于100的整数，GPU显存不用再填写，默认使用GPU的全部显存。 ")]),a("p",[e._v('4、如果值为空或0时，默认不使用GPU算力"')])]),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff","margin-left":"10px",cursor:"pointer"}})])],1)],1)],1),a("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"GPU显存","label-width":e.formLabelWidth}},[a("el-row",{staticStyle:{"margin-top":"0px"}},[a("el-col",{attrs:{span:20}},[a("el-slider",{staticStyle:{width:"100%"},attrs:{max:Number(88)},model:{value:e.taskInfo.gpuVideoMem,callback:function(t){e.$set(e.taskInfo,"gpuVideoMem",t)},expression:"taskInfo.gpuVideoMem"}})],1),a("el-col",{attrs:{span:3}},[a("span",{staticStyle:{"font-size":"16px","margin-left":"10px"}},[e._v(e._s(.25*Number(e.taskInfo.gpuVideoMem))+"GB")])]),a("el-col",{attrs:{span:1}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 注：拖动一格显示1，为0.25GB，拖动2格显示2，为0.5GB，以此类推；最大能拖动88格显示88，为22GB。 ")])]),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff","margin-left":"10px",cursor:"pointer"}})])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"故障响应","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"340px"},attrs:{placeholder:"请选择当前任务状态",clearable:""},on:{change:e.changeTaskpoliciesEvent,clear:function(t){e.taskInfo.policiesAction=""}},model:{value:e.taskInfo.policiesEvent,callback:function(t){e.$set(e.taskInfo,"policiesEvent",t)},expression:"taskInfo.policiesEvent"}},[a("el-option",{attrs:{label:"运行失败",value:"PodFailed"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"响应方式","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"340px"},attrs:{placeholder:"请选择变更任务状态",clearable:""},on:{change:e.changeTaskpoliciesAction,clear:function(t){e.taskInfo.policiesEvent=""}},model:{value:e.taskInfo.policiesAction,callback:function(t){e.$set(e.taskInfo,"policiesAction",t)},expression:"taskInfo.policiesAction"}},[a("el-option",{attrs:{label:"任务完成",value:"CompleteJob"}}),a("el-option",{attrs:{label:"任务重启",value:"RestartJob"}})],1)],1)],1)],1),a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("el-button",{staticStyle:{cursor:"pointer"},attrs:{slot:"label",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}},slot:"label"},[e._v("高级配置")]),e.show?e._e():a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 注：通过点击高级配置,可在此选择添加存储变量,管理存储变量等高级配置。 ")])]),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff","margin-left":"10px",cursor:"pointer"}})]),e.show?a("el-tabs",{staticStyle:{width:"820px"}},[a("el-tab-pane",{attrs:{label:"存储变量"}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-row",[a("h3",{staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 添加变量 ")])]),a("el-row"),a("el-form",{ref:"storageForm",staticStyle:{padding:"0px"},attrs:{model:e.mount,rules:e.mountRules,"label-position":"right","label-width":"136px"}},[a("el-row",[a("el-form-item",{attrs:{label:"路径地址",prop:"hostPath"}},[a("el-col",{staticStyle:{"margin-left":"0px"},attrs:{span:24,offset:1}},[a("el-input",{staticStyle:{width:"440px"},attrs:{size:"small"},model:{value:e.mount.hostPath,callback:function(t){e.$set(e.mount,"hostPath",t)},expression:"mount.hostPath"}},[a("template",{slot:"append"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:e.initData}},[e._v(" 选择数据服务")])])],2)],1)],1)],1),a("el-dialog",{attrs:{title:"目录挂载",visible:e.childDialogTableVisible,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.childDialogTableVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{size:"small",placeholder:"搜索"},model:{value:e.dataName,callback:function(t){e.dataName=t},expression:"dataName"}})],1),a("el-col",{attrs:{span:8,offset:4}},[a("el-button-group",[a("el-button",{attrs:{type:1==e.type?"success":"primary",size:"small"},on:{click:function(t){return e.getDataSet(1)}}},[e._v("模型数据")]),a("el-button",{attrs:{type:1!=e.type?"success":"primary",size:"small"},on:{click:function(t){return e.getDataSet(2)}}},[e._v("模型结果")])],1)],1)],1),a("el-table",{attrs:{data:e.selectedData,"highlight-current-row":"","max-height":"300"},on:{"row-click":e.initRealPath}},[a("el-table-column",{attrs:{property:"name",label:1==e.type?"模型数据":"模型结果",width:"275"}}),a("el-table-column",{attrs:{property:"catalog",label:"路径",width:"275"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.childDialogTableVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.childDialogTableVisible=!1}}},[e._v("确 定")])],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-form-item",{attrs:{label:"容器内路径",prop:"mountPath"}},[a("el-col",{staticStyle:{"margin-left":"0px"},attrs:{span:24,offset:1}},[a("el-input",{staticStyle:{width:"440px"},attrs:{size:"small"},model:{value:e.mount.mountPath,callback:function(t){e.$set(e.mount,"mountPath",t)},expression:"mount.mountPath"}})],1)],1)],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addMountData()}}},[e._v("添加")])],1)],1),a("el-row",[a("h3",{staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 管理变量 ")])]),a("el-row",[a("div",{staticStyle:{padding:"10px"}},[a("el-table",{attrs:{data:e.mountData,"row-style":{height:"30px"},"max-height":"200"}},[a("el-table-column",{attrs:{label:"路径地址",prop:"hostPath","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isShow[t.$index]?a("el-input",{attrs:{size:"mini"},on:{blur:function(a){return e.updateIsShow(t.$index)}},model:{value:t.row.hostPath,callback:function(a){e.$set(t.row,"hostPath",a)},expression:"scope.row.hostPath"}}):e._e(),e.isShow[t.$index]?e._e():a("span",[e._v(e._s(t.row.hostPath))])]}}],null,!1,2140583172)}),a("el-table-column",{attrs:{label:"容器内路径",prop:"mountPath","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isShow[t.$index]?a("el-input",{attrs:{size:"mini"},on:{blur:function(a){return e.updateIsShow(t.$index)}},model:{value:t.row.mountPath,callback:function(a){e.$set(t.row,"mountPath",a)},expression:"scope.row.mountPath"}}):e._e(),e.isShow[t.$index]?e._e():a("span",[e._v(e._s(t.row.mountPath))])]}}],null,!1,902124068)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isShow[t.$index]?e._e():a("el-button",{staticStyle:{"margin-buttom":"3px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updateIsShow(t.$index)}}},[e._v("修改")]),a("el-button",{staticStyle:{"margin-buttom":"3px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteMountData(t.$index)}}},[e._v("删除")])]}}],null,!1,3680832419)})],1)],1)])],1)],1)],1):e._e()],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"820px"},attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"30","show-word-limit":""},model:{value:e.taskInfo.description,callback:function(t){e.$set(e.taskInfo,"description",t)},expression:"taskInfo.description"}})],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"725px"},on:{click:function(t){return e.cancleTask()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createTask()}}},[e._v("确 定")])],1)],1)],1)],1)},ot=[],nt={name:"CreateJob",data(){return{isShow:[],show:!1,jobDialogVisible:!1,mount:{hostPath:"",mountPath:""},mountRules:{hostPath:[{required:!0,message:"不能为空",trigger:"blur"}],mountPath:[{required:!0,message:"不能为空",trigger:"blur"}]},mountData:[],type:1,dataName:"",childDialogTableVisible:!1,vcJob:{vcJobId:"",vcJobCnName:"",vcJobName:"",vcJobType:"batch",queueName:"default",queueId:1,maxRetry:"1",priorityClassName:"middle-priority",parallelExecution:!0},vcJobRules:{vcJobCnName:[{required:!0,message:"请输入作业中文名",trigger:"blur"},{min:4,max:45,message:"长度在4到45字符",trigger:"blur"}],vcJobName:[{required:!0,message:"请输入作业英文名",trigger:"blur"},{min:4,max:45,message:"请输入4-45位小写字母，数字，中划线组合并以字母开头",trigger:"blur"}],maxRetry:[{required:!0,message:"请输入作业尝试重启次数",trigger:"blur"}],priorityClassName:[{required:!0,message:"请选择作业优先级",trigger:"change"}]},target:{templateId:null,clusterId:9,startNow:!1,envId:1},tasks:[],taskInfo:{taskName:"",taskCnName:"",podReplicas:1,podMinReplicas:1,requestCpu:4,requestMemory:16,gpuCalPower:100,gpuVideoMem:88,command:null,workingDir:null,description:"",repository:"default",repositoryDir:"cluster-default-default",image:"",imagePrefix:"",imageVersion:"",policiesAction:null,policiesEvent:null,containerOptions:"",oldContainerOptions:'{"bocoPlatform-ports":[],"bocoPlatform-envs":[],"bocoPlatform-configs":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-volumes":[],"bocoPlatform-schedulingManagement":[]}'},taskRules:{taskName:[{required:!0,message:"请输入作业英文名",trigger:"blur"},{min:4,max:45,message:"请输入4-45位小写字母，数字，中划线组合并以字母开头",trigger:"blur"}],taskCnName:[{required:!0,message:"请输入作业中文名",trigger:"blur"},{min:4,max:45,message:"长度在4到45字符",trigger:"blur"}],repository:[{required:!0,trigger:"change"}],repositoryDir:[{required:!0,trigger:"change"}],imagePrefix:[{required:!0,trigger:"change"}],imageVersion:[{required:!0,trigger:"change"}]},dialogFormVisible:!1,formLabelWidth:"120px",bocoPlatformenvs:[],bocoPlatformports:[],bocoPlatformschedulingManagement:[],bocoPlatformlifecycle:[],bocoPlatformprobe:[],bocoPlatformconfigs:[],bocoPlatformconfigMounts:[],bocoPlatformvolumes:[],bocoPlatformvolumeMounts:[],isShow:[]}},computed:{...(0,c.rn)("CreateJob",["queueList","warehouseList","imageCatalogList","imageList","imageVersionList","data"]),...(0,c.rn)("Template",["JobTemplate","TaskTemplate"]),fullImage(){return this.taskInfo.imagePrefix+":"+this.taskInfo.imageVersion},selectedData(){let e=[];return""==this.dataName?this.data:(this.data.forEach((t=>{-1!=t.name.indexOf(this.dataName)&&e.push(t)})),e)},sortedImageList(){return this.imageList.sort(((e,t)=>e.imageName.split("/")[e.imageName.split("/").length-1][0].charCodeAt()-t.imageName.split("/")[t.imageName.split("/").length-1][0].charCodeAt()))}},methods:{updateIsShow(e){this.$set(this.isShow,e,!this.isShow[e])},imageName(e){return e.imageName.split("/")[e.imageName.split("/").length-1]},changeTaskpoliciesEvent(e){"PodFailed"==e&&(this.taskInfo.policiesAction="CompleteJob")},changeTaskpoliciesAction(e){e&&(this.taskInfo.policiesEvent="PodFailed")},createJob(){let e=this;this.$refs["jobForm"].validate((async t=>{if(!t)return!1;{e.vcJob.queueId=e.queueList[0].queueId;let t=await(0,r.gf)({tasks:e.tasks,target:e.target,vcJob:e.vcJob});"200"==t.code&&e.$router.push("/job")}}))},createAndStartJob(){let e=this;this.$refs["jobForm"].validate((async t=>{if(!t)return!1;{e.target.startNow=!0,e.vcJob.queueId=e.queueList[0].queueId;let t=await(0,r.gf)({tasks:e.tasks,target:e.target,vcJob:e.vcJob});"200"==t.code?(e.$message({type:"success",message:t.message}),e.$router.push("/job")):e.$message({type:"warning",message:t.message})}}))},async getImage(){this.dialogFormVisible=!0;let e=await(0,r.Uk)(this.imageCatalogList[0].catalogId);if("200"==e.code){this.$store.dispatch("CreateJob/getImage",e.data);let t=await(0,r.Ud)(this.sortedImageList[0].imageName);console.log(e.data[0].imageName),1==t.success&&(this.$store.dispatch("CreateJob/getImageVersion",t.rows),console.log(t.rows))}this.initImageSelected()},deleteTask(e){this.tasks.splice(e,1)},createTask(){let e=this;this.$refs["taskForm"].validate((t=>{if(!t)return!1;{e.dialogFormVisible=!1;let t=e.formatTaskInfo();e.tasks.push(t),e.vcJob.vcJobName="work-"+e.tasks[0].taskCnName,e.vcJob.vcJobCnName=e.vcJob.vcJobName,e.cancleTask()}}))},formatTaskInfo(){let e={};e.taskName=this.taskInfo.taskName,e.taskCnName=this.taskInfo.taskCnName,e.podReplicas=this.taskInfo.podReplicas,e.podMinReplicas=this.taskInfo.podMinReplicas,e.requestCpu=this.taskInfo.requestCpu,e.requestMemory=this.taskInfo.requestMemory,e.gpuCalPower=this.taskInfo.gpuCalPower,e.gpuVideoMem=this.taskInfo.gpuVideoMem,e.command=this.taskInfo.command,e.workingDir=this.taskInfo.workingDir,e.description=this.taskInfo.description,e.repository=this.taskInfo.repository.toString(),e.repositoryDir=this.taskInfo.repositoryDir.toString(),e.image=this.fullImage,e.policiesAction=this.taskInfo.policiesAction,e.policiesEvent=this.taskInfo.policiesEvent;let t="",a="",s="";for(let i=0;i<this.mountData.length;i++)i+1==this.mountData.length?(t+='{"name":"name'+i+'","hostPath":"'+this.mountData[i].hostPath+'"}',a+='{"name":"name'+i+'","mountPath":"'+this.mountData[i].mountPath+'"}'):(t+='{"name":"name'+i+'","hostPath":"'+this.mountData[i].hostPath+'"},',a+='{"name":"name'+i+'","mountPath":"'+this.mountData[i].mountPath+'"},'),i+1==this.mountData.length?s+='{"type":"hostPath","hostPath":"'+this.mountData[i].hostPath+'","mountPath":"'+this.mountData[i].mountPath+'"}':s+='{"type":"hostPath","hostPath":"'+this.mountData[i].hostPath+'","mountPath":"'+this.mountData[i].mountPath+'"},';return e.containerOptions='{"bocoPlatform-envs":[],"bocoPlatform-ports":[],"bocoPlatform-schedulingManagement":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-configs":[],"bocoPlatform-configMounts":[],"bocoPlatform-volumes":['+t+'],"bocoPlatform-volumeMounts":['+a+"]}",e.oldContainerOptions='{"bocoPlatform-ports":[],"bocoPlatform-envs":[],"bocoPlatform-configs":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-volumes":['+s+'],"bocoPlatform-schedulingManagement":[]}',e},cancleTask(){this.dialogFormVisible=!1,this.taskInfo={taskName:"",taskCnName:"",podReplicas:1,podMinReplicas:1,requestCpu:1,requestMemory:4,gpuCalPower:100,gpuVideoMem:88,command:null,workingDir:null,description:"",repository:"default",repositoryDir:"cluster-default-default",image:"",imagePrefix:"",imageVersion:"",policiesAction:"",policiesEvent:"",containerOptions:"",oldContainerOptions:'{"bocoPlatform-ports":[],"bocoPlatform-envs":[],"bocoPlatform-configs":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-volumes":[],"bocoPlatform-schedulingManagement":[]}'},this.initImageSelected(),this.mountData=[],this.isShow=[],this.clearValidate("taskForm"),this.clearValidate("storageForm")},clearValidate(e){this.$refs[e].clearValidate()},deleteMountData(e){this.mountData.splice(e,1),this.isShow.splice(e,1)},addMountData(){this.$refs["storageForm"].validate((e=>{if(!e)return!1;{let e={hostPath:"",mountPath:""};e.hostPath=this.mount.hostPath,e.mountPath=this.mount.mountPath,this.mountData.push(e),this.isShow.push(!1),this.mount.hostPath="",this.mount.mountPath="",this.$message({type:"success",message:"添加成功!"})}}))},initRealPath(e,t,a){this.mount.hostPath=e.catalog},initData(){this.childDialogTableVisible=!0,this.getDataSet(this.type)},async getDataSet(e){this.type=e;let t=await(0,r.iM)(this.type);200==t.code&&this.$store.dispatch("CreateJob/getDataSet",t.data)},async changeImage(e){let t=await(0,r.Ud)(e);1==t.success&&this.$store.dispatch("CreateJob/getImageVersion",t.rows),this.taskInfo.imagePrefix=e,this.taskInfo.imageVersion=this.imageVersionList[0].imageTag},async changeImageCatalog(e){let t=await(0,r.Uk)(e);if("200"==t.code){this.$store.dispatch("CreateJob/getImage",t.data);let e=await(0,r.Ud)(t.data[0].imageName);1==e.success&&this.$store.dispatch("CreateJob/getImageVersion",e.rows)}this.taskInfo.repositoryDir=e,this.taskInfo.imagePrefix=this.imageList[0].imageName,this.taskInfo.imageVersion=this.imageVersionList[0].imageTag,this.updateName()},initImageSelected(){this.taskInfo.repository=this.warehouseList[0].warehouseId,this.taskInfo.repositoryDir=this.imageCatalogList[0].catalogId,this.taskInfo.imagePrefix=this.imageList[0].imageName,this.taskInfo.imageVersion=this.imageVersionList[0].imageTag,this.updateName()},updateName(){var e=new Date;this.taskInfo.taskCnName="task"+(e.getMonth()+1)+e.getHours()+e.getMinutes()+e.getSeconds(),this.taskInfo.taskName=this.taskInfo.taskCnName}},async mounted(){let e=await(0,r.qu)();if(1==e.success){this.$store.dispatch("CreateJob/getQueueList",e.rows);let t=await(0,r.ei)(e.rows[0].clusterId);if("200"==t.code){this.$store.dispatch("CreateJob/getWareHouseList",t.data);let e=await(0,r.Cp)(t.data[0].warehouseId);"200"==e.code&&this.$store.dispatch("CreateJob/getWareHouseImageList",e.data)}}if(this.$route.query.templateId){var t=new Date;this.tasks.push(...this.TaskTemplate),this.vcJob.vcJobCnName=this.JobTemplate.tvcJobCnName+(t.getMonth()+1)+t.getDate()+t.getHours()+t.getMinutes()+t.getSeconds(),this.vcJob.vcJobName=this.JobTemplate.tvcJobName+(t.getMonth()+1)+t.getDate()+t.getHours()+t.getMinutes()+t.getSeconds()}}},rt=nt,ct=(0,m.Z)(rt,lt,ot,!1,null,"59c8c45e",null),pt=ct.exports,dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[e._v("模型结果")])],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"left-card",attrs:{"body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"12px"},attrs:{span:16}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 模型结果列表 ")])]),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-top":"10px","padding-right":"5px","padding-top":"5px","padding-bottom":"5px","padding-left":"3px"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:function(t){e.parentFileDialogVisible=!0}}},[e._v("新建")])],1)],1)],1),a("el-dialog",{attrs:{title:"新建模型结果",visible:e.parentFileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的模型结果名称",size:"small"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createParentFile}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-table",{staticClass:"size",staticStyle:{width:"100%","margin-top":"10px"},attrs:{"highlight-current-row":"","show-header":!1,"max-height":"600px","row-style":{height:"0px"},"cell-style":{padding:"0px"},data:e.parentFileList}},[a("el-table-column",{attrs:{prop:"name",label:"文件名",align:"left","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"parentIcon",on:{click:function(a){return e.updateChileFileList(t.row.id,e.pageNum,null,t.row.name)}}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"right",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-edit-outline parentIcon",on:{click:function(a){return e.updateParentFileNameDialogVisible(t.row)}}})]),a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-delete parentIcon",staticStyle:{"margin-left":"10px"},on:{click:function(a){return e.deleteParentFile(t.row.id)}}})])],1)]}}])})],1),a("el-dialog",{attrs:{title:"重命名模型结果",visible:e.parentFileNameDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileNameDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入重命名的模型结果名称",size:"small"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileNameDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updateParentFileName()}}},[e._v("确 定")])],1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)","margin-top":"10px","margin-left":"10px",overflow:"auto"},attrs:{"body-style":{padding:"0px"}}},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px","margin-top":"3px"}},[a("span",{staticClass:"size",staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 模型结果文件列表 ")])]),a("el-col",{attrs:{span:20}},[e.parentFileName?a("h3",{staticClass:"size",staticStyle:{"margin-top":"3px"}},[e._v(" 当前模型结果: "),a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.parentFileName))])],1):e._e()])],1),a("el-row",{staticStyle:{"margin-top":"10px","margin-left":"10px","font-size":"20px"}},[a("el-input",{staticStyle:{width:"99%"},attrs:{disabled:"",size:"small"},model:{value:e.dirpath,callback:function(t){e.dirpath=t},expression:"dirpath"}},[a("template",{slot:"prepend"},[e._v("当前路径:")])],2)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-d-arrow-left",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-folder-add",size:"small"},on:{click:function(t){e.fileDialogVisible=!0}}},[e._v("新建文件夹")])],1),a("el-dialog",{attrs:{title:"新建文件夹",visible:e.fileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.fileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的文件名",size:"small"},model:{value:e.newDirName,callback:function(t){e.newDirName=t},expression:"newDirName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.fileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.newDir}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}}),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download",size:"small"},on:{click:e.downloadChildFiles}},[e._v("下载选中")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.deleteFiles}},[e._v("删除选中")])],1)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{ref:"table",staticClass:"size",staticStyle:{width:"100%"},attrs:{data:e.childFileList,"max-height":"560"},on:{"select-all":e.selectTableAll,select:e.selectFile}},[a("el-table-column",{attrs:{width:"80",type:"selection"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:1}},[1==t.row.fileType?a("i",{staticClass:"el-icon-folder"}):e._e(),1!=t.row.fileType?a("i",{staticClass:"el-icon-document"}):e._e()]),a("el-col",{attrs:{span:22,offset:1}},[e.isShow[t.$index]?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{"margin-left":"5px"},attrs:{size:"mini",placeholder:t.row.fileName},on:{blur:function(a){return e.updatename(t.$index,t.row)},focus:function(a){e.oldname=t.row.fileName}},model:{value:t.row.fileName,callback:function(a){e.$set(t.row,"fileName",a)},expression:"scope.row.fileName"}}):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isShow[t.$index],expression:"!isShow[scope.$index]"}],staticStyle:{"margin-left":"5px"},on:{click:function(a){return e.openDir(t.row)}}},[e._v(e._s(t.row.fileName))])],1)],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"modifyTime",label:"修改时间",width:"250"}}),a("el-table-column",{attrs:{prop:"fileSize",label:"大小","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"320","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!=t.row.fileName.indexOf("csv")?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-view",size:"small"},on:{click:function(a){return e.getCSVViewData(t.row.fileName,t.row.rootPath)}}},[e._v("可视化")]):e._e(),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.changeIsShow(t.$index)}}},[e._v("重命名")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",icon:"el-icon-download",size:"small"},on:{click:function(a){return e.downloadChildFile(t.row.fileName)}}},[e._v("下载")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.deleteFile(t.row.fileName)}}},[e._v("删除")])]}}])})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":e.page,layout:"prev, pager, next,sizes",total:Number(e.totalRecord)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)],1)],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"可视化",visible:e.viewDialogVisible,width:"60%","before-close":e.handleViewClose},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[a("div",{staticStyle:{height:"400px",width:"100%"},attrs:{id:"chart"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleViewClose}},[e._v("关 闭")])],1)])],1)},mt=[],ht={name:"Data",data(){return{page:10,isShow:[],parentId:"",path:[],checkedfile:[],fileDialogVisible:!1,uploadDialogVisible:!1,parentFileDialogVisible:!1,parentFileNameDialogVisible:!1,newDirName:"",oldname:"",parentFileName:"",newParentFileName:"",newParentFileId:"",viewData:null,viewDialogVisible:!1,sysURL:a(5453)}},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},computed:{...(0,c.rn)("ResultFile",["parentFileList","childFileList","pageNum","filePath","totalRecord"]),dirpath(){let e="";return this.path.forEach((t=>{e=e+"/"+t})),this.path.length>=1?e:"/"}},methods:{initEcharts(e){let t=[];for(let s=1;s<=this.viewData.length;s++)t.push(s);let a={title:{text:e,left:"1%",top:"3%"},tooltip:{trigger:"axis"},grid:{left:"5%",right:"15%",bottom:"17%"},xAxis:{data:t},visualMap:{top:50,right:10,pieces:[{gt:0,lte:50,color:"#93CE07"},{gt:50,lte:100,color:"#FBDB0F"},{gt:100,lte:150,color:"#FC7D02"},{gt:150,lte:200,color:"#FD0100"},{gt:200,lte:300,color:"#AA069F"},{gt:300,lte:600,color:"#AC3B2A"},{gt:600,lte:1e3,color:"#000059"},{gt:1e3,color:"#df0101"}],outOfRange:{color:"#999"}},yAxis:{},toolbox:{right:10,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},dataZoom:[{startValue:t.length-8},{type:"inside"}],series:{name:e,type:"line",data:this.viewData,markLine:{silent:!0,lineStyle:{color:"#333"}}}};this.$echarts.init(document.getElementById("chart")).setOption(a)},handleViewClose(){this.viewData=null,this.viewDialogVisible=!1},async getCSVViewData(e,t){this.viewDialogVisible=!0;let a=await(0,r.KD)(t+this.dirpath+"/"+e);200==a.code?(this.viewData=a.data,this.initEcharts(e)):(this.$message.error("读取失败"),this.viewDialogVisible=!1)},downloadChildFiles(){for(let e=0;e<this.checkedfile.length;e++)this.downloadChildFile(this.checkedfile[e])},async downloadChildFile(e){let t=await(0,r._W)(e,this.parentId,this.dirpath),a=t.data,s=a.split("/");if("200"==t.code){let e=await(0,r.LU)(a);if(1==e.data)window.open(this.sysURL.IPAddress.bocloud+s[3]+"/"+s[4]);else{let e=setInterval((async function(){let t=await(0,r.LU)(a);1==t.data&&(window.open(this.sysURL.IPAddress.bocloud+s[0]),clearInterval(e))}),2e4)}}},updateChileFileList(e,t,a,s){this.path=[],this.parentId=e,this.parentFileName=s,this.updateFileList(e,t,a)},updateParentFileNameDialogVisible(e){this.parentFileNameDialogVisible=!0,this.newParentFileName=e.name,this.newParentFileId=e.id},async updateParentFileName(){let e=await(0,r.Z2)(this.newParentFileId,this.newParentFileName,"",6,2);"200"==e.code?(this.$message({type:"success",message:"更新成功"}),this.parentFileNameDialogVisible=!1,this.updateParentFileList(),this.newParentFileName=""):this.$message.error("更新失败")},async deleteParentFile(e){let t=await(0,r.Wt)(e);"200"==t.code?(this.$message({type:"success",message:"删除成功"}),this.updateParentFileList()):this.$message.error(t.data)},async createParentFile(){let e=await(0,r.l5)(this.newParentFileName,"",6,2);"200"==e.code?(this.parentFileDialogVisible=!1,this.$message({type:"success",message:"新建成功"}),this.updateParentFileList(),this.newParentFileName=""):this.$message.error("新建失败")},changeIsShow(e){let t=!this.isShow[e];this.isShow.splice(e,1,t)},initShow(){if(null!=this.childFileList)for(let e=0;e<this.childFileList.length;e++)this.isShow.push(!1)},previewFile(e){let t="http://127.0.0.1:8080/preview"+this.dirpath+"/"+e,s=a(79719).Base64;window.open("http://127.0.0.1:8012/onlinePreview?url="+encodeURIComponent(s.encode(t)))},async deleteFiles(){let e=await(0,r.H8)(this.parentId,this.checkedfile,this.dirpath);"200"==e.code&&this.$message({type:"success",message:"删除成功"}),this.updateFileList(this.parentId,this.pageNum,this.dirpath),this.checkedfile=[]},async deleteFile(e){let t=[];t.push(e);let a=await(0,r.H8)(this.parentId,t,this.dirpath);"200"==a.code&&this.$message({type:"success",message:"删除成功"}),this.updateFileList(this.parentId,this.pageNum,this.dirpath)},async uploadFile(e){if(e.file.size<2048e3){const t=new FormData;t.append("file",e.file);let a=e.file.size+"-"+e.file.name.substring(0,2)+e.file.name.split(".")[e.file.name.split(".").length-1],s=await(0,r.Tf)(e.file.size,e.file.size,a,e.file.name,e.file.webkitRelativePath,this.dirpath,this.parentId,e.file);"200"==s.code?this.updateFileList(this.parentId,this.pageNum,this.dirpath):this.$message.error("上传失败")}else this.$message.error("文件过大,无法上传")},submitUpload(){this.$refs.upload.submit()},handleUpload(e){this.uploadDialogVisible=!0,"uploadFile"==e?this.$nextTick((()=>{this.$refs.upload.$children[0].$refs.input.webkitdirectory=!1})):this.$nextTick((()=>{this.$refs.upload.$children[0].$refs.input.webkitdirectory=!0}))},async newDir(){let e=await(0,r.ek)(this.parentId,this.dirpath,this.newDirName,null);"200"==e.code?(this.$message({type:"success",message:"新建成功"}),this.updateFileList(this.parentId,this.pageNum,this.dirpath)):this.$message.error("新建失败:文件名重复!"),this.fileDialogVisible=!1,this.newDirName=""},handleClose(e){this.$confirm("确认关闭？").then((t=>{e()})).catch((e=>{}))},selectTableAll(){null!=this.childFileList&&(this.checkedfile.length>=this.childFileList.length?this.checkedfile=[]:(this.checkedfile=[],this.childFileList.forEach((e=>{this.checkedfile.push(e.fileName)}))))},selectFile(e,t){this.checkedfile.includes(t.fileName)?this.checkedfile.forEach((function(e,a,s){e==t.fileName&&s.splice(a,1)})):this.checkedfile.push(t.fileName),null!=this.childFileList&&this.checkedfile.length==this.childFileList.length?this.checkedall=!0:this.checkedall=!1},goBack(){this.path.pop(),this.updateFileList(this.parentId,1,this.dirpath)},openDir(e){1==e.fileType&&(this.path.push(e.fileName),this.updateFileList(this.parentId,1,this.dirpath))},updateFileList(e,t,a){null==e&&this.parentFileList.length>0&&(e=this.parentFileList[0].id,this.ParentFileName=this.parentFileList[0].fileName),this.$store.dispatch("ResultFile/getChildFileList",{dataId:e,filePath:a,current:t,size:this.page}),this.initShow()},async updateParentFileList(){let e=await(0,r.zd)(2,0,0);"200"==e.code&&(this.$store.dispatch("ResultFile/getParentFileList",e.data),this.parentFileName=e.data[0].name,this.parentId=this.parentFileList[0].id),null!=this.parentFileList&&this.updateFileList(this.parentFileList[0].id,this.pageNum,null)},async updatename(e,t){if(this.changeIsShow(e),this.oldname!=t.fileName){let e=await(0,r.C)(this.parentId,this.dirpath,this.oldname,t.fileName);"200"==e.code?this.$message({type:"success",message:"修改成功"}):this.$message.error("修改失败")}else this.$message.warning("新名称与原名称相同")},handleCurrentChange(e){this.updateFileList(this.parentId,e,this.dirpath)},handleSizeChange(e){this.page=e,this.updateFileList(this.parentId,this.pageNum,this.dirpath)}},async mounted(){let e=await(0,r.zd)(2,0,0);e.data.length>0&&(this.$store.dispatch("ResultFile/getParentFileList",e.data),this.parentFileName=e.data[0].name,"200"==e.code&&e.data.length>0&&this.$store.dispatch("ResultFile/getChildFileList",{dataId:e.data[0].id,filePath:null,current:1,size:this.page}),this.initShow(),this.parentId=e.data[0].id)}},ut=ht,gt=(0,m.Z)(ut,dt,mt,!1,null,"9a931010",null),ft=gt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[a("span",{staticClass:"bread",on:{click:e.toJob}},[e._v("作业列表")])]),a("el-breadcrumb-item",[e._v(e._s(e.joblist[e.index].vcJobCnName))])],1)],1),a("el-card",{staticStyle:{"background-color":"#eaebed",margin:"10px",height:"calc(100vh - 170px)"},attrs:{"body-style":{padding:"0px"}}},[a("el-row",[a("el-card",{staticStyle:{height:"85px",margin:"10px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 基本信息 ")])]),a("el-row",{staticStyle:{"margin-top":"30px","margin-left":"20px"}},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"size"},[e._v("作业名称："+e._s(e.joblist[e.index].vcJobCnName))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"size"},[e._v("作业类型：标准作业")])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"size"},[e._v("所属队列：default")])])],1)],1)],1),a("el-row",[a("el-card",{staticStyle:{height:"calc(100vh - 290px)","margin-left":"10px","margin-right":"10px","margin-buttom":"10px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 计算实例列表 ")])]),a("el-row",{staticStyle:{"margin-top":"10px","margin-left":"20px"}},[a("el-col",{staticStyle:{margin:"10px"},attrs:{span:4}},[a("el-input",{attrs:{size:"small",placeholder:"请输入节点名称","prefix-icon":"el-icon-search"},model:{value:e.hostName,callback:function(t){e.hostName=t},expression:"hostName"}})],1),a("el-col",{staticStyle:{margin:"10px"},attrs:{span:4}},[a("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"请输入计算实例名称"},model:{value:e.podName,callback:function(t){e.podName=t},expression:"podName"}})],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:1}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.searchList()}}},[e._v("搜索")])],1),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:8}},[e.showHostName?a("el-tag",{staticStyle:{"margin-top":"10px",height:"32px"},attrs:{closable:""},on:{close:e.clearHostSearch}},[e._v("节点:"+e._s(e.hostName))]):e._e(),e.showPodName?a("el-tag",{staticStyle:{"margin-top":"10px",height:"32px","margin-left":"10px"},attrs:{closable:""},on:{close:e.clearPodSearch}},[e._v("计算实例:"+e._s(e.podName))]):e._e()],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{staticClass:"size",staticStyle:{width:"100%","margin-top":"10px","margin-left":"10px","margin-rigth":"10px"},attrs:{"row-style":{height:"20px"},"cell-style":{padding:"8px"},data:e.formatedJobInfoList,border:!0,"max-height":"360"}},[a("el-table-column",{attrs:{prop:"hostName",label:"节点名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"hostIp",label:"节点IP","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"podName",label:"计算实例","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"status",label:"实例状态","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskName",label:"所属任务","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始运行时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"endTime",label:"运行结束时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-chat-dot-round"},on:{click:function(a){return e.getJobLogs(t.$index,t.row)}}},[e._v("日志")]),a("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-view"},on:{click:function(a){return e.ConvertViewLogs(t.$index,t.row)}}},[e._v("可视化")])]}}])})],1)],1),a("el-dialog",{attrs:{visible:e.rizhiDialogVisible,"before-close":e.handleClose,width:"1000px",title:"日志"},on:{"update:visible":function(t){e.rizhiDialogVisible=t}}},[a("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticStyle:{height:"500px",overflow:"auto","padding-left":"20px","padding-right":"20px"}},[e._v("                                                            "),a("code",{staticClass:"json",staticStyle:{"font-size":"16px","background-color":"#20211d",height:"440px",padding:"0px",margin:"0px"},attrs:{id:"statusLog",code:e.logs}}),e._v("\n                                                          ")])]),a("el-dialog",{staticClass:"dialog",attrs:{title:"可视化",visible:e.viewDialogVisible,width:"60%","before-close":e.handleViewClose},on:{"update:visible":function(t){e.viewDialogVisible=t}}},[a("el-cascader",{attrs:{options:e.options},on:{change:e.changeSelected},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("div",{staticStyle:{height:"400px",width:"100%"},attrs:{id:"chart"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleViewClose}},[e._v("关 闭")])],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":10,layout:"prev, pager, next,sizes","page-count":Number(e.jobInfoPageCount)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)],1)],1)],1)},vt=[],wt=a(22223),_t=wt.Z,yt=(0,m.Z)(_t,bt,vt,!1,null,"e52fc63e",null),xt=yt.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("模型管理")]),a("el-breadcrumb-item",[e._v("在线IDE")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{staticStyle:{"font-size":"16px"},attrs:{data:e.data,"highlight-current-row":"","max-height":"600"}},[a("el-table-column",{attrs:{property:"name",label:1==e.type?"模型数据":"模型结果"}}),a("el-table-column",{attrs:{property:"catalog",label:"路径"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openIDE(t.row.catalog)}}},[e._v("打开IDE")])]}}])})],1)],1)],1),a("el-dialog",{staticClass:"dialogClass",attrs:{visible:e.dialogVisible,fullscreen:"","show-close":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",{staticStyle:{width:"100%",height:"60px","font-size":"16px"},attrs:{slot:"title"},slot:"title"},[e._v("在线IDE"),a("el-button",{staticStyle:{float:"right","margin-right":"10px","margin-bottom":"10px"},attrs:{type:"danger",size:"mini"},on:{click:e.handleClose}},[e._v("退出")])],1),a("iframe",{staticStyle:{width:"100%",height:"calc(100vh - 58px)"},attrs:{name:"iframe",src:e.sysURL.IPAddress.ide+"ide/my/?folder=%2Fhome%2Fcoder%2Fworkspace%2F"}})])],1)},St=[];const kt=()=>{var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)document.cookie=e[t]+"=0;expires="+new Date(0).toUTCString()};var Pt=a(57421),Ct=a.n(Pt),Lt={name:"Ide",data(){return{type:1,dialogVisible:!1,name:"",sysURL:a(5453)}},computed:{...(0,c.rn)("CreateJob",["data"])},methods:{openIDE(e){this.name=e,(0,r.gg)({name:e,password:e});let t=this,a=b.Loading.service({fullscreen:!0,text:"在线IDE加载中..."});setTimeout((()=>{t.axios({url:this.sysURL.IPAddress.ide+"node-manager/user/register",method:"post",data:Ct().stringify({name:e,password:e})}).then((e=>{}))}),100),setTimeout((()=>{t.axios({url:this.sysURL.IPAddress.ide+"node-manager/user/login",method:"post",data:Ct().stringify({name:e,password:e})}).then((e=>{(0,r.k1)()}))}),200),setTimeout((()=>{(0,r.O$)()}),900),setTimeout((()=>{a.close(),t.dialogVisible=!0}),3e3)},stopIDE(e){(0,r.gg)({name:e,password:e}),(0,r.vP)(),this.$message({type:"success",message:"关闭成功!"})},async getDataSet(e){this.type=e;let t=await(0,r.iM)(this.type);200==t.code&&this.$store.dispatch("CreateJob/getDataSet",t.data);let a=this;for(let s=0;s<this.data.length;s++)setTimeout((()=>{a.axios({url:this.sysURL.IPAddress.ide+"node-manager/user/register",method:"post",data:Ct().stringify({name:a.data[s].catalog,password:a.data[s].catalog})}).then((e=>{}))}),100*(s+1))},handleClose(){let e=this;this.$confirm("确认关闭？").then((t=>{kt(),e.stopIDE(this.name),location.reload()})).catch((e=>{}))}},mounted(){this.getDataSet(this.type)}},Nt=Lt,Tt=(0,m.Z)(Nt,It,St,!1,null,"07cb4b54",null),zt=Tt.exports,Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("个人中心")]),a("el-breadcrumb-item",[e._v("信息管理")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-form",{ref:"userForm",staticStyle:{margin:"0px",padding:"0px",width:"calc(100vh-250px)"},attrs:{model:e.userInfo,rules:e.userInfoRules}},[a("el-descriptions",{staticClass:"positioncss size",staticStyle:{width:"100%"},attrs:{title:"信息管理",column:2,border:""}},[a("template",{slot:"extra"},[e.edit?e._e():a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.edit=!0}}},[e._v("编辑")]),a("el-form-item",[e.edit?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-check"},on:{click:function(t){return e.updateUserInfo()}}},[e._v("保存")]):e._e(),e.edit?a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small",icon:"el-icon-close"},on:{click:function(t){return e.cancelUpdate()}}},[e._v("取消")]):e._e()],1)],1),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-info"}),e._v(" 登录账号 ")]),e._v(e._s(e.userInfo.login))],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),e._v(" 昵称")]),e._v(e._s(e.userInfo.name))],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-edit"}),e._v(" 密码 ")]),a("span",{staticClass:"passwd",on:{click:function(t){e.passwordDialogVisible=!0}}},[e._v("修改密码")])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"iconfont icon-xingbie",staticStyle:{"font-size":"16px"}}),e._v(" 性别 ")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],attrs:{size:"small"}},[e._v(e._s(e.userSex))]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],attrs:{prop:"phone"}},[a("el-select",{attrs:{size:"small"},model:{value:e.userSex,callback:function(t){e.userSex=t},expression:"userSex"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-message"}),e._v(" 邮箱 ")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],attrs:{size:"small"}},[e._v(e._s(e.userInfo.email))]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],attrs:{prop:"email"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1)],2)],2)],1)],1),a("el-dialog",{staticClass:"dialogClass",attrs:{title:"修改密码",visible:e.passwordDialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.passwordDialogVisible=t}}},[a("el-form",{ref:"passwdForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{"label-position":"right","label-width":"100px",rules:e.passwdRules,model:e.passwd}},[a("el-row",[a("el-form-item",{attrs:{label:"当前密码",prop:"oldPassword"}},[a("el-input",{staticStyle:{width:"270px"},attrs:{placeholder:"请输入当前密码",size:"small","show-password":""},on:{blur:function(t){return e.verifyPasswd()}},model:{value:e.passwd.oldPassword,callback:function(t){e.$set(e.passwd,"oldPassword",t)},expression:"passwd.oldPassword"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"新密码",prop:"newPassword1"}},[a("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请输入新密码",size:"small"},model:{value:e.passwd.newPassword1,callback:function(t){e.$set(e.passwd,"newPassword1",t)},expression:"passwd.newPassword1"}})],1)],1),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-form-item",{attrs:{label:"二次确认",prop:"newPassword2"}},[a("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请再次输入新密码",size:"small"},model:{value:e.passwd.newPassword2,callback:function(t){e.$set(e.passwd,"newPassword2",t)},expression:"passwd.newPassword2"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closePasswd()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updatePasswd()}}},[e._v("确 定")])],1)],1)],1)],1)},Et=[],Ft={name:"UserInfo",data(){var e=(e,t,a)=>""===this.passwd.newPassword2?a(new Error("请再次输入密码")):this.passwd.newPassword2!=this.passwd.newPassword1?a(new Error("两次输入密码不一致!")):a(),t=(e,t,a)=>{const s=/^1[3|4|5|6|7|8][0-9]{9}$/;if(!t)return a(new Error("电话号码不能为空"));setTimeout((()=>{Number.isInteger(+t)?s.test(t)?a():a(new Error("电话号码格式不正确")):a(new Error("请输入数字值"))}),100)};return{userSex:"",edit:!1,passwordDialogVisible:!1,passwd:{oldPassword:"",newPassword1:"",newPassword2:""},passwdRules:{oldPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword1:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:8,max:16,message:"请输入8-16位字符",trigger:"blur"}],newPassword2:[{required:!0,validator:e,trigger:"change"}]},userInfo:{},userInfoRules:{phone:[{required:!0,validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]}}},computed:{},methods:{updateUserInfo(){let e=this;this.$refs["userForm"].validate((async t=>{if(!t)return!1;{let t=await(0,r.jx)({accountId:JSON.parse(localStorage.getItem("userInfo")).id,dynamicFields:{},email:e.userInfo.email,phone:e.userInfo.phone}),a=await(0,r.Nz)(e.userSex);"200"==t.code&&"200"==a.code?(e.edit=!1,localStorage.setItem("userInfo",JSON.stringify(e.userInfo)),localStorage.setItem("userotherInfo",JSON.stringify(a.data)),e.$message({type:"success",message:"修改成功"})):e.$message.error("修改失败")}}))},cancelUpdate(){this.edit=!1,this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.clearValidate("userForm")},clearValidate(e){this.$refs[e].clearValidate()},async verifyPasswd(){let e=a(79719).Base64;if(""!=this.passwd.oldPassword){let t=await(0,r.LM)(e.encode(this.passwd.oldPassword));!0!==t.data&&(this.$message.error("原密码错误!"),this.passwd.oldPassword="")}},handleClose(e){let t=this;this.$confirm("确认关闭？").then((a=>{t.passwd.oldPassword="",t.passwd.newPassword1="",t.passwd.newPassword2="",e()})).catch((e=>{}))},closePasswd(){this.passwordDialogVisible=!1,this.passwd.oldPassword="",this.passwd.newPassword1="",this.passwd.newPassword2=""},updatePasswd(){this.passwordDialogVisible=!1;let e=this;this.$refs["passwdForm"].validate((async t=>{if(!t)return!1;{let t=a(79719).Base64;await(0,r.$Z)({password:t.encode(this.passwd.newPassword1),oldPassword:t.encode(this.passwd.oldPassword),id:this.userInfo.id});e.logout()}}))}},mounted(){this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.userSex=JSON.parse(localStorage.getItem("userotherInfo")).sex}},$t=Ft,Ot=(0,m.Z)($t,Dt,Et,!1,null,"f365521a",null),Mt=Ot.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("结果可视化")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("el-row",[a("el-cascader",{staticClass:"size",staticStyle:{"margin-left":"0px"},attrs:{options:e.allOptions,props:{expandTrigger:"hover"},size:"small",clearable:"",placeholder:"请选择示范点"},on:{clear:function(t){return e.fixMap()},change:e.selectChange},model:{value:e.alltag,callback:function(t){e.alltag=t},expression:"alltag"}}),e.showDoubleMap?e._e():a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.changeSize()}}},[e._v("结果对比")]),e.showDoubleMap?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.changeSize()}}},[e._v("还原")]):e._e()],1),e.tag?a("el-button",{staticStyle:{position:"fixed",bottom:"260px",right:"31px","z-index":"9999999","font-size":"16px",padding:"6px"},attrs:{size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.create()}}}):e._e(),e.is3D?e._e():a("el-button",{staticStyle:{position:"fixed",bottom:"185px",right:"31px","z-index":"9999999","font-size":"14px",padding:"5px"},attrs:{size:"small"},on:{click:function(t){return e.addThreeD()}}},[e._v("3D")]),e.is3D?a("el-button",{staticStyle:{position:"fixed",bottom:"185px",right:"31px","z-index":"9999999","font-size":"14px",padding:"5px"},attrs:{size:"small"},on:{click:function(t){return e.addTwoD()}}},[e._v("2D")]):e._e(),a("el-button",{staticStyle:{position:"fixed",bottom:"222px",right:"31px","z-index":"9999999","font-size":"16px",padding:"6px"},attrs:{size:"small",icon:"el-icon-view"},on:{click:function(t){return e.fixMap()}}}),a("div",{staticStyle:{float:"right"},attrs:{id:"map"}}),a("div",{staticStyle:{float:"left"},attrs:{id:"resultMap"}}),e.showDoubleMap&&"孟买"==e.selectedTag?a("el-card",{staticStyle:{width:"120px",height:"30px",position:"fixed",top:"168px",left:"230px","z-index":"9"},attrs:{"body-style":{padding:"5px"}}},[a("div",{staticStyle:{"line-height":"20px",height:"20px"}},[a("div",{staticStyle:{width:"70px",height:"8px","background-color":"#6eed47","border-radius":"0%",display:"inline-block","margin-bottom":"2px"}}),a("div",{staticStyle:{display:"inline-block","font-size":"16px","margin-left":"4px"}},[e._v(" 道路 ")])])]):e._e(),e.showDoubleMap&&"瓜德尔港"==e.selectedTag?a("el-card",{staticStyle:{width:"70px",height:"110px",position:"fixed",top:"168px",left:"230px","z-index":"9"},attrs:{"body-style":{padding:"5px"}}},[a("div",{staticStyle:{"line-height":"16px",height:"16px","margin-top":"4px"}},[a("div",{staticStyle:{width:"14px",height:"14px","background-color":"#ea3323","border-radius":"50%",display:"inline-block"}}),a("div",{staticStyle:{display:"inline-block","font-size":"16px","margin-left":"4px"}},[e._v(" 建筑 ")])]),a("div",{staticStyle:{"line-height":"16px",height:"16px","margin-top":"4px"}},[a("div",{staticStyle:{width:"14px",height:"14px","background-color":"#ef8733","border-radius":"50%",display:"inline-block"}}),a("div",{staticStyle:{display:"inline-block","font-size":"16px","margin-left":"4px"}},[e._v(" 道路 ")])]),a("div",{staticStyle:{"line-height":"16px",height:"16px","margin-top":"4px"}},[a("div",{staticStyle:{width:"14px",height:"14px","background-color":"#377e22","border-radius":"50%",display:"inline-block"}}),a("div",{staticStyle:{display:"inline-block","font-size":"16px","margin-left":"4px"}},[e._v(" 植被 ")])]),a("div",{staticStyle:{"line-height":"16px",height:"16px","margin-top":"4px"}},[a("div",{staticStyle:{width:"14px",height:"14px","background-color":"#0000f5","border-radius":"50%",display:"inline-block"}}),a("div",{staticStyle:{display:"inline-block","font-size":"16px","margin-left":"4px"}},[e._v(" 水体 ")])]),a("div",{staticStyle:{"line-height":"16px",height:"16px","margin-top":"4px"}},[a("div",{staticStyle:{width:"14px",height:"14px","background-color":"#75147c","border-radius":"50%",display:"inline-block"}}),a("div",{staticStyle:{display:"inline-block","font-size":"16px","margin-left":"4px"}},[e._v(" 港口 ")])])]):e._e(),e.showDoubleMap&&"孟加拉国"==e.selectedTag?a("el-card",{staticStyle:{width:"70px",height:"28px","line-height":"28px",position:"fixed",top:"168px",left:"230px","z-index":"9","background-color":"#5a9cf8",border:"#5a9cf8"},attrs:{"body-style":{padding:"5px"}}},[a("div",{staticStyle:{"line-height":"16px",height:"16px"}},[a("div",{staticStyle:{width:"14px",height:"14px","background-color":"#ffffff","border-radius":"50%",display:"inline-block"}}),a("div",{staticStyle:{display:"inline-block","font-size":"16px","margin-left":"4px"}},[e._v(" 水体 ")])])]):e._e(),!e.showDoubleMap||"新疆"!=e.selectedTag&&"哈萨克斯坦"!=e.selectedTag?e._e():a("el-card",{staticStyle:{width:"300px",height:"50px",position:"fixed",top:"168px",left:"230px","z-index":"9"},attrs:{"body-style":{padding:"10px"}}},[a("div",{staticStyle:{width:"280px",height:"10px",background:"linear-gradient(to right, #c2523c, #30e100, #0b2f79)","border-radius":"4px"}}),a("span",{staticClass:"size",staticStyle:{float:"left","margin-top":"4px"}},[e._v("干旱")]),a("span",{staticClass:"size",staticStyle:{float:"right","margin-top":"4px"}},[e._v("湿润")])]),e.showDoubleMap&&"缅甸"==e.selectedTag?a("el-card",{staticStyle:{width:"100px",height:"100px",position:"fixed",top:"168px",left:"230px","z-index":"9"},attrs:{"body-style":{padding:"10px"}}},[e._v("我是缅甸图例")]):e._e(),!e.showDoubleMap||"新疆"!=e.selectedTag&&"哈萨克斯坦"!=e.selectedTag?e._e():a("el-date-picker",{staticClass:"date-picker",attrs:{type:"month","value-format":"yyyy - M"},on:{change:function(t){return e.changeGanHanImage()}},model:{value:e.imgDate,callback:function(t){e.imgDate=t},expression:"imgDate"}})],1)],1)},Rt=[];const Jt=e=>{e.on("load",(()=>{e.addSource("guadeerresult",{type:"image",url:a(27180),coordinates:[[62.310005117853564,25.144126930107788],[62.357970339633596,25.144126930107788],[62.357970339633596,25.101741696535626],[62.310005117853564,25.101741696535626]]}),e.addLayer({id:"road-layer",type:"raster",source:"guadeerresult",paint:{"raster-fade-duration":0}})}))},Vt=e=>{e.on("load",(()=>{e.addSource("mengjialaguo_after",{type:"image",url:a(24759),coordinates:[[89.5984983005694,23.9493358153192],[90.2388330069639,23.9493358153192],[90.2388330069639,23.3237343611658],[89.5984983005694,23.3237343611658]]}),e.addLayer({id:"mengjialaguo_after-layer",type:"raster",source:"mengjialaguo_after",paint:{"raster-fade-duration":0}})}))},qt=e=>{e.on("load",(()=>{e.addSource("ganhan_hasakesitan",{type:"image",url:a(99224),coordinates:[[43.80265391419688,61.39570470387841],[90.20454083769285,61.39570470387841],[90.20454083769285,30.78581128872647],[43.80265391419688,30.78581128872647]]}),e.addLayer({id:"ganhan_hasakesitan_layer",type:"raster",source:"ganhan_hasakesitan",paint:{"raster-fade-duration":0}})}))},Bt=e=>{e.on("load",(()=>{e.addSource("ganhan_xinjiang",{type:"image",url:a(90366),coordinates:[[72.5,50.1407948645123],[97.43846412060707,50.1407948645123],[97.43846412060707,32.50524714454016],[72.5,32.50524714454016]]}),e.addLayer({id:"ganhan_xingjiang_layer",type:"raster",source:"ganhan_xinjiang",paint:{"raster-fade-duration":0}})}))},jt=function(e){if("string"===typeof e)return e.split(/[\t\r\f\n\s]*/g).join("");console.error(typeof e+" is not the expected type, but the string type is expected")};var Gt=a(64980),Ut=a.n(Gt),Ht={name:"DataView",data(){return{showzhuanye:!1,sysURL:a(5453),ganhanImagePath:"userInfo/preview/ganhanresult/",imgDate:"2018 - 1",mapState:[["geoserver/fulidebuer/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=fulidebuer:before_fulidebuer"],["geoserver/kangsitannai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=kangsitannai:all_kangsitannai"],["geoserver/jiaergeda/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=jiaergeda:all_jiaergeda"],["geoserver/gaoxionggang/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=gaoxionggang:all_gaoxionggang"],["geoserver/bogela/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=bogela:all_bogela_before"],["geoserver/yiluowadi/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=yiluowadi:all_yiluowadi"],["geoserver/xiamengang/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=xiamengang:all_xiamengang"],["geoserver/guadaer/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=guadaer:guadaer1","geoserver/guadaer/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=guadaer:guadaer2","geoserver/guadaer/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=guadaer:guadaer3","geoserver/guadaer/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=guadaer:guadaer4","geoserver/guadaer/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=guadaer:guadaer5"],["geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai1","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai2","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai3","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai4","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai5","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai6","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai7","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai8","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai9","geoserver/mengmai/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&transparent=true&WIDTH=256&HEIGHT=256&layers=mengmai:mengmai10"]],map:null,fullMap:null,resultMap:null,tag:null,alltag:[],selectedTag:null,is3D:!1,isFixed:!0,isFullScreen:!1,templateId:null,showDoubleMap:!1,currentImage:0,frameCount:5,allOptions:[{value:"城市路网提取",label:"城市路网提取",children:[{index:0,value:"0",label:"孟买",name:"孟买",color:"#18f218",tag:[72.880127,19.075847],zoom:15,templateId:39,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>孟买</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>孟买, 是印度西部滨海城市，印度第一大港口，棉纺织业中心，马哈拉施特拉邦首府。孟买是印度重要的贸易中心和港口城市。</h5>\n              </div>\n              </div>'}]},{value:"基础设施识别",label:"基础设施识别",children:[{index:0,name:"瓜德尔港",value:"0",label:"瓜德尔港",tag:[62.323615,25.119452],color:"#b3c0d1",zoom:15,templateId:32,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>瓜德尔港</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>瓜德尔港是巴基斯坦的重要港口。瓜德尔港位于巴基斯坦俾路支省西南部瓜德尔城南部，为深水良港。中国政府应穆沙拉夫总统的请求为该港口建设提供资金和技术援助。该港口于2002年3月开工兴建，2015年2月瓜德尔港基本竣工，4月中旬全面投入运营。中国部分石油的运输路程将缩短85%。</h5>\n              </div>\n              </div>'},{index:1,name:"厦门港",value:"1",label:"厦门港",tag:[118.04787047095806,24.4265100494397],color:"#b3c0d1",zoom:12,templateId:32,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>厦门港</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>厦门港，是中国 福建省 厦门市 和 漳州市 港口，位于中国东南沿海、台湾海峡西岸，地处福建省南部、 九龙江 入海口，是中国沿海主要港口、中国对外开放一类口岸，也是福建省主要出海口之一。</h5>\n              </div>\n              </div>'},{index:2,name:"高雄港",value:"2",label:"高雄港",tag:[120.32679399057355,22.552896651715784],color:"#b3c0d1",zoom:12,templateId:32,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>高雄港</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>高雄港(Kaohsiung Port)，中国台湾省内最大的海港。位于中国台湾省高雄市。大型综合性港口，有铁路、高速公路作为货物集运与疏运手段。</h5>\n              </div>\n              </div>'}]},{value:"水稻长势监测",label:"水稻长势监测",children:[{index:0,name:"缅甸",value:"0",label:"缅甸",color:"#BB271A",tag:[95.18500391855429,17.320208045937093],zoom:15,templateId:38,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>缅甸</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>缅甸联邦共和国（The Republic of the Union of Myanmar）。面积：676578平方公里。人口：5458万（2020年4月），共有135个民族，主要有缅族、克伦族、掸族、克钦族、钦族、克耶族、孟族和若开族等，缅族约占总人口的65%。</h5>\n              </div>\n              </div>'}]},{value:"洪涝灾害监测",label:"洪涝灾害监测",children:[{index:0,name:"孟加拉国",value:"0",label:"孟加拉国",tag:[89.91287977937156,23.64362166893602],color:"#4ea0fd",zoom:11,templateId:34,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>孟加拉国</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>孟加拉国位于南亚次大陆东北部的恒河和布拉马普特拉河冲积而成的三角洲上。东、西、北三面与印度毗邻，东南部与缅甸接壤，南部濒临孟加拉湾。海岸线长550公里。全境85%的地区为平原，东南部和东北部为丘陵地带，国土大部分地区海拔低于12米。</h5>\n              </div>\n              </div>'},{index:1,name:"博格拉地区",value:"1",label:"博格拉地区",tag:[89.45129761679254,24.937121301900987],color:"#4ea0fd",zoom:11,templateId:34,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>博格拉地区</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>博格拉（Bogra）于拉杰沙希区，是孟加拉国最古老、最迷人的城镇之一。，孟加拉国古老的历史记载了古代王朝在这里的征服。 这里是孟加拉国北部的中心，有发达的经济和多样的文化。</h5>\n              </div>\n              </div>'},{index:2,name:"加尔各答",value:"2",label:"加尔各答",tag:[88.4470964626986,22.46568144508325],color:"#4ea0fd",zoom:15,templateId:34,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>加尔各答</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>加尔各答位于印度东部，紧靠胡格利河，海拔6米，城市结构独特，除本身外，尚包括众多的卫星城市（镇），大市区沿胡格利河岸南北延伸达80千米，宽5-20千米不等，截至2011年，人口达457.29万人。</h5>\n              </div>\n              </div>'}]},{value:"旱情监测",label:"旱情监测",children:[{index:0,name:"哈萨克斯坦",value:"0",label:"哈萨克斯坦",color:"#ffdf60",tag:[64.75577203619281,53.29277096996523],zoom:12,templateId:36,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>哈萨克斯坦</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>哈萨克斯坦共和国位于中亚北部，与我国的新疆维吾尔自治区接壤。哈萨克斯坦是一个横跨亚洲、欧洲两大陆的国家，其在乌拉尔河以西的一小部分领土位于欧洲。</h5>\n              </div>\n              </div>'},{index:1,name:"新疆",value:"1",label:"新疆",color:"#ffdf60",tag:[83.80970464725857,40.39604221906748],zoom:5,templateId:36,message:'<div style="height:100%;width:100%;">\n              <div style="text-align:center"><h1>新疆</h1></div>\n              <div>\n                <h5 style="font-size:16px"><span style="font-weight:800;">简介:</span>新疆占中国总面积的六分之一，是中国面积最大的省级行政区。 新疆地处亚欧大陆腹地，与俄罗斯、哈萨克斯坦、吉尔吉斯斯坦、塔吉克斯坦、巴基斯坦、蒙古、印度、阿富汗等八国接壤，在历史上是沟通东西方、闻名于世的“丝绸之路”的要冲，现在又成为第二座“亚欧大陆桥”的必经之地，战略位置十分重要。</h5>\n              </div>\n              </div>'}]}],map_x:null,map_y:null,map_zoom:null,map_pitch:null,map_bear:null}},computed:{dataurl(){return this.sysURL.IPAddress.remotesatelite+(new Date).getTime()}},methods:{openZhuanye(){window.open("https://data.cresda.cn/#/mapSearch")},getMapIndexInfo(){this.map_x=this.map.getCenter().lng,this.map_y=this.map.getCenter().lat,this.map_zoom=this.map.getZoom(),this.map_pitch=this.map.getPitch(),this.map_bear=this.map.getBearing()},useInfoSetMap(){this.map.setCenter([this.map_x,this.map_y]),this.map.setZoom(this.map_zoom),this.map.setPitch(this.map_pitch),this.map.setBearing(this.map_bear),null!=this.resultMap&&(this.resultMap.setCenter([this.map_x,this.map_y]),this.resultMap.setZoom(this.map_zoom),this.resultMap.setPitch(this.map_pitch),this.resultMap.setBearing(this.map_bear))},removeMap(){let e=document.getElementById("resultMap"),t=document.getElementById("map");while(e.hasChildNodes())e.removeChild(e.firstChild);while(t.hasChildNodes())t.removeChild(t.firstChild)},changeSize(){this.getMapIndexInfo(),this.showDoubleMap?(this.removeMap(),document.getElementById("map").style.width=document.body.clientWidth-200-40+"px",document.getElementById("resultMap").style.top="200px",this.showDoubleMap=!1,this.initMap(3,!1)):(this.showDoubleMap=!0,this.removeMap(),document.getElementById("map").style.width=(document.body.clientWidth-200-42)/2+"px",document.getElementById("resultMap").style.width=(document.body.clientWidth-200-42)/2+"px",document.getElementById("resultMap").style.top="10px",document.getElementById("resultMap").style.float="left",document.getElementById("map").style.float="right",this.initMap(3,!0)),this.useInfoSetMap()},create(){this.$store.dispatch("Template/getJobTemplate",{templateId:this.templateId}),this.$store.dispatch("Template/getTaskTemplate",{templateId:this.templateId}),this.$router.push({name:"standardjob",query:{templateId:this.templateId}})},addThreeD(){this.map.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),this.map.setTerrain({source:"mapbox-dem",exaggeration:1.5}),this.resultMap.setTerrain({source:"mapbox-dem",exaggeration:1.5}),this.is3D=!0,this.isFixed=!1},addTwoD(){this.map.setTerrain(),this.resultMap.setTerrain(),this.map.removeSource("mapbox-dem"),this.resultMap.removeSource("mapbox-dem"),this.is3D=!1,this.isFixed=!1},full(){this.isFullScreen=!0,this.launchFullscreen(document.getElementById("fullScreenMap"))},launchFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullScreen()},checkFull(){var e=document.mozFullScreen||document.fullScreen||document.webkitIsFullScreen||document.webkitRequestFullScreen||document.mozRequestFullScreen||document.msFullscreenEnabled;return void 0===e&&(e=!1),e},selectChange(e){if(0!=this.alltag.length){let t;this.allOptions.forEach((a=>{a.value==e[0]&&(t=a.children[e[1]])})),this.templateId=t.templateId,this.jumpTo(t),this.showDoubleMap&&(this.resultMap.setCenter(t.tag),this.resultMap.setZoom(t.zoom))}else this.fixMap()},jumpTo(e){this.selectedTag=e.name,this.map.jumpTo({center:e.tag,zoom:e.zoom,duration:3e3}),this.tag=e.tag,this.isFixed=!1},fixMap(){this.map.jumpTo({zoom:3,center:[77.08685480625758,35.532881863509374],duration:3e3}),this.tag=null,this.selectedTag=null},changeGanHanImage(){this.resultMap.getSource("ganhan_hasakesitan").updateImage({url:this.sysURL.IPAddress.userInfo+this.ganhanImagePath+"hasakesitan/"+jt(this.imgDate)+".png"}),this.resultMap.getSource("ganhan_xinjiang").updateImage({url:this.sysURL.IPAddress.userInfo+this.ganhanImagePath+"xinjiang/"+jt(this.imgDate)+".png"})},initMap(e,t){this.map=null,this.resultMap=null,mapboxgl.accessToken="pk.eyJ1IjoibGF3aW5iZWUiLCJhIjoiY2w4OWpoNW5kMDBrdzNwbzNtcTgxaDl1YiJ9.xjTaNpwhQeBpbIFrQaXsKw";const a=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/satellite-streets-v11",zoom:e,center:[77.08685480625758,35.532881863509374],antialias:!1,attributionControl:!1});if(t){const t=new mapboxgl.Map({container:"resultMap",style:"mapbox://styles/lawinbee/clg191r9o004o01mmhyrr4hfs",zoom:e,center:[77.08685480625758,35.532881863509374],antialias:!1,attributionControl:!1});t.on("style.load",(()=>{t.setFog({})}));var s=new(Ut())({defaultLanguage:"zh-Hans"});t.doubleClickZoom.disable(),t.addControl(s),Jt(t),Vt(t),qt(t),Bt(t),a.on("drag",(function(){let e=a.getCenter().lng,s=a.getCenter().lat;t.setCenter([e,s])})),a.on("zoom",(function(){let e=a.getZoom(),s=a.getCenter().lng,i=a.getCenter().lat;t.setCenter([s,i]),t.setZoom(e)})),a.on("pitch",(function(){let e=a.getPitch(),s=a.getCenter().lng,i=a.getCenter().lat;t.setCenter([s,i]),t.setPitch(e)})),a.on("rotate",(function(){let e=a.getBearing();t.setBearing(e)})),this.resultMap=t}a.on("click",(e=>{const{lng:t,lat:a}=e.lngLat;console.log(t,a)})),a.on("style.load",(()=>{a.setFog({})})),a.doubleClickZoom.disable();var i=new(Ut())({defaultLanguage:"zh-Hans"});a.addControl(i);var l=new mapboxgl.NavigationControl;a.addControl(l,"bottom-right");var o=new mapboxgl.ScaleControl({maxWidth:100,unit:"imperial"});a.addControl(o),o.setUnit("metric");let n=this;for(let r=0;r<this.allOptions.length;r++)for(let e=0;e<this.allOptions[r].children.length;e++){new mapboxgl.Marker({color:this.allOptions[r].children[e].color,clickTolerance:10,draggable:!0}).setDraggable(!1).setLngLat(this.allOptions[r].children[e].tag).setPopup((new mapboxgl.Popup).setHTML(this.allOptions[r].children[e].message)).addTo(a)}for(let r=0;r<this.mapState.length;r++)for(let e=0;e<this.mapState[r].length;e++)console.log(n.mapState[r][e]),a.on("load",(()=>{a.addSource(String(r+"a"+e),{type:"raster",tiles:[n.sysURL.IPAddress.mapbox+n.mapState[r][e]],tileSize:256}),a.addLayer({id:String(r+"a"+e),type:"raster",source:String(r+"a"+e),paint:{"raster-opacity":1}})}));this.map=a,this.map.on("dblclick",(e=>{n.flyToMarker(e)})),this.isFixed=!0,this.is3D=!1},initFullScreenMap(e){let t={};this.options.forEach((a=>{a.tag==e&&(t=a)})),t.zoom||(t.zoom=2),mapboxgl.accessToken="pk.eyJ1IjoibGF3aW5iZWUiLCJhIjoiY2w4OWpoNW5kMDBrdzNwbzNtcTgxaDl1YiJ9.xjTaNpwhQeBpbIFrQaXsKw";const a=new mapboxgl.Map({container:"fullScreenMap",style:"mapbox://styles/mapbox/dark-v10",zoom:t.zoom,center:e,antialias:!1,attributionControl:!1});var s=new(Ut())({defaultLanguage:"zh-Hans"});a.addControl(s),a.on("style.load",(()=>{a.setFog({})}));for(let i=0;i<this.options.length;i++)new mapboxgl.Marker({color:"#5995FC",clickTolerance:10,draggable:!0}).setDraggable(!1).setLngLat(this.options[i].tag).setPopup((new mapboxgl.Popup).setHTML(this.options[i].message)).addTo(a);this.fullMap=a},flyToMarker(e){let t=!0;for(let a=0;a<this.allOptions.length;a++){for(let s=0;s<this.allOptions[a].children.length;s++)this.allOptions[a].children[s].tag[0]-2<=e.lngLat.lng&&e.lngLat.lng<=this.allOptions[a].children[s].tag[0]+2&&this.allOptions[a].children[s].tag[1]-2<=e.lngLat.lat&&e.lngLat.lat<=this.allOptions[a].children[s].tag[1]+2&&(this.isFixed=!1,this.tag=this.allOptions[a].children[s].name,this.map.flyTo({center:this.allOptions[a].children[s].tag,zoom:this.allOptions[a].children[s].zoom}),this.selectedTag=this.allOptions[a].children[s].name,this.alltag=[this.allOptions[a].value,this.allOptions[a].children[s].value],this.templateId=this.allOptions[a].children[s].templateId,t=!1);t&&(this.isFixed=!1,this.map.flyTo({center:e.lngLat,zoom:10}))}}},mounted(){this.initMap(3,!0),document.getElementById("resultMap").style.top="200px"},created(){window.onresize=()=>{this.checkFull()||(console.log("退出全屏"),this.isFullScreen=!1)}}},Wt=Ht,Zt=(0,m.Z)(Wt,At,Rt,!1,null,"5745065e",null),Kt=Zt.exports,Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("可视化")]),a("el-breadcrumb-item",[e._v("结果可视化")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}})],1)},Xt=[],Yt={name:"DataView",data(){return{}},computed:{},methods:{},mounted(){}},ea=Yt,ta=(0,m.Z)(ea,Qt,Xt,!1,null,"789a5c19",null),aa=ta.exports,sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("可视化")]),a("el-breadcrumb-item",[e._v("过程可视化")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}})],1)},ia=[],la={name:"ProcessView",data(){return{}},computed:{},methods:{},mounted(){}},oa=la,na=(0,m.Z)(oa,sa,ia,!1,null,"4613f0f9",null),ra=na.exports,ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("镜像仓库")]),a("el-breadcrumb-item",[e._v("镜像制作")])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)",overflow:"auto","margin-left":"10px"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("el-row",{staticStyle:{"padding-top":"0px","margin-top":"0px"}},[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 新建镜像制作流程 ")])]),a("el-row",[a("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(t){e.createDialogVisible=!0}}},[e._v(" 新建流程 ")]),a("el-dialog",{staticClass:"dialogClass",attrs:{title:"新建流程",visible:e.createDialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.createDialogVisible=t}}},[a("el-row",{staticStyle:{"padding-left":"20px","padding-right":"20px"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入新建的流程名称"},model:{value:e.newImageName,callback:function(t){e.newImageName=t},expression:"newImageName"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.createNewImageProcess()}}},[e._v("确 定")])],1)],1)],1),a("el-row",[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 镜像制作流程列表 ")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticStyle:{height:"calc(100vh-150px)",overflow:"auto"}},[a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{"row-style":{height:"30px"},"cell-style":{padding:"0px"},data:e.imageProcessList,border:!0,"max-height":"600"}},[a("el-table-column",{attrs:{prop:"name",label:"流程名","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"step1",label:"选择镜像文件","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"step2",label:"选择镜像仓库","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"step3",label:"推送远程仓库","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"step3",label:"流程状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.step3?a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("成功")]):e._e(),!t.row.step3&&null!=t.row.path&&t.row.step2&&t.row.step3logs?a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("失败")]):e._e(),null==t.row.path||t.row.step3logs?e._e():a("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("进行中")]),t.row.step1||t.row.path?e._e():a("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("未开始")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.editImageProcess(t.$index)}}}),a("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"10px",cursor:"pointer"},on:{click:function(a){return e.deleteImageProcess(t.row.id)}}})]}}])})],1)],1)])],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)",overflow:"auto","margin-left":"10px","margin-right":"10px",padding:"10px"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 镜像制作流程 ")])]),e.showSteps?a("el-col",{attrs:{span:6}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"10px"}},[e._v(" 当前流程: "),a("el-tag",{attrs:{size:"mini",type:"primary"}},[e._v(e._s(e.imageProcessList[e.processIndex].name))])],1)]):e._e()],1),e.showSteps?e._e():a("el-result",{staticStyle:{height:"100%","margin-top":"150px"},attrs:{icon:"info",title:"信息提示",subTitle:"请新建镜像制作流程或编辑已有流程"}}),e.showSteps?a("el-steps",{staticStyle:{"margin-top":"10px"},attrs:{active:e.activeIndex}},[a("el-step",{attrs:{title:"选择镜像文件",icon:"el-icon-folder-checked"}}),a("el-step",{attrs:{title:"选择镜像仓库",icon:"el-icon-edit-outline"}}),a("el-step",{attrs:{title:"推送远程仓库",icon:"el-icon-upload2"}})],1):e._e(),1==e.activeIndex?[a("el-row",[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 模型列表 ")])]),a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{"row-style":{height:"40px"},"cell-style":{padding:"0px"},data:e.data,border:!0,"max-height":"470"},on:{"row-click":e.updatePath}},[a("el-table-column",{attrs:{property:"name",label:"模型名称"}}),a("el-table-column",{attrs:{property:"catalog",label:"路径"}})],1),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"20px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.path,callback:function(t){e.path=t},expression:"path"}},[a("template",{slot:"prepend"},[e._v("文件路径:")])],2)],1),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"16px"}},[a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}},[a("template",{slot:"prepend"},[e._v("镜像名称:")])],2)],1),a("el-col",{attrs:{span:11,offset:2}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.imageVersion,callback:function(t){e.imageVersion=t},expression:"imageVersion"}},[a("template",{slot:"prepend"},[e._v("镜像版本:")])],2)],1)],1),a("el-row",[a("el-col",{attrs:{span:8,offset:16}},[a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.buildImage()}}},[e._v("构建镜像")])],1)],1)]:e._e(),2==e.activeIndex?[a("el-row",[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 镜像信息 ")])]),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"16px"}},[a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small"},model:{value:e.imageNamed,callback:function(t){e.imageNamed=t},expression:"imageNamed"}},[a("template",{slot:"prepend"},[e._v("镜像名称:")])],2)],1),a("el-col",{attrs:{span:11,offset:2}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small"},model:{value:e.imageVersioned,callback:function(t){e.imageVersioned=t},expression:"imageVersioned"}},[a("template",{slot:"prepend"},[e._v("镜像版本:")])],2)],1)],1),a("el-row",[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 镜像仓库 ")])]),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.repositoryDir,callback:function(t){e.repositoryDir=t},expression:"repositoryDir"}},e._l(e.imageCatalogList,(function(e,t){return a("el-option",{key:t,attrs:{label:"cluster-default-default"==e.envName?"private":e.envName,value:e.pushCatalog}})})),1)],1),a("el-col",{attrs:{span:11,offset:2}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.TagImage()}}},[e._v("确定")])],1)],1)]:e._e(),3==e.activeIndex?[a("el-row",[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 镜像信息 ")])]),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"16px"}},[a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small"},model:{value:e.imageNamed,callback:function(t){e.imageNamed=t},expression:"imageNamed"}},[a("template",{slot:"prepend"},[e._v("镜像名称:")])],2)],1),a("el-col",{attrs:{span:11,offset:2}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small"},model:{value:e.imageVersioned,callback:function(t){e.imageVersioned=t},expression:"imageVersioned"}},[a("template",{slot:"prepend"},[e._v("镜像版本:")])],2)],1)],1),a("el-row",[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 目标仓库 ")])]),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"16px"}},[a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small"},model:{value:e.repositoryDired,callback:function(t){e.repositoryDired=t},expression:"repositoryDired"}},[a("template",{slot:"prepend"},[e._v("仓库名称:")])],2)],1)],1),a("el-row",[a("h3",{staticClass:"size"},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 所属类别 ")])]),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"16px"}},[e.imageProcessList[e.processIndex].imageCatalog?e._e():a("el-col",{attrs:{span:11}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.catalog,callback:function(t){e.catalog=t},expression:"catalog"}},[a("el-option",{attrs:{label:"城市路网提取",value:"城市路网提取"}}),a("el-option",{attrs:{label:"水稻长势监测",value:"水稻长势监测"}}),a("el-option",{attrs:{label:"洪涝灾害监测",value:"洪涝灾害监测"}}),a("el-option",{attrs:{label:"基础设施识别",value:"基础设施识别"}}),a("el-option",{attrs:{label:"旱情监测",value:"旱情监测"}}),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),e.imageProcessList[e.processIndex].imageCatalog?a("el-col",{attrs:{span:11}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",size:"small"},model:{value:e.imageProcessList[e.processIndex].imageCatalog,callback:function(t){e.$set(e.imageProcessList[e.processIndex],"imageCatalog",t)},expression:"imageProcessList[processIndex].imageCatalog"}},[a("template",{slot:"prepend"},[e._v("类别名称:")])],2)],1):e._e(),a("el-col",{attrs:{span:3,offset:2}},[e.imageProcessList[e.processIndex].step3?e._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.imagePush}},[e._v("推送")])],1),a("el-col",{attrs:{span:3,offset:1}},[e.imageProcessList[e.processIndex].step3logs?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showLogs}},[e._v("日志")]):e._e()],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showlogs&&e.imageProcessList[e.processIndex].step3logs,expression:"showlogs && imageProcessList[processIndex].step3logs"}],staticStyle:{"margin-top":"10px"}},[a("pre",{directives:[{name:"highlight",rawName:"v-highlight"}],staticStyle:{height:"250px",overflow:"auto",padding:"0px"}},[e._v("                "),a("code",{staticClass:"python",staticStyle:{"font-size":"16px","background-color":"#20211d",height:"100%"},attrs:{id:"statusLog",code:e.imageProcessList[e.processIndex].step3logs}}),e._v("\n              ")])])]:e._e()],2)],1)],1)],1)},pa=[],da={name:"CreateImage",data(){return{catalog:"",showlogs:!1,repositoryDir:"",imageName:"",path:"",createDialogVisible:!1,newImageName:"",showSteps:"",activeIndex:0,processIndex:0}},computed:{...(0,c.rn)("ImageProcess",["imageProcessList"]),...(0,c.rn)("CreateJob",["data","imageCatalogList","warehouseList"]),imageVersion(){var e=new Date;return"v"+(e.getMonth()+1)+e.getHours()+e.getMinutes()+e.getSeconds()},imageNameAndVersion(){return this.imageName+":"+this.imageVersion},imageNamed(){return this.imageProcessList[this.processIndex].step1.split(":")[0]},imageVersioned(){return this.imageProcessList[this.processIndex].step1.split(":")[1]},repositoryDired(){return 1==this.imageProcessList[this.processIndex].parentCatalog?"private":"public"},logs(){return this.imageProcessList[this.processIndex].step3logs}},methods:{async imagePush(){if(this.catalog){let e=b.Loading.service({fullscreen:!0,text:"请勿刷新页面或关闭浏览器..."}),t=await(0,r.at)({id:this.showSteps,filepath:this.imageProcessList[this.processIndex].path,imageTag:"abcsys.cn:5000/"+this.repositoryDir+"/"+this.imageProcessList[this.processIndex].step1,imageCatalog:this.catalog,parentCatalog:"public"==this.repositoryDir?0:1});200==t.code&&(this.$store.dispatch("ImageProcess/getImageProcessList"),e.close(),this.$message({type:"success",message:"推送成功"}))}else this.$message.error("请选择镜像所属的分类")},showLogs(){this.showlogs=!this.showlogs,this.initLogs()},initLogs(){if(null!=this.imageProcessList[this.processIndex].step3logs){this.imageProcessList[this.processIndex].step3logs.replace(/\n/g,"<br/>"),console.log(this.imageProcessList[this.processIndex].step3logs);var e=document.getElementById("statusLog");e.innerHTML=this.imageProcessList[this.processIndex].step3logs}else{e=document.getElementById("statusLog");e.innerHTML=null}},async TagImage(){if(""==this.repositoryDir)this.$message({type:"warning",message:"请选择镜像仓库"});else{let e=b.Loading.service({fullscreen:!0,text:"请勿刷新页面或关闭浏览器..."}),t=await(0,r.T3)({id:this.showSteps,filepath:this.imageProcessList[this.processIndex].path,imageNameAndVersion:this.imageProcessList[this.processIndex].step1,imageTag:"abcsys.cn:5000/"+this.repositoryDir+"/"+this.imageProcessList[this.processIndex].step1,parentCatalog:"public"==this.repositoryDir?0:1});"200"==t.code?(e.close(),this.$message({type:"success",message:"操作成功"}),this.$store.dispatch("ImageProcess/getImageProcessList"),this.activeIndex=3,this.getWareHouseList()):(this.$message.error(t.message),e.close())}},async getWareHouseList(){let e=await(0,r.qu)();if(1==e.success){this.$store.dispatch("CreateJob/getQueueList",e.rows);let t=await(0,r.ei)(e.rows[0].clusterId);if("200"==t.code){this.$store.dispatch("CreateJob/getWareHouseList",t.data);let e=await(0,r.Cp)(t.data[0].warehouseId);"200"==e.code&&this.$store.dispatch("CreateJob/getWareHouseImageList",e.data)}}},async buildImage(){let e=!0;if(""==this.path?(e=!1,this.$message({type:"warning",message:"请选择文件路径"})):""==this.imageName?(e=!1,this.$message({type:"warning",message:"请输入镜像名称"})):""==this.imageVersion&&(e=!1,this.$message({type:"warning",message:"请输入镜像版本"})),e){let e=b.Loading.service({fullscreen:!0,text:"请勿刷新页面或关闭浏览器..."}),t=await(0,r.kr)({id:this.showSteps,filepath:this.path,imageNameAndVersion:this.imageNameAndVersion});"200"==t.code?(e.close(),this.$message({type:"success",message:"构建成功"}),this.$store.dispatch("ImageProcess/getImageProcessList"),this.activeIndex=2,this.getWareHouseList(),this.imageVersion="",this.imageName="",this.path=""):(this.$message.error(t.message),e.close())}},updatePath(e,t,a){this.path=e.catalog,this.imageName=e.name.toLowerCase()},async getDataSet(){let e=await(0,r.iM)(1);200==e.code&&this.$store.dispatch("CreateJob/getDataSet",e.data)},editImageProcess(e){this.showSteps=this.imageProcessList[e].id,this.processIndex=e,this.handleActiveIndex(this.imageProcessList[e]),this.getDataSet(),this.getWareHouseList(),this.showlogs=!1},async deleteImageProcess(e){let t=await(0,r.WZ)(e);200==t.code?(this.$message({type:"success",message:"删除成功"}),this.showSteps==e&&(this.showSteps="",this.processIndex=0,this.showlogs=!1,this.activeIndex=0),this.$store.dispatch("ImageProcess/getImageProcessList")):this.$message.error("删除失败")},async createNewImageProcess(){if(""==this.newImageName)this.$message.error("流程名不能为空");else{let e=await(0,r.Ar)(this.newImageName);if("200"==e.code){this.createDialogVisible=!1,this.$message({type:"success",message:"新建成功"}),this.$store.dispatch("ImageProcess/getImageProcessList");let t=this;e.data.forEach(((e,a)=>{e.name==t.newImageName&&(t.showSteps=e.id,t.processIndex=a)})),this.handleActiveIndex(e.data[this.processIndex]),this.newImageName=""}else this.$message.error(e.message)}},handleActiveIndex(e){e.step1?e.step1&&!e.step2?this.activeIndex=2:this.activeIndex=3:this.activeIndex=1},handleClose(e){let t=this;this.$confirm("确认关闭？").then((a=>{t.createDialogVisible=!1,t.newImageName="",e()})).catch((e=>{}))}},mounted(){this.$store.dispatch("ImageProcess/getImageProcessList")}},ma=da,ha=(0,m.Z)(ma,ca,pa,!1,null,"32604848",null),ua=ha.exports,ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[e._v("作业模板")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{staticStyle:{"font-size":"16px"},attrs:{data:e.JobTemplates,"highlight-current-row":"","max-height":"600"}},[a("el-table-column",{attrs:{property:"templateId",label:"模板ID"}}),a("el-table-column",{attrs:{property:"tvcJobCnName",label:"模板名称"}}),a("el-table-column",{attrs:{property:"priorityClassName",label:"优先级"}}),a("el-table-column",{attrs:{label:"备注","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["道路提取"==t.row.tvcJobCnName?a("span",{staticClass:"size"},[e._v("针对孟买地区卫星影像开展道路提取工作")]):e._e(),"洪涝监测"==t.row.tvcJobCnName?a("span",{staticClass:"size"},[e._v("针对孟加拉国地区卫星影像开展洪涝监测工作")]):e._e(),"干旱监测"==t.row.tvcJobCnName?a("span",{staticClass:"size"},[e._v("针对哈萨克斯坦地区卫星影像开展干旱监测工作")]):e._e(),"水稻长势监测"==t.row.tvcJobCnName?a("span",{staticClass:"size"},[e._v("针对缅甸地区卫星影像开展水稻长势监测工作")]):e._e(),"土地利用分类"==t.row.tvcJobCnName?a("span",{staticClass:"size"},[e._v("针对瓜德尔港地区卫星影像开展土地利用分类工作")]):e._e(),"可视化模板"==t.row.tvcJobCnName?a("span",{staticClass:"size"},[e._v("雷达回波外推的可视化模版")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.createJob(t.row.templateId)}}},[e._v("创建作业")]),28!=t.row.templateId&&36!=t.row.templateId&&32!=t.row.templateId&&38!=t.row.templateId&&34!=t.row.templateId&&39!=t.row.templateId?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteTemplate(t.row)}}},[e._v("删除")]):e._e(),28==t.row.templateId||36==t.row.templateId||32==t.row.templateId||38==t.row.templateId||34==t.row.templateId||39==t.row.templateId?a("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"}},[e._v("系统预置")]):e._e()]}}])})],1)],1)],1)],1)},fa=[],ba={name:"Template",data(){return{}},computed:{...(0,c.rn)("Template",["JobTemplates"])},methods:{createJob(e){this.$store.dispatch("Template/getJobTemplate",{templateId:e}),this.$store.dispatch("Template/getTaskTemplate",{templateId:e}),this.$router.push({name:"standardjob",query:{templateId:e}})},async deleteTemplate(e){let t=await(0,r.cR)({clusterId:e.clusterId,templateId:e.templateId});200==t.code?(this.$message({type:"success",message:t.message}),this.$store.dispatch("Template/getJobTemplates",null)):this.$message.error("删除失败")}},mounted(){this.$store.dispatch("Template/getJobTemplates",null)}},va=ba,wa=(0,m.Z)(va,ga,fa,!1,null,"70fb4ccb",null),_a=wa.exports,ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"10px"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("数据集管理")]),a("el-breadcrumb-item",[e._v("数据文件")])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)","margin-top":"10px",overflow:"auto"},attrs:{"body-style":{padding:"10px"}}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px","margin-top":"3px"}},[a("span",{staticClass:"size",staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 数据文件列表 ")])])],1),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"20px"}},[a("span",{staticClass:"size",staticStyle:{float:"left",height:"32px","line-height":"32px","margin-left":"10px"}},[e._v("当前路径：")]),a("el-breadcrumb",{attrs:{separator:">"}},e._l(e.path,(function(t,s){return a("el-breadcrumb-item",{key:s},[a("el-tag",{staticClass:"taghover",on:{click:function(t){return e.toPath(s)}}},[e._v(e._s(t))])],1)})),1)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{ref:"table",staticClass:"size",staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.Data,"max-height":"620"}},[a("el-table-column",{attrs:{prop:"fileName",label:"文件名","show-overflow-tooltip":"",width:"600"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:1}},[1==t.row.is_dir?a("i",{staticClass:"el-icon-folder"}):e._e(),1!=t.row.is_dir?a("i",{staticClass:"el-icon-document"}):e._e()]),a("el-col",{attrs:{span:22,offset:1}},[a("span",{staticStyle:{"margin-left":"5px",cursor:"pointer"},on:{click:function(a){return e.openDir(t.row)}}},[e._v(e._s(t.row.name))])])],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"modified",label:"修改时间",width:"320"}}),a("el-table-column",{attrs:{label:"大小","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["0B"==t.row.size?a("span",[e._v("-")]):e._e(),"0B"!=t.row.size?a("span",[e._v(e._s(t.row.size))]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",icon:"el-icon-download",size:"small"},on:{click:function(a){return e.download(t.row)}}},[e._v("下载")])]}}])})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"prev, pager, next,sizes",total:Number(e.TotalCount)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)],1)],1)],1)},xa=[],Ia=a(53706),Sa=a(37767),ka=a.n(Sa);const Pa=(e,t)=>{console.log("同步下载打包开始时间："+new Date);const a=streamSaver.createWriteStream(e),s=t.values(),i=new ZIP({async pull(e){const t=s.next();if(!t.done){const{name:a,url:s}=t.value;return fetch(s).then((t=>{e.enqueue({name:a,stream:()=>t.body})}))}e.close()}});window.WritableStream&&i.pipeTo&&i.pipeTo(a).then((()=>console.log("同步下载打包结束时间："+new Date)))};var Ca={name:"DataBaseManager",data(){return{pageSize:10,path:["/"],accessPath:"",basePath:"",baseSecret:"",downloadFileList:[]}},computed:{...(0,c.rn)("DataAccess",["DataAccess","Data","TotalCount"]),dirpath(){let e="";return this.path.forEach((t=>{"/"!=t&&(e+=t+"/")})),this.path.length>=1?e:""}},methods:{packageImages(){var e=["https://lhy980916.vip:80/d/%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/%E5%85%AC%E5%BC%80/%E5%B9%B2%E6%97%B1%E7%BB%93%E6%9E%9C%E5%9B%BE/%E6%96%B0%E7%96%86/2018-7.png","https://lhy980916.vip:80/d/%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98/%E5%85%AC%E5%BC%80/Kubernetes/%E8%A7%86%E9%A2%91/55-%E5%B0%9A%E7%A1%85%E8%B0%B7-Kubernetes%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E7%9B%91%E6%8E%A7-%E6%90%AD%E5%BB%BA%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0.mp4"],t=[];const a=new(ka());a.folder("qrCode");for(let s of e){let e=this.getFile(s).then((({data:e})=>{let t=this.getFileName(s);a.file(t,e,{binary:!0})}));t.push(e)}Promise.all(t).then((()=>{Object.keys(a.files).length>0?a.generateAsync({type:"blob"}).then((e=>{(0,Ia.saveAs)(e,"file.zip"),console.log("批量下载成功")})):console.log("下载全部失败")}))},getFileName(e){var t=e.lastIndexOf("/");return-1!=t?e.substring(t+1,e.length).toLowerCase():""},getFile(e){return new Promise(((t,a)=>{Ae()({url:e,method:"GET",responseType:"blob"}).then((e=>{t(e)})).catch((e=>{a(e.toString())}))}))},toPath(e){1!=this.path.length&&(this.path.splice(e+1,this.path.length-e-1),this.regPathSecret(),this.pageSize=10,this.pagenationReq(1,this.pageSize,this.basePath+this.dirpath))},handleCurrentChange(e){this.pagenationReq(e,this.pageSize,this.basePath+this.dirpath)},handleSizeChange(e){this.pageSize=e,this.pagenationReq(1,e,this.basePath+this.dirpath)},openDir(e){1==e.is_dir&&(this.path.push(e.name),this.regPathSecret(),this.pageSize=10,this.pagenationReq(1,this.pageSize,this.basePath+this.dirpath))},regPathSecret(){this.basePath+this.dirpath==this.accessPath.pathtwo?this.baseSecret=this.DataAccess.pathTwo:this.basePath+this.dirpath==this.accessPath.paththree?this.baseSecret=this.DataAccess.pathThree:this.basePath+this.dirpath==this.accessPath.pathfour?this.baseSecret=this.DataAccess.pathFour:this.basePath+this.dirpath==this.accessPath.pathfive?this.baseSecret=this.DataAccess.pathFive:this.basePath+this.dirpath==this.accessPath.pathsix?this.baseSecret=this.DataAccess.pathSix:this.basePath+this.dirpath==this.accessPath.pathone&&(this.baseSecret=this.DataAccess.pathOne)},async getFileList(e){let t=this.baseSecret;this.basePath+this.dirpath+e==this.accessPath.pathtwo?t=this.DataAccess.pathTwo:this.basePath+this.dirpath+e==this.accessPath.paththree?t=this.DataAccess.pathThree:this.basePath+this.dirpath+e==this.accessPath.pathfour?t=this.DataAccess.pathFour:this.basePath+this.dirpath+e==this.accessPath.pathfive?t=this.DataAccess.pathFive:this.basePath+this.dirpath+e==this.accessPath.pathsix?t=this.DataAccess.pathSix:this.basePath+this.dirpath+e==this.accessPath.pathone&&(t=this.DataAccess.pathOne);let a=await(0,r.Wd)({path:this.basePath+this.dirpath+e,password:t,page:1,per_page:0,refresh:!1});if(200==a.code){0==a.data.content.length&&this.downloadFileList.push({name:e,url:""});for(let t=0;t<a.data.content.length;t++)1==a.data.content[t].is_dir?this.getFileList(e+a.data.content[t].name+"/"):this.downloadFileList.push({name:e+a.data.content[t].name,url:"https://lhy980916.vip:80/d/阿里云盘/公开/"+this.basePath+this.dirpath+e+a.data.content[t].name+"?sign="+a.data.content[t].sign})}},download(e){if(this.downloadFileList=[],1==e.is_dir){let t=e.name+".zip";this.getFileList(e.name+"/");let a=this;setTimeout((()=>{Pa(t,a.downloadFileList)}),4e3)}else window.open("https://lhy980916.vip:80/d/阿里云盘/公开/"+this.basePath+this.dirpath+e.name+"?sign="+e.sign)},pagenationReq(e,t,a){this.$store.dispatch("DataAccess/getData",{path:a||this.basePath,password:this.baseSecret,page:e,per_page:t,refresh:!1})}},async mounted(){let e=await(0,r.ZY)();200==e.code&&this.$store.dispatch("DataAccess/getUserInfoDataAccessLevel",e.data);let t=await(0,r.GS)();if(200==t.code){switch(this.accessPath=t.data,this.DataAccess.level){case 1:this.basePath=this.accessPath.pathone,this.baseSecret=this.DataAccess.pathOne;break;case 2:this.basePath=this.accessPath.pathtwo,this.baseSecret=this.DataAccess.pathTwo;break;case 3:this.basePath=this.accessPath.paththree,this.baseSecret=this.DataAccess.pathThree;break;case 4:this.basePath=this.accessPath.pathfour,this.baseSecret=this.DataAccess.pathFour;break;case 5:this.basePath=this.accessPath.pathfive,this.baseSecret=this.DataAccess.pathFive;break;case 6:this.basePath=this.accessPath.pathsix,this.baseSecret=this.DataAccess.pathSix;break}this.pagenationReq(1,10,this.basePath)}}},La=Ca,Na=(0,m.Z)(La,ya,xa,!1,null,"6673c691",null),Ta=Na.exports,za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("数据集管理")]),a("el-breadcrumb-item",[e._v("地区视图")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("h1",[e._v("1.按地区搜索卫星图像")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticClass:"view_search"},[a("table",{staticStyle:{background:"#999",width:"100%"}},[a("tr",[a("td",{staticClass:"title"},[e._v("地名")]),a("td",[a("el-input",{attrs:{placeholder:"请输入地名"},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}})],1)]),a("tr",[a("td",{staticStyle:{background:"#eec","text-align":"center",padding:"0.2em"},attrs:{colspan:"2"}},[a("el-button",{on:{click:function(t){return e.search(1,0,e.area)}}},[e._v("提交")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)])])])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("h1",[e._v("2.按准确地区搜卫星图像")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticClass:"view_search"},[a("table",{staticStyle:{background:"#999",width:"100%"}},[a("tr",[a("th",{staticClass:"title",attrs:{colspan:"10"}},[e._v("地名")])]),a("tr",{staticStyle:{"text-align":"center"}},e._l(10,(function(t){return a("td",{key:t,staticStyle:{background:"#def","font-weight":"bold",padding:"0.2em 0.4em","font-size":"0.8rem"},on:{click:function(a){return e.search(1,1,e.areaList[t-1])}}},[e._v(" "+e._s(e.areaList[t-1])+" ")])})),0),a("tr",{staticStyle:{"text-align":"center"}},[e._l(2,(function(t){return a("td",{key:t,staticStyle:{background:"white","font-weight":"bold",padding:"0.2em 0.4em","font-size":"0.8rem"},on:{click:function(a){return e.search(1,1,e.areaList[10+t-1])}}},[e._v(" "+e._s(e.areaList[10+t-1])+" ")])})),e._l(8,(function(e){return a("td",{key:e,staticStyle:{background:"white","font-weight":"bold",padding:"0.2em 0.4em","font-size":"0.8rem"}})}))],2)])])])],1)],1)},Da=[],Ea={data(){return{area:"",areaList:["青岛港","上海港","舟山港","深圳港","广州港","瓜德尔港","孟买","加尔各答","缅甸","哈萨克斯坦","高雄港","新德里"]}},methods:{reset(){this.area=""},search(e,t,a){localStorage.setItem("content",a),localStorage.setItem("type",e),localStorage.setItem("flag",t),this.$router.push("/satelitedata")}}},Fa=Ea,$a=(0,m.Z)(Fa,za,Da,!1,null,"6c1d9dfc",null),Oa=$a.exports,Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("数据集管理")]),a("el-breadcrumb-item",[e._v("日期视图")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("h1",[e._v("1.按日期搜索卫星图像")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticClass:"view_search"},[a("table",{staticStyle:{background:"#999",width:"100%"}},[a("tr",[a("th",{staticClass:"title"},[e._v("年")]),a("th",{staticClass:"title"},[e._v("月")]),a("th",{staticClass:"title"},[e._v("日")])]),a("tr",[a("th",[a("el-select",{attrs:{placeholder:"请选择年"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},e._l(e.yearList,(function(e){return a("el-option",{key:e,attrs:{label:e+"年",value:e}})})),1)],1),a("th",[a("el-select",{attrs:{placeholder:"请选择月"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(e.monthList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("th",[a("el-select",{attrs:{placeholder:"请选择日"},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}},e._l(e.dayList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),a("tr",[a("td",{staticClass:"BFITEM",staticStyle:{background:"#eec","text-align":"center",padding:"0.2em"},attrs:{colspan:"5"}},[a("el-button",{on:{click:function(t){return e.search(0,0)}}},[e._v("提交")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)])])])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("h1",[e._v("2.按具体年份搜索卫星")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticClass:"view_search"},[a("table",{staticStyle:{background:"#999",width:"100%"}},[a("tr",[a("th",{staticClass:"title",attrs:{colspan:"10"}},[e._v("时间")])]),e._l(7,(function(t,s){return a("tr",{key:t,staticStyle:{"text-align":"center"}},[e._l(10,(function(t){return a("td",{directives:[{name:"show",rawName:"v-show",value:s%2==0,expression:"index % 2 == 0"}],key:t,staticStyle:{background:"#def","font-weight":"bold",padding:"0.2em 0.4em","font-size":"0.8rem"},on:{click:function(a){return e.search(0,1,t+1950+10*s)}}},[e._v(" "+e._s(t+1950+10*s)+"年 ")])})),e._l(10,(function(t){return a("td",{directives:[{name:"show",rawName:"v-show",value:s%2==1,expression:"index % 2 == 1"}],key:t,staticStyle:{background:"white","font-weight":"bold",padding:"0.2em 0.4em","font-size":"0.8rem"},on:{click:function(a){return e.search(0,1,t+1950+10*s)}}},[e._v(" "+e._s(t+1950+10*s)+"年 ")])}))],2)})),a("tr",{staticStyle:{"text-align":"center",background:"white","font-weight":"bold",padding:"0.2em 0.4em","font-size":"0.8rem"}},[a("td",{on:{click:function(t){return e.search(0,1,2021)}}},[e._v("2021年")]),a("td",{on:{click:function(t){return e.search(0,1,2022)}}},[e._v("2022年")]),a("td",{on:{click:function(t){return e.search(0,1,2023)}}},[e._v("2023年")]),a("td"),a("td"),a("td"),a("td"),a("td"),a("td"),a("td")])],2)])])],1)],1)},Aa=[],Ra={data(){return{year:"",yearList:[2023,2022,2021,2020,2019,2018,2017,2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006,2005,2004,2003,2002,2001,2e3],month:"",monthList:[1,2,3,4,5,6,7,8,9,10,11,12],day:"",dayList:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]}},methods:{reset(){this.year="",this.month="",this.day=""},search(e,t,a){if(a)localStorage.setItem("content",a);else{let e=this.formatDate(this.year,this.month,this.day);localStorage.setItem("content",e)}localStorage.setItem("type",e),localStorage.setItem("flag",t),this.$router.push("/satelitedata")},formatDate(e,t,a){t=t<10?"0"+t:t,a=a<10?"0"+a:a;var s=e+"-"+t+"-"+a;if(isNaN(e)||"0"===t||"0"===a)throw this.$notify({title:"警告",message:"年份月份和天不能为空，如果选择日期，必须提供年月日",type:"warning"}),new Error("年份月份和天不能为空，如果选择日期，必须提供年月日");return s}}},Ja=Ra,Va=(0,m.Z)(Ja,Ma,Aa,!1,null,"3ad2eb91",null),qa=Va.exports,Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("数据集管理")]),a("el-breadcrumb-item",[e._v("卫星视图")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("h1",[e._v("1.按卫星搜索卫星图像")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticClass:"view_search"},[a("table",{staticStyle:{background:"#999",width:"100%"}},[a("tr",[a("td",{staticClass:"title"},[e._v("卫星")]),a("td",[a("el-input",{attrs:{placeholder:"请输入卫星"},model:{value:e.satellite,callback:function(t){e.satellite=t},expression:"satellite"}})],1)]),a("tr",[a("td",{staticStyle:{background:"#eec","text-align":"center",padding:"0.2em"},attrs:{colspan:"2"}},[a("el-button",{on:{click:function(t){return e.search(2,0,e.satellite)}}},[e._v("提交")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)])])])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("h1",[e._v("2.按准确地卫星搜索卫星图像")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticClass:"view_search"},[a("table",{staticStyle:{background:"#999",width:"100%"}},[a("tr",[a("th",{staticClass:"title",attrs:{colspan:"10"}},[e._v("卫星")])]),a("tr",{staticStyle:{"text-align":"center"}},e._l(e.satelliteList,(function(t){return a("td",{key:t,staticStyle:{background:"#def","font-weight":"bold",padding:"0.2em 0.4em","font-size":"0.8rem"},on:{click:function(a){return e.search(2,1,t)}}},[e._v(" "+e._s(t)+" ")])})),0)])])])],1)],1)},ja=[],Ga={data(){return{satellite:"",satelliteList:["GF1","GF2","GF3","GF4","GF5","GF6","ZY3"]}},methods:{reset(){this.satellite=""},search(e,t,a){localStorage.setItem("content",a),localStorage.setItem("type",e),localStorage.setItem("flag",t),this.$router.push("/satelitedata")}}},Ua=Ga,Ha=(0,m.Z)(Ua,Ba,ja,!1,null,"6a4e7f06",null),Wa=Ha.exports,Za=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("数据集管理")]),a("el-breadcrumb-item",[e._v("结果列表")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("h1",{staticStyle:{"margin-bottom":"20px"}},[e._v("查询结果")])]),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"max-height":"600px",data:e.dataList}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id"}}),a("el-table-column",{attrs:{label:"名称",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.detail(t.row.id)}}},[e._v("详情 ")]),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-download"},on:{click:function(a){return e.download(t.row.url)}}},[e._v("下载 ")])]}}])})],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticStyle:{"text-align":"center"},attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),a("el-dialog",{attrs:{title:"详细信息",visible:e.dialog,width:"600px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialog=t}}},[a("el-descriptions",{staticClass:"margin-top",attrs:{size:"",column:2,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),e._v(" 卫星型号 ")]),e._v(" "+e._s(e.data.satelliteID)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-cpu"}),e._v(" 传感器 ")]),e._v(" "+e._s(e.data.sensorID)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-timer"}),e._v(" 时间 ")]),e._v(" "+e._s(e.data.produceTime)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-location-outline"}),e._v(" 地域 ")]),e._v(" "+e._s(e.data.area)+" ")],2)],1),a("el-card",{staticStyle:{"margin-top":"20px"}},[a("el-image",{attrs:{src:e.data.url}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialog=!1}}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")])],1)],1)],1)],1)},Ka=[],Qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,"pager-count":e.pagerCount,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},Xa=[];Math.easeInOutQuad=function(e,t,a,s){return e/=s/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var Ya=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function es(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function ts(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function as(e,t,a){const s=ts(),i=e-s,l=20;let o=0;t="undefined"===typeof t?500:t;var n=function(){o+=l;var e=Math.easeInOutQuad(o,s,i,t);es(e),o<t?Ya(n):a&&"function"===typeof a&&a()};n()}var ss={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default(){return[10,20,30,50]}},pagerCount:{type:Number,default:document.body.clientWidth<992?5:7},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},data(){return{}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange(e){this.currentPage*e>this.total&&(this.currentPage=1),this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&as(0,800)},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&as(0,800)}}},is=ss,ls=(0,m.Z)(is,Qa,Xa,!1,null,"4df39335",null),os=ls.exports,ns={components:{pagination:os},data(){return{sysURL:a(5453),queryParams:{pageNum:1,pageSize:10,content:void 0,type:void 0,flag:void 0},total:0,loading:!1,dataList:[],data:{},dialog:!1,fullscreenLoading:!1}},created(){this.queryParams.content=localStorage.getItem("content"),this.queryParams.type=localStorage.getItem("type"),this.queryParams.flag=localStorage.getItem("flag"),this.getList()},methods:{async getList(){this.loading=!0,await(0,r.EO)(this.queryParams).then((e=>{this.dataList=e.data.rows,this.total=e.data.total,this.loading=!1}))},download(e){window.open(this.sysURL.IPAddress.satelite+e)},async detail(e){const t=this.$loading({lock:!0,text:"准备获取数据中，请稍候",spinner:"el-icon-loading"});await(0,r.J6)(e).then((e=>{t.close(),this.data=e.data.data,this.dialog=!0}))}}},rs=ns,cs=(0,m.Z)(rs,Za,Ka,!1,null,"e5504e8e",null),ps=cs.exports,ds=[{name:"satelitedata",path:"/satelitedata",component:ps,meta:{show:!0,requireAuth:!0}},{name:"satelite",path:"/satelite",component:Wa,meta:{show:!0,requireAuth:!0}},{name:"date",path:"/date",component:qa,meta:{show:!0,requireAuth:!0}},{name:"area",path:"/area",component:Oa,meta:{show:!0,requireAuth:!0}},{name:"login",path:"/login",component:M,meta:{show:!1}},{name:"userinfo",path:"/userinfo",component:Mt,meta:{show:!0,requireAuth:!0}},{name:"database",path:"/database",component:Ta,meta:{show:!0,requireAuth:!0}},{name:"template",path:"/template",component:_a,meta:{show:!0,requireAuth:!0}},{name:"createimage",path:"/createimage",component:ua,meta:{show:!0,requireAuth:!0}},{name:"dataview",path:"/dataview",component:Kt,meta:{show:!0,requireAuth:!0}},{name:"resultview",path:"/resultview",component:aa,meta:{show:!0,requireAuth:!0}},{name:"processview",path:"/processview",component:ra,meta:{show:!0,requireAuth:!0}},{name:"standardjob",path:"/standardjob/:templateId?",component:pt,meta:{show:!0,requireAuth:!0}},{name:"ide",path:"/ide",component:zt,meta:{show:!0,requireAuth:!0}},{name:"jobInfo",path:"/jobinfo/:index",component:xt,meta:{show:!0,requireAuth:!0}},{name:"job",path:"/job",component:Ue,meta:{show:!0,requireAuth:!0}},{name:"images",path:"/images",component:it,meta:{show:!0,requireAuth:!0}},{name:"data",path:"/data",component:Xe,meta:{show:!0,requireAuth:!0}},{name:"resultdata",path:"/resultdata",component:ft,meta:{show:!0,requireAuth:!0}},{path:"/*",redirect:"/login"}];s["default"].use(Oe.Z);let ms=Oe.Z.prototype.push;Oe.Z.prototype.push=function(e,t,a){t&&a?ms.call(this,e,t,a):ms.call(this,e,(()=>{}),(()=>{}))};let hs=Oe.Z.prototype.Replace;Oe.Z.prototype.Replace=function(e,t,a){t&&a?hs.call(this,e,t,a):hs.call(this,e,(()=>{}),(()=>{}))};var us=new Oe.Z({routes:ds,scrollBehavior(e,t,a){return{y:0}}}),gs=a(85550),fs=(a(41514),a(47075));function bs(e){(e.mixins||[]).forEach((e=>{if(e.props&&e.props.placement){const t=e.props.placement.default;e.data=new Proxy(e.data,{apply(e,a,s){const i=Reflect.apply(e,a,s);return{...i||{},placement:t}}}),delete e.props.placement}e.mixins&&e.mixins.length>0&&bs(e)}))}bs(v().DatePicker),bs(v().TimePicker),bs(v().TimeSelect),s["default"].use(fs.ZP),s["default"].directive("highlight",(function(e){let t=e.querySelectorAll("pre code");t.forEach((e=>{gs.Z.highlightBlock(e)}))})),s["default"].use(Oe.Z),s["default"].use(v()),s["default"].use(Re.Z,Ae()),v().Dialog.props.closeOnClickModal.default=!1,s["default"].prototype.$echarts=Je,us.beforeEach(((e,t,a)=>{e.meta.requireAuth&&(localStorage.getItem("token")?a():a({path:"/login",query:{redirect:e.fullPath}})),"login"===e.name&&localStorage.getItem("token")&&a({path:"/job"}),a()})),s["default"].config.productionTip=!1,new s["default"]({render:e=>e(V),router:us,store:$e,beforeCreate(){s["default"].prototype.$bus=this}}).$mount("#app")},32101:function(e,t,a){"use strict";a.d(t,{m:function(){return s}});const s=function(e){var t=new Date(e).toJSON();return new Date(+new Date(t)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}},83630:function(e,t,a){"use strict";e.exports=a.p+"img/log.bca7a89a.svg"},57570:function(e,t,a){"use strict";e.exports=a.p+"img/titleicon.6f632fe7.jpg"},99224:function(e,t,a){"use strict";e.exports=a.p+"img/2018-1.99967678.png"},90366:function(e,t,a){"use strict";e.exports=a.p+"img/2018-1.5878687b.png"},27180:function(e,t,a){"use strict";e.exports=a.p+"img/guadeer.ddcfe955.png"},24759:function(e,t,a){"use strict";e.exports=a.p+"img/mengjialaguo_after.cac556ef.png"},45740:function(e,t,a){"use strict";e.exports=a.p+"img/mengjialaguo_before.a94fd2dc.png"},42480:function(){},24654:function(){},5453:function(e){"use strict";e.exports=JSON.parse('{"IPAddress":{"mapbox":"http://10.33.112.2:8082/","ide":"http://10.33.112.2:92/","bocloud":"http://10.33.112.2:91/","userInfo":"http://10.33.112.2:81/","satelite":"http://10.33.112.2:81/satelite","remotesatelite":"https://data.cresda.cn/#/mapSearch?time="}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdO={}}(),function(){var e=[];__webpack_require__.O=function(t,a,s,i){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],i=e[c][2];for(var o=!0,n=0;n<a.length;n++)(!1&i||l>=i)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](a[n])}))?a.splice(n--,1):(o=!1,i<l&&(l=i));if(o){e.splice(c--,1);var r=s();void 0!==r&&(t=r)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,s,i]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.p="/"}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,l=a[0],o=a[1],n=a[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(s in o)__webpack_require__.o(o,s)&&(__webpack_require__.m[s]=o[s]);if(n)var c=n(__webpack_require__)}for(t&&t(a);r<l.length;r++)i=l[r],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(c)},a=self["webpackChunkCloudPlatform"]=self["webpackChunkCloudPlatform"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(9285)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();