(function(){var e={76879:function(e,t,a){"use strict";a(66992),a(88674),a(19601),a(17727),a(68309);var i=a(28935),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.$route.meta.show?a("el-container",{staticStyle:{height:"100%"}},[e.$route.meta.show?a("el-header",[a("Header")],1):e._e(),a("el-container",[e.$route.meta.show?a("el-aside",{attrs:{width:"200px"}},[a("SideBar")],1):e._e(),a("el-container",[a("el-main",[a("router-view")],1),e.$route.meta.show?a("el-footer",[a("Footer")],1):e._e()],1)],1)],1):e._e(),e.$route.meta.show?e._e():a("Login")],1)},n=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-menu",{attrs:{mode:"horizontal","background-color":"#ADB6CA","text-color":"black"}},[i("el-col",{attrs:{span:20}},[i("div",{staticStyle:{"text-align":"center",height:"60px"}},[i("img",{staticStyle:{height:"60px",width:"210px","margin-left":"10px",float:"left"},attrs:{src:a(57570)}}),i("span",{staticClass:"font"},[e._v("米级国产卫星数据存算共享云平台 ")])])]),i("el-col",{attrs:{span:1}},[i("div",{staticStyle:{"text-align":"center",height:"60px","font-size":"16px"}},[e._v(" "+e._s(e.username)+" ")])]),i("el-col",{staticStyle:{width:"100px"}},[i("el-submenu",{staticStyle:{padding:"0px"},attrs:{index:"1"}},[i("el-menu-item",{staticStyle:{padding:"0px"},attrs:{index:"1"},on:{click:function(t){e.passwordDialogVisible=!0}}},[i("i",{staticClass:"el-icon-edit",staticStyle:{color:"black"}},[e._v("修改密码")])]),i("template",{slot:"title"},[i("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1)],2)],1),i("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[i("el-menu-item",{staticClass:"size",staticStyle:{padding:"0px","font-size":"16px"},attrs:{index:"2"},on:{click:e.logout}},[e._v("Logout")])],1)],1),i("el-dialog",{staticClass:"dialogClass",attrs:{title:"修改密码",visible:e.passwordDialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.passwordDialogVisible=t}}},[i("el-form",{ref:"passwdForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{"label-position":"right","label-width":"100px",rules:e.passwdRules,model:e.passwd}},[i("el-row",[i("el-form-item",{attrs:{label:"当前密码",prop:"oldPassword"}},[i("el-input",{staticStyle:{width:"270px"},attrs:{placeholder:"请输入当前密码",size:"small","show-password":""},on:{blur:function(t){return e.verifyPasswd()}},model:{value:e.passwd.oldPassword,callback:function(t){e.$set(e.passwd,"oldPassword",t)},expression:"passwd.oldPassword"}})],1)],1),i("el-row",[i("el-form-item",{attrs:{label:"新密码",prop:"newPassword1"}},[i("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请输入新密码",size:"small"},model:{value:e.passwd.newPassword1,callback:function(t){e.$set(e.passwd,"newPassword1",t)},expression:"passwd.newPassword1"}})],1)],1),i("el-row",[i("el-form-item",{attrs:{label:"二次确认",prop:"newPassword2"}},[i("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请再次输入新密码",size:"small"},model:{value:e.passwd.newPassword2,callback:function(t){e.$set(e.passwd,"newPassword2",t)},expression:"passwd.newPassword2"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closePasswd()}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updatePasswd()}}},[e._v("确 定")])],1)],1)],1)},o=[],l=a(67906),c=a(16198),u=a(93019),p=(a(21703),a(41539),a(26166)),d=a.n(p),m=a(39879),f=a.n(m),h=d().create({baseURL:"/api",timeout:5e4});h.interceptors.request.use((function(e){return f().start(),e.headers["token"]=localStorage.getItem("token"),e.headers["refreshToken"]=localStorage.getItem("refreshToken"),e.headers["modelId"]=1,e.headers["systemId"]=1,e})),h.interceptors.response.use((function(e){return f().done(),e.data.token&&localStorage.setItem("token",e.data.token),201==e.data.code&&(localStorage.clear(),i["default"].$router.push({name:"login"})),e.data}),(function(e){return f().done(),Promise.reject(new Error("fail"))}));var g=h,w=d().create({baseURL:"/ide",timeout:5e4});w.interceptors.request.use((function(e){return f().start(),e})),w.interceptors.response.use((function(e){return f().done(),e.data.token&&localStorage.setItem("token",e.data.token),201==e.data.code&&(localStorage.clear(),vue.$router.push({name:"login"})),e.data}),(function(e){return f().done(),Promise.reject(new Error("fail"))}));var v=w,b=a(57421),x=a.n(b),_=function(e){var t=e.name,a=e.password;return v({url:"/node-manager/user/login",method:"POST",data:x().stringify({name:t,password:a})})},y=function(){return v({url:"/node-manager/workspace/start",method:"POST",withCredentials:!0})},I=function(){return v({url:"/node-manager/workspace/stop",method:"POST",withCredentials:!0})},k=function(){return v({url:"/node-manager/workspace",method:"POST",withCredentials:!0})},S=function(e){return g({url:"/paas-web/upmstreeapi/login",method:"POST",data:e})},C=function(e){return g({url:"/paas-web/upmstreeapi/accessToken",method:"get",params:{code:e}})},P=function(e){return g({url:"/paas-web/bocapi/volcano/v3.3/vcJob/list",method:"post",data:e})},N=function(e,t){return g({url:"/paas-web/bocapi/volcano/v3.3/vcJob/delete",method:"post",data:{clusterId:e,vcJobId:t}})},L=function(e,t,a){return g({url:"/paas-web/bocapi/dataBcc/list",method:"get",params:{type:e,self:t,isPlatform:a}})},F=function(e,t,a,i){return g({url:"/paas-web/bocapi/fileBcc/pageList",method:"get",params:{dataId:e,filePath:t,current:a,size:i}})},z=function(e,t,a,i){return g({url:"/paas-web/bocapi/dataBcc/add",method:"post",data:{name:e,remark:t,storageId:a,type:i}})},T=function(e){return g({url:"/paas-web/bocapi/dataBcc/".concat(e),method:"delete"})},Z=function(e,t,a,i,s){return g({url:"/paas-web/bocapi/dataBcc/update",method:"put",data:{id:e,name:t,remark:a,storageId:i,type:s}})},$=function(e,t,a,i){return g({url:"/paas-web/bocapi/fileBcc/rename",method:"get",params:{dataId:e,filePath:t,fileName:a,newName:i}})},E=function(e,t,a,i){return g({url:"/paas-web/bocapi/fileBcc/createFolder",method:"get",params:{dataId:e,filePath:t,folderName:a,desc:i}})},D=function(e,t,a,i){return g({url:"/paas-web/bocapi/fileBcc/download",method:"get",params:{fileName:e,dataId:t,filePath:a,fileType:1}})},J=function(e){return g({url:"/paas-web/bocapi/fileBcc/status",method:"get",params:{filePath:e}})},O=function(e,t,a){return g({url:"/paas-web/bocapi/fileBcc/deleteFiles",method:"post",data:{dataId:e,fileList:t,filePath:a}})},R=function(e,t,a,i,s,n,r,o){return g({url:"/paas-web/bocapi/fileBcc/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:{chunkNumber:"1",chunkSize:"2048000",currentChunkSize:e,totalSize:t,identifier:a,filename:i,relativePath:s,totalChunks:"1",filePath:n,rootPath:"/opt/bcc/storage1/",dataId:r,file:o}})},V=function(e,t,a,i,s,n){return g({url:"/paas-web/bocapi/image/v2.3/queryRegImageList",method:"post",data:{currPageNum:e,imageCatalogId:t,imageCatalogType:a,imageName:i,pageSize:s,warehouseId:n}})},A=function(e){return g({url:"/paas-web/bocapi/image/v2.3/queryRegImageVersionList",method:"post",data:{currPageNum:1,imageName:e,pageSize:1e3}})},j=function(e){return g({url:"/paas-web/bocapi/warehouse/v2.3/overview",method:"post",data:{envId:e||1}})},M=function(e,t,a,i,s,n){return g({url:"/paas-web/bocapi/volcano/v3.3/pod/info1",method:"post",data:{clusterId:e,currPageNum:t,nodeName:a,pageSize:i,podName:s,queueName:"default",vcJobName:n}})},U=function(e){return g({url:"/paas-web/bocapi/image/v2.3/queryRegImages",method:"post",data:{imageCatalogId:e}})},q=function(){return g({url:"/paas-web/bocapi/volcano/v3.3/queue/list",method:"post",data:{currPageNum:1,envId:1,pageSize:1e3}})},B=function(e){return g({url:"/paas-web/bocapi/warehouse/v2.3/getList",method:"post",data:{clusterId:e,envId:1,types:["Registry","Harbor","Artifactory"]}})},G=function(e){return g({url:"/paas-web/bocapi/imageCatalog/v3.0/list",method:"post",data:{envId:1,warehouseId:e,withPublic:!0}})},H=function(e){return g({url:"/paas-web/bocapi/image/v2.3/queryRegImageVersionList",method:"post",data:{imageName:e}})},W=function(e){return g({url:"/paas-web/bocapi/dataBcc/list",method:"get",params:{type:e,self:0}})},X=function(e){var t=e.target,a=e.vcJob,i=e.tasks;return g({url:"/paas-web/bocapi/volcano/v3.3/vcJob/create",method:"post",data:{target:t,vcJob:a,tasks:i}})},K=function(e,t){return g({url:"/paas-web/bocapi/volcano/v3.3/vcJob/start",method:"post",data:{clusterId:e,vcJobId:t}})},Q=function(e){return g({url:"/paas-web/upmstreeapi/login/password",method:"get",params:{oldPassword:e}})},Y=function(e){return g({url:"/paas-web/upmstreeapi/login/password",method:"PUT",data:e})},ee=function(e){return g({url:"/paas-web/upmstreeapi/core/account",method:"put",data:e})},te=a(34665),ae={name:"Header",data:function(){var e=this,t=function(t,a,i){return""===e.passwd.newPassword2?i(new Error("请再次输入密码")):e.passwd.newPassword2!=e.passwd.newPassword1?i(new Error("两次输入密码不一致!")):i()};return{passwordDialogVisible:!1,passwd:{oldPassword:"",newPassword1:"",newPassword2:""},passwdRules:{oldPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword1:[{required:!0,message:"请输入新密码",trigger:"blur"}],newPassword2:[{required:!0,validator:t,trigger:"change"}]}}},computed:(0,u.Z)((0,u.Z)({},(0,te.rn)("User",["userInfo"])),{},{username:function(){return localStorage.getItem("user")}}),methods:{logout:function(){localStorage.clear(),this.$router.push({name:"login"})},verifyPasswd:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var i,s;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=a(79719).Base64,""==e.passwd.oldPassword){t.next=6;break}return t.next=4,Q(i.encode(e.passwd.oldPassword));case 4:s=t.sent,!0!==s.data&&(e.$message.error("原密码错误!"),e.passwd.oldPassword="");case 6:case"end":return t.stop()}}),t)})))()},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(a){t.passwd.oldPassword="",t.passwd.newPassword1="",t.passwd.newPassword2="",e()})).catch((function(e){}))},closePasswd:function(){this.passwordDialogVisible=!1,this.passwd.oldPassword="",this.passwd.newPassword1="",this.passwd.newPassword2=""},updatePasswd:function(){var e=this;this.passwordDialogVisible=!1;var t=this;this.$refs["passwdForm"].validate(function(){var i=(0,c.Z)((0,l.Z)().mark((function i(s){var n;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s){i.next=4;break}return i.abrupt("return",!1);case 4:return n=a(79719).Base64,i.next=7,Y({password:n.encode(e.passwd.newPassword1),oldPassword:n.encode(e.passwd.oldPassword),id:e.userInfo.id});case 7:i.sent,t.logout();case 9:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}}},ie=ae,se=a(1001),ne=(0,se.Z)(ie,r,o,!1,null,null,null),re=ne.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("el-menu",{attrs:{"default-active":"1-1"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-cpu"}),a("span",{staticClass:"size"},[e._v("我的作业")])]),a("el-menu-item",{attrs:{index:"1-1"},on:{click:function(t){return e.toJob()}}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("作业列表")])]),a("el-menu-item",{attrs:{index:"1-2"},on:{click:function(t){return e.goStandardJob()}}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("新建作业")])])],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-takeaway-box"}),a("span",{staticClass:"size"},[e._v("模型管理")])]),a("el-menu-item",{attrs:{index:"2-1"},on:{click:e.toData}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("训练模型")])]),a("el-menu-item",{attrs:{index:"2-2"},on:{click:e.toResultData}},[a("span",{staticClass:"subsize",attrs:{slot:"title"},slot:"title"},[e._v("测试模型")])])],2),a("div",{on:{click:e.toImages}},[a("el-menu-item",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-copy-document"}),a("span",{staticClass:"size"},[e._v("镜像仓库")])])],2)],1),a("div",{on:{click:e.toIDE}},[a("el-menu-item",{attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-edit-outline"}),a("span",{staticClass:"size"},[e._v("在线IDE")])])],2)],1),a("div",{on:{click:e.toUserInfo}},[a("el-menu-item",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user"}),a("span",{staticClass:"size"},[e._v("个人中心")])])],2)],1)],1)],1)],1)},le=[],ce=a(74549),ue=a.n(ce),pe={name:"SideBar",data:function(){return{}},methods:{toJob:function(){this.$router.push({name:"job"})},goStandardJob:function(){this.$router.push({name:"standardjob"})},toData:function(){this.$router.push({name:"data"})},toResultData:function(){this.$router.push({name:"resultdata"})},toImages:function(){this.$router.push({name:"images"})},toIDE:function(){this.$router.push({name:"ide"})},toUserInfo:function(){this.$router.push({name:"userinfo"})}}},de=pe,me=(0,se.Z)(de,oe,le,!1,null,"dfb788b8",null),fe=me.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center","font-size":"16px"}},[e._v(" Copyright©2022 南京信息工程大学 ")])},ge=[],we={name:"Footer",data:function(){return{}},methods:{}},ve=we,be=(0,se.Z)(ve,he,ge,!1,null,"5ded1e22",null),xe=be.exports,_e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-menu",{attrs:{mode:"horizontal","background-color":"#ADB6CA","text-color":"black"}},[i("el-col",{attrs:{span:20}},[i("div",{staticStyle:{"text-align":"center",height:"60px"}},[i("img",{staticStyle:{height:"60px",width:"210px","margin-left":"10px",float:"left"},attrs:{src:a(57570)}}),i("div",{staticClass:"font",staticStyle:{"padding-top":"13px"}},[e._v(" 米级国产卫星数据存算共享云平台 ")])])])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"forms-container"},[i("div",{staticClass:"signin-signup"},[i("form",{staticClass:"sign-in-form",attrs:{action:"#"}},[i("h2",{staticClass:"title"},[e._v("登录")]),i("div",{staticClass:"input-field"},[i("i",{staticClass:"fas fa-user"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}})]),i("div",{staticClass:"input-field"},[i("i",{staticClass:"fas fa-lock"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),i("div",{ref:"dragDiv",staticClass:"drag"},[i("div",{staticClass:"drag_bg"}),i("div",{staticClass:"drag_text"},[e._v(e._s(e.confirmWords))]),i("div",{ref:"moveDiv",staticClass:"handler handler_bg",class:{handler_ok_bg:e.confirmSuccess},staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{mousedown:function(t){return e.mousedownFn(t)}}})]),i("input",{staticClass:"btn solid",attrs:{type:"submit",value:"立即登录"},on:{click:e.doLogin}})])])]),e._m(0)]),e._m(1)],1)},ye=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panels-container"},[i("div",{staticClass:"panel left-panel"},[i("div",{staticClass:"content"},[i("h3",[e._v("欢迎使用")]),i("h5",{staticStyle:{"margin-top":"10px","font-size":"16px"}},[e._v(" 米级国产卫星数据存算共享云平台 ")])]),i("img",{staticClass:"image",attrs:{src:a(83630),alt:""}})])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center","font-size":"16px",height:"60px","background-color":"#b6c0cf"}},[a("p",{staticStyle:{"padding-top":"22px"}},[e._v("Copyright©2022 南京信息工程大学")])])}],Ie={name:"Login",data:function(){return{user:{username:"",password:""},beginClientX:0,mouseMoveStata:!1,maxwidth:"",confirmWords:"拖动滑块验证",confirmSuccess:!1}},computed:(0,u.Z)({},(0,te.rn)("User",["userInfo"])),methods:{doLogin:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var i,s,n,r;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!=e.confirmSuccess){t.next=21;break}if(i=a(79719).Base64,localStorage.getItem("token")){t.next=18;break}return s={userName:e.user.username,password:i.encode(e.user.password),typeConfigId:0,clientId:"be2030fc2aa0416d8c9dcaa5081fb1ad"},t.next=6,S(s);case 6:if(n=t.sent,"200"!=n.code){t.next=15;break}return e.$store.dispatch("User/getUserInfo",n.data),t.next=11,C(n.data.code);case 11:r=t.sent,"200"==r.code&&(e.$store.dispatch("User/getUserToken",{token:r.data.token,refreshToken:r.data.refreshToken}),e.$message({message:"登陆成功",type:"success"}),localStorage.setItem("user",e.user.username),e.$router.push({name:"job"})),t.next=16;break;case 15:e.$message.error("登录失败");case 16:t.next=19;break;case 18:e.$router.push({name:"job"});case 19:t.next=22;break;case 21:e.$message.warning("请先滑动验证!");case 22:case"end":return t.stop()}}),t)})))()},mousedownFn:function(e){this.confirmSuccess||(e.preventDefault&&e.preventDefault(),this.mouseMoveStata=!0,this.beginClientX=e.clientX)},successFunction:function(){this.confirmSuccess=!0,this.confirmWords="验证通过",window.addEventListener?(document.getElementsByTagName("html")[0].removeEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].removeEventListener("mouseup",this.moseUpFn)):document.getElementsByTagName("html")[0].removeEventListener("mouseup",(function(){})),document.getElementsByClassName("drag_text")[0].style.color="#fff",document.getElementsByClassName("handler")[0].style.left=this.maxwidth+"px",document.getElementsByClassName("drag_bg")[0].style.width=this.maxwidth+"px"},mouseMoveFn:function(e){if(this.mouseMoveStata){var t=e.clientX-this.beginClientX;t>0&&t<=this.maxwidth?(document.getElementsByClassName("handler")[0].style.left=t+"px",document.getElementsByClassName("drag_bg")[0].style.width=t+"px"):t>this.maxwidth&&this.successFunction()}},moseUpFn:function(e){this.mouseMoveStata=!1;var t=e.clientX-this.beginClientX;t<this.maxwidth&&(document.getElementsByClassName("handler")[0].style.left="0px",document.getElementsByClassName("drag_bg")[0].style.width="0px")}},mounted:function(){this.maxwidth=this.$refs.dragDiv.clientWidth-this.$refs.moveDiv.clientWidth,document.getElementsByTagName("html")[0].addEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].addEventListener("mouseup",this.moseUpFn)}},ke=Ie,Se=(0,se.Z)(ke,_e,ye,!1,null,"602e2a7e",null),Ce=Se.exports,Pe={name:"App",components:{Header:re,SideBar:fe,Footer:xe,Login:Ce},mounted:function(){}},Ne=Pe,Le=(0,se.Z)(Ne,s,n,!1,null,"67ffb6eb",null),Fe=Le.exports,ze={getJobList:function(e,t){return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.commit,a.next=3,P(t);case 3:s=a.sent,!0===s.success&&(i("JOBLIST",s.rows),i("PAGENUM",s.currPageNum),i("PAGESIZE",s.pageSize),i("TOTALPAGE",s.pageCount));case 5:case"end":return a.stop()}}),a)})))()},getJobInfoList:function(e,t){var a=e.commit,i=t.currPageNum,s=t.pageCount,n=t.pageSize,r=t.jobInfoList;a("JOBINFOCURRENTPAGENUM",i),a("JOBINFOPAGECOUNT",s),a("JOBINFOPAGESIZE",n),a("JOBINFOLIST",r)}},Te={JOBLIST:function(e,t){e.joblist=t},PAGENUM:function(e,t){e.pagenum=t},PAGESIZE:function(e,t){e.pagesize=t},TOTALPAGE:function(e,t){e.totalpage=t},JOBINFOCURRENTPAGENUM:function(e,t){e.jobInfoCurrPageNum=t},JOBINFOPAGECOUNT:function(e,t){e.jobInfoPageCount=t},JOBINFOPAGESIZE:function(e,t){e.jobInfoPageSize=t},JOBINFOLIST:function(e,t){e.jobInfoList=t}},Ze={jobInfoCurrPageNum:"",jobInfoPageCount:"",jobInfoPageSize:"",joblist:[],pagesize:"",pagenum:"",totalpage:"",jobInfoList:[]},$e={},Ee={namespaced:!0,actions:ze,mutations:Te,state:Ze,getters:$e},De={getParentFileList:function(e,t){var a=e.commit;a("PARENTFILELIST",t)},getChildFileList:function(e,t){return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.commit,a.next=3,F(t.dataId,t.filePath,t.current,t.size);case 3:s=a.sent,200==s.code&&(i("PAGENUM",s.data.current),i("FILEPATH",s.data.filePath),i("CHILDFILELIST",s.data.fileList),i("PAGESIZE",s.data.size),i("TOATLRECORD",s.data.total));case 5:case"end":return a.stop()}}),a)})))()}},Je={PARENTFILELIST:function(e,t){e.parentFileList=t},PAGENUM:function(e,t){e.pageNum=t},FILEPATH:function(e,t){e.filePath=t},CHILDFILELIST:function(e,t){e.childFileList=t},PAGESIZE:function(e,t){e.pageSize=t},TOATLRECORD:function(e,t){e.totalRecord=t}},Oe={parentFileList:[],childFileList:[],pageNum:"",filePath:"",pageSize:"",totalRecord:""},Re={},Ve={namespaced:!0,actions:De,mutations:Je,state:Oe,getters:Re},Ae={getParentFileList:function(e,t){var a=e.commit;a("PARENTFILELIST",t)},getChildFileList:function(e,t){return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.commit,a.next=3,F(t.dataId,t.filePath,t.current,t.size);case 3:s=a.sent,200==s.code&&(i("PAGENUM",s.data.current),i("FILEPATH",s.data.filePath),i("CHILDFILELIST",s.data.fileList),i("PAGESIZE",s.data.size),i("TOATLRECORD",s.data.total));case 5:case"end":return a.stop()}}),a)})))()}},je={PARENTFILELIST:function(e,t){e.parentFileList=t},PAGENUM:function(e,t){e.pageNum=t},FILEPATH:function(e,t){e.filePath=t},CHILDFILELIST:function(e,t){e.childFileList=t},PAGESIZE:function(e,t){e.pageSize=t},TOATLRECORD:function(e,t){e.totalRecord=t}},Me={parentFileList:[],childFileList:[],pageNum:"",filePath:"",pageSize:"",totalRecord:""},Ue={},qe={namespaced:!0,actions:Ae,mutations:je,state:Me,getters:Ue},Be=(a(38862),{getUserInfo:function(e,t){return(0,c.Z)((0,l.Z)().mark((function a(){var i;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.commit,localStorage.setItem("userInfo",JSON.stringify(t)),i("USERINFO",t);case 3:case"end":return a.stop()}}),a)})))()},getUserToken:function(e,t){return(0,c.Z)((0,l.Z)().mark((function a(){var i,s,n;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.commit,s=t.token,n=t.refreshToken,i("REFRESHTOKEN",n),i("TOKEN",s),localStorage.setItem("refreshToken",n),localStorage.setItem("token",s);case 6:case"end":return a.stop()}}),a)})))()}}),Ge={USERINFO:function(e,t){e.userInfo=t},REFRESHTOKEN:function(e,t){e.refreshToken=t},TOKEN:function(e,t){e.token=t}},He={userInfo:{},refreshToken:"",token:""},We={},Xe={namespaced:!0,actions:Be,mutations:Ge,state:He,getters:We},Ke={getImageOverview:function(e,t){var a=e.commit,i=t.warehouseId,s=t.warehouseName,n=t.imageCatalogs;a("WAREHOUSEID",i),a("WAREHOUSENAME",s),a("IMAGECATALOGS",n)},getImageList:function(e,t){var a=e.commit,i=t.imageList,s=t.totalCount,n=t.currPageNum;a("IMAGELIST",i),a("TOTALCOUNT",s),a("CURRPAGENUM",n)},getImageVersionList:function(e,t){var a=e.commit;a("IMAGEVERSIONLIST",t)}},Qe={WAREHOUSEID:function(e,t){e.warehouseId=t},WAREHOUSENAME:function(e,t){e.warehouseName=t},IMAGECATALOGS:function(e,t){e.imageCatalogs=t},IMAGELIST:function(e,t){e.imageList=t},TOTALCOUNT:function(e,t){e.totalCount=t},CURRPAGENUM:function(e,t){e.currPageNum=t},IMAGEVERSIONLIST:function(e,t){e.imageVersionList=t}},Ye={warehouseId:0,warehouseName:"",imageCatalogs:[],imageList:[],pageSize:10,totalCount:"",imageVersionList:[]},et={},tt={namespaced:!0,actions:Ke,mutations:Qe,state:Ye,getters:et},at={getQueueList:function(e,t){var a=e.commit;a("QUEUELIST",t)},getWareHouseList:function(e,t){var a=e.commit;a("WAREHOUSELIST",t)},getWareHouseImageList:function(e,t){var a=e.commit;a("IMAGECATALODLIST",t)},getImage:function(e,t){var a=e.commit;a("IMAGELIST",t)},getImageVersion:function(e,t){var a=e.commit;a("IMAGEVERSIONLIST",t)},getDataSet:function(e,t){var a=e.commit;a("DATA",t)}},it={DATA:function(e,t){e.data=t},QUEUELIST:function(e,t){e.queueList=t},WAREHOUSELIST:function(e,t){e.warehouseList=t},IMAGECATALODLIST:function(e,t){e.imageCatalogList=t},IMAGELIST:function(e,t){e.imageList=t},IMAGEVERSIONLIST:function(e,t){e.imageVersionList=t}},st={queueList:[],warehouseList:[],imageCatalogList:[{catalogId:0},{catalogId:0}],imageList:[],imageVersionList:[],data:[]},nt={},rt={namespaced:!0,actions:at,mutations:it,state:st,getters:nt};i["default"].use(te.ZP);var ot=new te.ZP.Store({modules:{Job:Ee,File:Ve,User:Xe,Image:tt,ResultFile:qe,CreateJob:rt}}),lt=a(12809),ct=a(59483),ut=a(8522),pt=(a(16733),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[e._v("作业列表")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticClass:"el-icon-circle-plus-outline",staticStyle:{"margin-top":"10px","margin-left":"10px","padding-right":"8px","padding-top":"8px","padding-bottom":"8px","padding-left":"8px"},attrs:{size:"mini",type:"primary"},on:{click:e.toCreateJob}},[e._v("新建作业")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"10px","margin-left":"10px"},attrs:{"row-style":{height:"40px"},"cell-style":{padding:"0px"},data:e.formatedJobList,border:!0,"row-class-name":e.tableRowClassName,"max-height":"700"}},[a("el-table-column",{attrs:{prop:"vcJobCnName",label:"任务名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.toJobInfo(t.$index)}}},[e._v(e._s(t.row.vcJobCnName))])]}}])}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskTotal",label:"总任务数",width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskCompleted",label:"运行完成数",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskPending",label:"排队中",width:"80","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"cpuUsed",label:"cpu使用量",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"memUsed",label:"内存使用量",width:"120"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["Terminated"==t.row.status?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v("已终止")]):e._e(),"Pending"==t.row.status?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("排队中")]):e._e(),"Completed"==t.row.status?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("已完成")]):e._e(),"No_Running"==t.row.status?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("未开始")]):e._e(),"Running"==t.row.status?a("el-tag",{attrs:{size:"small"}},[e._v("运行中")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["No_Running"==t.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.startJob(t.row.clusterId,t.row.vcJobId)}}},[e._v("启动")]):e._e(),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteJob(t.row.clusterId,t.row.vcJobId)}}},[e._v("删除")])]}}])})],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":e.page,layout:"prev, pager, next,sizes","page-count":Number(e.totalpage)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)}),dt=[],mt=(a(74916),a(23123),a(83753),a(15306),function(e){var t=new Date(e).toJSON();return new Date(+new Date(t)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}),ft={name:"Job",data:function(){return{secondBread:"标准作业",page:8}},computed:(0,u.Z)((0,u.Z)({},(0,te.rn)("Job",["joblist","pagesize","pagenum","totalpage"])),{},{formatedJobList:function(){for(var e=this.joblist,t=0;t<e.length;t++)e[t].startTime=mt(e[t].startTime),e[t].endTime=mt(e[t].endTime),e[t].createTime=mt(e[t].createTime),"1970-01-01 08:00:00"==mt(e[t].startTime)&&(e[t].startTime=""),"1970-01-01 08:00:00"==mt(e[t].endTime)&&(e[t].endTime="");return e}}),methods:{startJob:function(e,t){var a=this;return(0,c.Z)((0,l.Z)().mark((function i(){var s;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,K(e,t);case 2:s=i.sent,"200"==s.code?(a.$message({message:s.message,type:"success"}),a.handleCurrentChange(a.pagenum)):a.$message.error(s.message);case 4:case"end":return i.stop()}}),i)})))()},toJobInfo:function(e){this.$router.push("/jobinfo/"+e)},toCreateJob:function(){this.$router.push({name:"standardjob"})},deleteJob:function(e,t){var a=this;return(0,c.Z)((0,l.Z)().mark((function i(){var s;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,N(e,t);case 2:s=i.sent,"200"==s.code?(a.$message({message:s.message,type:"success"}),a.handleCurrentChange(a.pagenum)):a.$message.error(s.message);case 4:case"end":return i.stop()}}),i)})))()},tableRowClassName:function(e){var t=e.rowIndex;return"Completed"===this.joblist[t].status?"success-row":parseInt(this.joblist[t].cpuUsed.split("C")[0])>=5||parseInt(this.joblist[t].memUsed.split("G")[0])>=10?"warning-row":""},handleCurrentChange:function(e){this.$store.dispatch("Job/getJobList",{envId:1,status:null,templateId:null,vcJobType:"batch",currPageNum:e,pageSize:this.page})},handleSizeChange:function(e){this.page=e,this.handleCurrentChange(1)}},mounted:function(){this.handleCurrentChange(1)}},ht=ft,gt=(0,se.Z)(ht,pt,dt,!1,null,"dcb93886",null),wt=gt.exports,vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("模型管理")]),a("el-breadcrumb-item",[e._v("训练模型")])],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"left-card",attrs:{"body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"12px"},attrs:{span:16}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 训练模型列表 ")])]),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-top":"10px","padding-right":"5px","padding-top":"5px","padding-bottom":"5px","padding-left":"3px"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:function(t){e.parentFileDialogVisible=!0}}},[e._v("新建")])],1)],1)],1),a("el-dialog",{attrs:{title:"新建训练模型",visible:e.parentFileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的训练模型名称",size:"small"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createParentFile}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-table",{staticClass:"size",staticStyle:{width:"100%","margin-top":"10px"},attrs:{"highlight-current-row":"","show-header":!1,"max-height":"600","row-style":{height:"0px"},"cell-style":{padding:"0px"},data:e.parentFileList}},[a("el-table-column",{attrs:{prop:"name",label:"文件名",align:"left","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"parentIcon",on:{click:function(a){return e.updateChileFileList(t.row.id,e.pageNum,null,t.row.name)}}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"right",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-edit-outline parentIcon",on:{click:function(a){return e.updateParentFileNameDialogVisible(t.row)}}})]),a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-delete parentIcon",staticStyle:{"margin-left":"10px"},on:{click:function(a){return e.deleteParentFile(t.row.id)}}})])],1)]}}])})],1),a("el-dialog",{attrs:{title:"重命名数据集",visible:e.parentFileNameDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileNameDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入重命名的数据集名称",size:"small"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileNameDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updateParentFileName()}}},[e._v("确 定")])],1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)","margin-top":"10px","margin-left":"10px",overflow:"auto"},attrs:{"body-style":{padding:"0px"}}},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px","margin-top":"3px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 训练模型文件列表 ")])]),a("el-col",{attrs:{span:20}},[e.parentFileName?a("h3",{staticClass:"size"},[e._v(" 当前训练模型: "),a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.parentFileName))])],1):e._e()])],1),a("el-row",{staticStyle:{"margin-top":"10px","margin-left":"10px","font-size":"20px"}},[a("el-input",{staticStyle:{width:"99%"},attrs:{disabled:"",size:"small"},model:{value:e.dirpath,callback:function(t){e.dirpath=t},expression:"dirpath"}},[a("template",{slot:"prepend"},[e._v("当前路径:")])],2)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-d-arrow-left",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-folder-add",size:"small"},on:{click:function(t){e.fileDialogVisible=!0}}},[e._v("新建文件夹")])],1),a("el-dialog",{attrs:{title:"新建文件夹",visible:e.fileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.fileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的文件名",size:"small"},model:{value:e.newDirName,callback:function(t){e.newDirName=t},expression:"newDirName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.fileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.newDir}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-dropdown",{staticStyle:{"margin-top":"10px","margin-left":"10px"},on:{command:e.handleUpload}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload"}},[e._v(" 上传 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"uploadFile"}},[e._v("上传文件")]),a("el-dropdown-item",{attrs:{command:"uploadFiles"}},[e._v("上传文件夹")])],1)],1)],1),a("el-dialog",{attrs:{title:"上传",visible:e.uploadDialogVisible,width:"433px","before-close":e.handleClose},on:{"update:visible":function(t){e.uploadDialogVisible=t}}},[a("el-progress",{staticStyle:{width:"380px","margin-top":"8px","margin-left":"15px","margin-bottom":"10px"},attrs:{percentage:e.progressPercent}}),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:3,offset:17}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.submitUpload}},[e._v("上 传")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:e.close}},[e._v("关 闭")])],1)],1),a("el-upload",{ref:"upload",staticStyle:{"margin-left":"15px"},attrs:{drag:"",action:"","http-request":e.uploadFile,multiple:"","auto-upload":!1}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.deleteFiles}},[e._v("删除选中")])],1)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{ref:"table",staticClass:"size",staticStyle:{width:"100%"},attrs:{data:e.childFileList,"max-height":"560"},on:{"select-all":e.selectTableAll,select:e.selectFile}},[a("el-table-column",{attrs:{width:"80",type:"selection"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:1}},[1==t.row.fileType?a("i",{staticClass:"el-icon-folder"}):e._e(),1!=t.row.fileType?a("i",{staticClass:"el-icon-document"}):e._e()]),a("el-col",{attrs:{span:22,offset:1}},[e.isShow[t.$index]?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{"margin-left":"5px"},attrs:{size:"mini",placeholder:t.row.fileName},on:{blur:function(a){return e.updatename(t.$index,t.row)},focus:function(a){e.oldname=t.row.fileName}},model:{value:t.row.fileName,callback:function(a){e.$set(t.row,"fileName",a)},expression:"scope.row.fileName"}}):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isShow[t.$index],expression:"!isShow[scope.$index]"}],staticStyle:{"margin-left":"5px"},on:{click:function(a){return e.openDir(t.row)}}},[e._v(e._s(t.row.fileName))])],1)],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"modifyTime",label:"修改时间",width:"300"}}),a("el-table-column",{attrs:{prop:"fileSize",label:"大小","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.changeIsShow(t.$index)}}},[e._v("重命名")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.deleteFile(t.row.fileName)}}},[e._v("删除")])]}}])})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":e.page,layout:"prev, pager, next,sizes",total:Number(e.totalRecord)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)],1)],1)],1)},bt=[],xt=(a(54747),a(40561),a(26699),a(32023),{name:"Data",data:function(){return{progressPercent:0,dataSetName:"",page:10,isShow:[],parentId:"",path:[],checkedfile:[],fileDialogVisible:!1,uploadDialogVisible:!1,parentFileDialogVisible:!1,parentFileNameDialogVisible:!1,newDirName:"",oldname:"",parentFileName:"",newParentFileName:"",newParentFileId:""}},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},computed:(0,u.Z)((0,u.Z)({},(0,te.rn)("File",["parentFileList","childFileList","pageNum","filePath","totalRecord"])),{},{dirpath:function(){var e="";return this.path.forEach((function(t){e=e+"/"+t})),e}}),methods:{updateChileFileList:function(e,t,a,i){this.path=[],this.parentId=e,this.parentFileName=i,this.updateFileList(e,t,a)},updateParentFileNameDialogVisible:function(e){this.parentFileNameDialogVisible=!0,this.newParentFileName=e.name,this.newParentFileId=e.id},updateParentFileName:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Z(e.newParentFileId,e.newParentFileName,"",6,1);case 2:a=t.sent,"200"==a.code?(e.$message({type:"success",message:"更新成功"}),e.parentFileNameDialogVisible=!1,e.updateParentFileList(),e.newParentFileName=""):e.$message.error("更新失败");case 4:case"end":return t.stop()}}),t)})))()},deleteParentFile:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return alert("是否确认删除?"),a.next=3,T(e);case 3:i=a.sent,"200"==i.code?(t.$message({type:"success",message:"删除成功"}),t.updateParentFileList()):t.$message.error(i.data);case 5:case"end":return a.stop()}}),a)})))()},createParentFile:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z(e.newParentFileName,"",6,1);case 2:a=t.sent,"200"==a.code?(e.parentFileDialogVisible=!1,e.$message({type:"success",message:"新建成功"}),e.updateParentFileList(),e.newParentFileName=""):e.$message.error("新建失败");case 4:case"end":return t.stop()}}),t)})))()},changeIsShow:function(e){var t=!this.isShow[e];this.isShow.splice(e,1,t)},initShow:function(){if(null!=this.childFileList)for(var e=0;e<this.childFileList.length;e++)this.isShow.push(!1)},previewFile:function(e){var t="http://127.0.0.1:8080/preview"+this.dirpath+"/"+e,i=a(79719).Base64;window.open("http://127.0.0.1:8012/onlinePreview?url="+encodeURIComponent(i.encode(t)))},deleteFiles:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O(e.parentId,e.checkedfile,e.dirpath);case 2:a=t.sent,"200"==a.code&&e.$message({type:"success",message:"删除成功"}),e.updateFileList(e.parentId,e.pageNum,e.dirpath),e.checkedfile=[];case 6:case"end":return t.stop()}}),t)})))()},deleteFile:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=[],i.push(e),a.next=4,O(t.parentId,i,t.dirpath);case 4:s=a.sent,"200"==s.code&&t.$message({type:"success",message:"删除成功"}),t.updateFileList(t.parentId,t.pageNum,t.dirpath);case 7:case"end":return a.stop()}}),a)})))()},close:function(){this.uploadDialogVisible=!1,this.progressPercent=0,this.updateFileList(this.parentId,this.pageNum,this.dirpath),this.$refs.upload.clearFiles()},uploadFile:function(e){this.progressPercent=0;var t=new FormData;t.append("file",e.file);var a=e.file.size+"-"+e.file.name.substring(0,2)+e.file.name.split(".")[e.file.name.split(".").length-1],i=this;this.axios({url:"api/paas-web/bocapi/fileBcc/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:{chunkNumber:"1",chunkSize:"2048000",currentChunkSize:e.file.size,totalSize:e.file.size,identifier:a,filename:e.file.name,relativePath:e.file.webkitRelativePath,totalChunks:"1",filePath:this.dirpath,rootPath:"/opt/bcc/storage1/",dataId:this.parentId,file:e.file},onUploadProgress:function(e){i.progressPercent=Math.round(e.loaded/e.total*100)}})},submitUpload:function(){this.$refs.upload.submit()},handleUpload:function(e){var t=this;this.uploadDialogVisible=!0,"uploadFile"==e?this.$nextTick((function(){t.$refs.upload.$children[0].$refs.input.webkitdirectory=!1})):this.$nextTick((function(){t.$refs.upload.$children[0].$refs.input.webkitdirectory=!0}))},newDir:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,E(e.parentId,e.dirpath,e.newDirName,null);case 2:a=t.sent,"200"==a.code?(e.$message({type:"success",message:"新建成功"}),e.updateFileList(e.parentId,e.pageNum,e.dirpath)):e.$message.error("新建失败:文件名重复!"),e.fileDialogVisible=!1,e.newDirName="";case 6:case"end":return t.stop()}}),t)})))()},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){})),this.updateFileList(this.parentId,this.pageNum,this.dirpath)},selectTableAll:function(){var e=this;null!=this.childFileList&&(this.checkedfile.length>=this.childFileList.length?this.checkedfile=[]:(this.checkedfile=[],this.childFileList.forEach((function(t){e.checkedfile.push(t.fileName)}))))},selectFile:function(e,t){this.checkedfile.includes(t.fileName)?this.checkedfile.forEach((function(e,a,i){e==t.fileName&&i.splice(a,1)})):this.checkedfile.push(t.fileName),null!=this.childFileList&&this.checkedfile.length==this.childFileList.length?this.checkedall=!0:this.checkedall=!1},goBack:function(){this.path.pop(),this.updateFileList(this.parentId,1,this.dirpath)},openDir:function(e){1==e.fileType&&(this.path.push(e.fileName),this.updateFileList(this.parentId,1,this.dirpath))},updateFileList:function(e,t,a){null==e&&this.parentFileList.length>0&&(e=this.parentFileList[0].id,this.ParentFileName=this.parentFileList[0].fileName),this.$store.dispatch("File/getChildFileList",{dataId:e,filePath:a,current:t,size:this.page}),this.initShow()},updateParentFileList:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L(1,0,0);case 2:a=t.sent,"200"==a.code&&(e.$store.dispatch("File/getParentFileList",a.data),e.parentFileName=a.data[0].name),null!=e.parentFileList&&e.updateFileList(e.parentFileList[0].id,e.pageNum,null);case 5:case"end":return t.stop()}}),t)})))()},updatename:function(e,t){var a=this;return(0,c.Z)((0,l.Z)().mark((function i(){var s;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.changeIsShow(e),a.oldname==t.fileName){i.next=8;break}return i.next=4,$(a.parentId,a.dirpath,a.oldname,t.fileName);case 4:s=i.sent,"200"==s.code?a.$message({type:"success",message:"修改成功"}):a.$message.error("修改失败"),i.next=9;break;case 8:a.$message.warning("新名称与原名称相同");case 9:case"end":return i.stop()}}),i)})))()},handleCurrentChange:function(e){this.updateFileList(this.parentId,e,this.dirpath)},handleSizeChange:function(e){this.page=e,this.updateFileList(this.parentId,this.pageNum,this.dirpath)}},mounted:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L(1,0,0);case 2:a=t.sent,a.data.length>0&&(e.$store.dispatch("File/getParentFileList",a.data),e.parentFileName=a.data[0].name,"200"==a.code&&a.data.length>0&&e.$store.dispatch("File/getChildFileList",{dataId:a.data[0].id,filePath:null,current:1,size:e.page}),e.initShow(),e.parentId=a.data[0].id);case 4:case"end":return t.stop()}}),t)})))()}}),_t=xt,yt=(0,se.Z)(_t,vt,bt,!1,null,"3aa3d1f7",null),It=yt.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("镜像仓库")]),a("el-breadcrumb-item",[e._v("镜像管理")])],1)],1),a("el-card",{staticStyle:{height:"calc(100vh - 170px)","background-color":"#f0f1f3"},attrs:{"body-style":{padding:"0px"}}},[a("el-col",{staticStyle:{width:"320px"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-select",{staticClass:"size",staticStyle:{width:"300px","margin-left":"10px"},attrs:{placeholder:"请选择仓库"},on:{change:e.selectChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:"cluster-default-default"==e.value?"private":e.value,value:e.value}})})),1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticStyle:{height:"calc(100vh - 200px)",overflow:"auto"}},[e._l(e.imageCatalogs,(function(t,i){return a("div",{key:i,on:{click:function(t){return e.changeWareHouse(i)}}},[a("el-card",{staticStyle:{height:"200px",width:"300px","margin-top":"5px"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticStyle:{height:"200px",width:"100%"},attrs:{id:"publicImageCharts"+i}})])],1)})),a("el-card",{staticStyle:{height:"180px",width:"300px","margin-top":"5px"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("el-empty",{attrs:{description:"暂无更多","image-size":50}})],1)],2)])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("div",{staticStyle:{width:"100%"}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)","margin-left":"10px","overflow-y":"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:">"}},[a("el-breadcrumb-item",[e._v("镜像仓库")]),a("el-breadcrumb-item",[e._v("镜像管理")]),e.selected?a("el-breadcrumb-item",[e._v(e._s(e.selected))]):e._e()],1)],1)],1),e.selected&&0==e.isShow?a("el-row",[a("el-col",{staticStyle:{margin:"10px"},attrs:{span:4}},[a("el-input",{attrs:{size:"small",placeholder:"请输入镜像名称"},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}})],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:4}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.searchImageList()}}},[e._v("搜索")])],1)],1):e._e(),a("div",{staticStyle:{height:"calc(100vh - 300px)",width:"100%",overflow:"auto"}},[e.selected?e._e():a("el-result",{staticStyle:{"margin-top":"150px"},attrs:{icon:"info",title:"信息提示",subTitle:"点击左侧镜像仓库查看仓库详细信息"}}),e.showInfo?a("el-result",{staticStyle:{"margin-top":"150px"},attrs:{icon:"info",title:"信息提示",subTitle:"没有符合要求的镜像"}}):e._e(),e._l(e.imageList,(function(t,i){return e.selected?a("el-row",{key:i},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[e.showImages[i].head?a("el-card",{staticStyle:{"margin-top":"10px",height:"40px"},attrs:{"body-style":{padding:"0px"}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],staticClass:"circle",on:{click:function(a){return e.changeShowImages(i,t.imageName)}}},[a("i",{staticClass:"el-icon-arrow-right",staticStyle:{"margin-top":"5px","margin-left":"4px"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"circle",on:{click:function(t){return e.fixShowImages(i)}}},[a("i",{staticClass:"el-icon-arrow-down",staticStyle:{"margin-top":"4px","margin-left":"4px"}})]),a("span",{staticClass:"size",staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.imageName))])]):e._e()],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[a("el-row",[a("el-descriptions",{directives:[{name:"show",rawName:"v-show",value:e.showImages[i].body,expression:"showImages[index].body"}],staticStyle:{"margin-left":"30px"}},[a("el-descriptions-item",{attrs:{label:"镜像名称"}},[e._v(e._s(t.imageName))]),a("el-descriptions-item",{attrs:{label:"所属仓库"}},[e._v("default")]),a("el-descriptions-item",{attrs:{label:"仓库服务IP"}},[e._v("192.168.0.199")])],1),a("el-timeline",{directives:[{name:"show",rawName:"v-show",value:e.showImages[i].body,expression:"showImages[index].body"}],staticStyle:{"margin-left":"30px"}},e._l(e.activities,(function(t,i){return a("el-timeline-item",{key:i,attrs:{icon:t.icon,type:t.type,color:t.color,size:t.size,timestamp:t.timestamp}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-descriptions",{staticStyle:{"margin-top":"10px","margin-left":"10px"}},[a("el-descriptions-item",{attrs:{label:"版本号"}},[e._v(e._s(t.content))]),a("el-descriptions-item",{attrs:{label:"镜像大小"}},[e._v(e._s(t.fileSize))])],1)],1),a("el-col",{attrs:{span:4}})],1)],1)],1)})),1)],1)],1)],1):e._e()}))],2),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeIn","leave-active-class":"animate__animated animate__fadeOut"}},[e.selected&&0==e.isShow?a("el-row",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:Number(e.totalCount)},on:{"current-change":e.handleCurrentChange}})],1):e._e()],1)],1)],1)])],1)],1)},St=[],Ct=(a(34553),a(92222),a(56977),function(e){if(e<1024)return e+"B";if(e<1048576){var t=e/1024;return t=t.toFixed(2),t+"KB"}if(e<1073741824){t=e/1048576;return t=t.toFixed(2),t+"MB"}t=e/1073741824;return t=t.toFixed(2),t+"GB"}),Pt={name:"Images",data:function(){return{showInfo:!1,activities:[],isShow:!1,Image:[],title:[],options:[],selected:"",imageCatalogId:0,showImages:[],imageName:"",index:0}},computed:(0,u.Z)({},(0,te.rn)("Image",["warehouseId","warehouseName","imageCatalogs","imageList","totalCount","currPageNum"])),methods:{handleCurrentChange:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,V(e,t.imageCatalogs[t.index].catalogId,t.imageCatalogs[t.index].catalogType,null,10,t.warehouseId);case 2:if(i=a.sent,1==i.success&&null!=i.rows)for(t.showImages=[],t.$store.dispatch("Image/getImageList",{imageList:i.rows,totalCount:i.totalCount,currPageNum:i.currPageNum}),s=0;s<i.rows.length;s++)t.showImages.push({head:!0,body:!1});case 4:case"end":return a.stop()}}),a)})))()},fixShowImages:function(e){this.showInfo=!1,this.isShow=!this.isShow,this.activities=[];for(var t=0;t<this.showImages.length;t++)this.showImages[t].head=!0,this.showImages[t].body=!1},changeShowImages:function(e,t){var a=this;return(0,c.Z)((0,l.Z)().mark((function i(){var s,n,r,o,c;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.showInfo=!1,i.next=3,A(t);case 3:if(s=i.sent,1==s.success)for(a.$store.dispatch("Image/getImageVersionList",s.rows),n=0;n<s.rows.length;n++)r={content:"",fileSize:"",timestamp:"",size:"large",type:"primary",icon:"el-icon-star-on",color:"#0bbd87"},o={content:"",fileSize:"",timestamp:"",size:"large",type:"primary"},0==n?(r.content=s.rows[n].imageTag,r.timestamp=mt(s.rows[n].imageCreatetime),r.fileSize=Ct(s.rows[n].imageSize),a.activities.push(r)):(o.content=s.rows[n].imageTag,o.timestamp=mt(s.rows[n].imageCreatetime),o.fileSize=Ct(s.rows[n].imageSize),a.activities.push(o));for(a.isShow=!a.isShow,c=0;c<a.showImages.length;c++)c!=e&&(a.showImages[c].head=!1),c==e&&(a.showImages[c].body=!0);case 7:case"end":return i.stop()}}),i)})))()},selectChange:function(e){this.showInfo=!1,this.activities=[];var t=this.options.findIndex((function(t,a){return t.value==e}));this.changeWareHouse(t)},changeWareHouse:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.showInfo=!1,t.index=e,t.activities=[],t.selected=t.title[e].text,t.isShow=!1,a.next=7,V(1,t.imageCatalogs[e].catalogId,t.imageCatalogs[e].catalogType,null,10,t.warehouseId);case 7:if(i=a.sent,1==i.success&&null!=i.rows)for(t.showImages=[],t.$store.dispatch("Image/getImageList",{imageList:i.rows,totalCount:i.totalCount,currPageNum:i.currPageNum}),s=0;s<i.rows.length;s++)t.showImages.push({head:!0,body:!1});case 9:case"end":return a.stop()}}),a)})))()},searchImageList:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a,i;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V(1,e.imageCatalogs[e.index].catalogId,e.imageCatalogs[e.index].catalogType,e.imageName,10,e.warehouseId);case 2:if(a=t.sent,1==a.success){for(e.showImages=[],e.$store.dispatch("Image/getImageList",{imageList:a.rows,totalCount:a.totalCount,currPageNum:a.currPageNum}),i=0;i<a.rows.length;i++)e.showImages.push({head:!0,body:!1});0==a.rows.length?e.showInfo=!0:e.showInfo=!1,e.imageName=""}case 4:case"end":return t.stop()}}),t)})))()},initEcharts:function(e,t){var a={title:this.title[t],tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{right:"14%",top:"37%",orient:"vertical",selected:{"总   数":!1},selectedMode:!1,formatter:function(e){for(var t,i=a.series[0].data,s=0,n=0;n<i.length;n++)s+=i[n].value,i[n].name==e&&(t=i[n].value);var r=t;Math.round(t/s*100);return"".concat(e,":  ").concat(r)}},series:[{name:"详细",type:"pie",radius:[10,50],center:["25%","60%"],roseType:"radius",label:{show:!1},data:this.Image[t]}]};this.$echarts.init(e).setOption(a)}},mounted:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a,i,s,n,r;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j(1);case 2:if(a=t.sent,"200"==a.code&&e.$store.dispatch("Image/getImageOverview",{warehouseId:a.data.warehouseInfo[0].warehouseId,warehouseName:a.data.warehouseInfo[0].warehouseName,imageCatalogs:a.data.warehouseInfo[0].imageCatalogs}),null!=a.data.warehouseInfo[0].imageCatalogs)for(i=0;i<a.data.warehouseInfo[0].imageCatalogs.length;i++)s={value:""},n=[{value:0,name:"总   数"},{value:0,name:"已扫描"},{value:0,name:"扫描中"},{value:0,name:"未扫描"}],r={text:"",left:"center",top:"15px"},n[0].value=a.data.warehouseInfo[0].imageCatalogs[i].catalogOverview.total,n[1].value=a.data.warehouseInfo[0].imageCatalogs[i].catalogOverview.scanned,n[2].value=a.data.warehouseInfo[0].imageCatalogs[i].catalogOverview.scanning,n[3].value=a.data.warehouseInfo[0].imageCatalogs[i].catalogOverview.notScanned,s.value=a.data.warehouseInfo[0].imageCatalogs[i].envName,r.text=a.data.warehouseInfo[0].imageCatalogs[i].envName,"cluster-default-default"==r.text&&(r.text="private"),e.Image.push(n),e.options.push(s),e.title.push(r);e.$nextTick((function(){for(var t=0;t<e.Image.length;t++)e.initEcharts(document.getElementById("publicImageCharts"+t),t)}));case 6:case"end":return t.stop()}}),t)})))()}},Nt=Pt,Lt=(0,se.Z)(Nt,kt,St,!1,null,"42d46582",null),Ft=Lt.exports,zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[e._v("新建作业")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("h3",{staticClass:"size",staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 作业属性 ")])])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-form",{ref:"jobForm",staticStyle:{"min-width":"1000px",padding:"0px"},attrs:{"label-position":"right","label-width":"100px",model:e.vcJob,rules:e.vcJobRules}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{staticStyle:{"margin-left":"50px"},attrs:{label:"作业中文名",prop:"vcJobCnName"}},[a("el-col",[a("el-input",{staticStyle:{width:"340px","margin-left":"0px"},attrs:{size:"small",placeholder:"请输入作业中文名"},model:{value:e.vcJob.vcJobCnName,callback:function(t){e.$set(e.vcJob,"vcJobCnName",t)},expression:"vcJob.vcJobCnName"}})],1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"作业英文名",prop:"vcJobName"}},[a("el-col",[a("el-input",{staticStyle:{width:"340px"},attrs:{placeholder:"请输入作业英文名",size:"small"},model:{value:e.vcJob.vcJobName,callback:function(t){e.$set(e.vcJob,"vcJobName",t)},expression:"vcJob.vcJobName"}})],1)],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{"margin-top":"4px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.jobDialogVisible=!0}}},[e._v("高级配置")])],1)],1),a("el-dialog",{attrs:{title:"作业高级配置",visible:e.jobDialogVisible,width:"800px"},on:{"update:visible":function(t){e.jobDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"作业优先级",prop:"priorityClassName"}},[a("el-col",[a("el-select",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"请选择作业的优先级"},model:{value:e.vcJob.priorityClassName,callback:function(t){e.$set(e.vcJob,"priorityClassName",t)},expression:"vcJob.priorityClassName"}},[a("el-option",{attrs:{label:"高",value:"high-priority"}}),a("el-option",{attrs:{label:"中",value:"middle-priority"}}),a("el-option",{attrs:{label:"低",value:"low-priority"}})],1)],1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"所属集群"}},[a("el-col",[a("el-select",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:e.vcJob.queueName,callback:function(t){e.$set(e.vcJob,"queueName",t)},expression:"vcJob.queueName"}},[a("el-option",{attrs:{label:"default",value:"default"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"并行运行"}},[a("el-col",[a("el-switch",{model:{value:e.vcJob.parallelExecution,callback:function(t){e.$set(e.vcJob,"parallelExecution",t)},expression:"vcJob.parallelExecution"}})],1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"重启次数",prop:"maxRetry"}},[a("el-col",[a("el-input-number",{staticStyle:{width:"250px"},attrs:{size:"small",min:0,max:100},model:{value:e.vcJob.maxRetry,callback:function(t){e.$set(e.vcJob,"maxRetry",t)},expression:"vcJob.maxRetry"}})],1)],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("h3",{staticClass:"size",staticStyle:{"margin-top":"8px","margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 任务属性 ")])]),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getImage}},[e._v("添加")])],1)],1),a("el-table",{staticStyle:{width:"100%","margin-top":"10px","margin-left":"10px","font-size":"16px"},attrs:{"cell-style":{padding:"5px"},data:e.tasks,border:!0,"row-style":{height:"30px"},"max-height":"400px"}},[a("el-table-column",{attrs:{prop:"taskCnName",label:"任务中文名称"}}),a("el-table-column",{attrs:{prop:"taskName",label:"任务英文名称"}}),a("el-table-column",{attrs:{prop:"requestCpu",label:"CPU核心数(核)"}}),a("el-table-column",{attrs:{prop:"requestMemory",label:"内存使用量(GB)"}}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteTask(t.$index)}}},[e._v("删除")])]}}])})],1),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-row",[a("el-col",{attrs:{span:2,offset:22}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createJob}},[e._v("创建")])],1)],1)],1)],1)],1)],1),a("el-dialog",{attrs:{title:"新建任务",visible:e.dialogFormVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"taskForm",staticStyle:{padding:"0px","min-width":"900px"},attrs:{rules:e.taskRules,model:e.taskInfo,"label-position":"right","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务英文名","label-width":e.formLabelWidth,prop:"taskName"}},[a("el-input",{staticStyle:{width:"340px"},attrs:{autocomplete:"off",placeholder:"请输入任务英文名"},model:{value:e.taskInfo.taskName,callback:function(t){e.$set(e.taskInfo,"taskName",t)},expression:"taskInfo.taskName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务中文名","label-width":e.formLabelWidth,prop:"taskCnName"}},[a("el-input",{staticStyle:{width:"340px"},attrs:{autocomplete:"off",placeholder:"请输入任务中文名"},model:{value:e.taskInfo.taskCnName,callback:function(t){e.$set(e.taskInfo,"taskCnName",t)},expression:"taskInfo.taskCnName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"选择仓库","label-width":e.formLabelWidth,prop:"repositoryDir"}},[a("el-select",{staticStyle:{width:"250px"},on:{change:e.changeImageCatalog},model:{value:e.taskInfo.repositoryDir,callback:function(t){e.$set(e.taskInfo,"repositoryDir",t)},expression:"taskInfo.repositoryDir"}},e._l(e.imageCatalogList,(function(e,t){return a("el-option",{attrs:{label:"cluster-default-default"==e.envName?"private":e.envName,value:e.catalogId}})})),1)],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"选择镜像","label-width":e.formLabelWidth,prop:"imagePrefix"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择镜像"},on:{change:e.changeImage},model:{value:e.taskInfo.imagePrefix,callback:function(t){e.$set(e.taskInfo,"imagePrefix",t)},expression:"taskInfo.imagePrefix"}},e._l(e.imageList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.imageName,value:e.imageName}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"选择版本","label-width":e.formLabelWidth,prop:"imageVersion"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择镜像版本"},model:{value:e.taskInfo.imageVersion,callback:function(t){e.$set(e.taskInfo,"imageVersion",t)},expression:"taskInfo.imageVersion"}},e._l(e.imageVersionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.imageTag,value:e.imageTag}})})),1)],1)],1)],1),a("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"GPU算力","label-width":e.formLabelWidth}},[a("el-row",{staticStyle:{"margin-top":"0px"}},[a("el-col",{attrs:{span:20}},[e.taskInfo.gpuCalPower<100?a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:25,max:100},on:{change:function(t){e.taskInfo.gpuVideoMem=.88*e.taskInfo.gpuCalPower}},model:{value:e.taskInfo.gpuCalPower,callback:function(t){e.$set(e.taskInfo,"gpuCalPower",t)},expression:"taskInfo.gpuCalPower"}}):e._e(),e.taskInfo.gpuCalPower>=100?a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:100,max:300},on:{change:function(t){e.taskInfo.gpuVideoMem=.88*e.taskInfo.gpuCalPower}},model:{value:e.taskInfo.gpuCalPower,callback:function(t){e.$set(e.taskInfo,"gpuCalPower",t)},expression:"taskInfo.gpuCalPower"}}):e._e()],1),a("el-col",{attrs:{span:3}},[a("span",{staticStyle:{"font-size":"16px","margin-left":"10px"}},[e._v("(%)")])]),a("el-col",{attrs:{span:1}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 1、输入1-100内的整数，例如50，是指将50%的cuda core分配给该服务。 ")]),a("p",[e._v(" 2、输入大于100的整数，只能是100的倍数，如200，是指将2张GPU卡都分给该服务。 ")]),a("p",[e._v(" 3、如果输入大于等于100的整数，GPU显存不用再填写，默认使用GPU的全部显存。 ")]),a("p",[e._v('4、如果值为空或0时，默认不使用GPU算力"')])]),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff","margin-left":"10px",cursor:"pointer"}})])],1)],1)],1),a("el-form-item",{staticStyle:{width:"900px"},attrs:{label:"GPU显存","label-width":e.formLabelWidth}},[a("el-row",{staticStyle:{"margin-top":"0px"}},[a("el-col",{attrs:{span:20}},[a("el-slider",{staticStyle:{width:"100%"},attrs:{max:Number(88)},model:{value:e.taskInfo.gpuVideoMem,callback:function(t){e.$set(e.taskInfo,"gpuVideoMem",t)},expression:"taskInfo.gpuVideoMem"}})],1),a("el-col",{attrs:{span:3}},[a("span",{staticStyle:{"font-size":"16px","margin-left":"10px"}},[e._v(e._s(.25*Number(e.taskInfo.gpuVideoMem))+"Gi")])]),a("el-col",{attrs:{span:1}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[e._v(" 注：Gi为单位时，拖动一格显示1，为0.25Gi，拖动2格显示2，为0.5Gi，以此类推；最大能拖动256格显示256，为64Gi ")])]),a("i",{staticClass:"el-icon-question",staticStyle:{color:"#409eff","margin-left":"10px",cursor:"pointer"}})])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"故障响应","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"340px"},attrs:{placeholder:"请选择当前任务状态",clearable:""},on:{change:e.changeTaskpoliciesEvent,clear:function(t){e.taskInfo.policiesAction=""}},model:{value:e.taskInfo.policiesEvent,callback:function(t){e.$set(e.taskInfo,"policiesEvent",t)},expression:"taskInfo.policiesEvent"}},[a("el-option",{attrs:{label:"运行失败",value:"PodFailed"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"响应方式","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"340px"},attrs:{placeholder:"请选择变更任务状态",clearable:""},on:{change:e.changeTaskpoliciesAction,clear:function(t){e.taskInfo.policiesEvent=""}},model:{value:e.taskInfo.policiesAction,callback:function(t){e.$set(e.taskInfo,"policiesAction",t)},expression:"taskInfo.policiesAction"}},[a("el-option",{attrs:{label:"任务完成",value:"CompleteJob"}}),a("el-option",{attrs:{label:"任务重启",value:"RestartJob"}})],1)],1)],1)],1),a("el-form-item",{attrs:{label:"高级配置","label-width":e.formLabelWidth}},[a("el-tabs",{staticStyle:{width:"820px"}},[a("el-tab-pane",{attrs:{label:"添加存储变量",name:"second"}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-row",[a("h3",{staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 添加变量 ")])]),a("el-row"),a("el-form",{ref:"storageForm",staticStyle:{padding:"0px"},attrs:{model:e.mount,rules:e.mountRules,"label-position":"right","label-width":"136px"}},[a("el-row",[a("el-form-item",{attrs:{label:"路径地址",prop:"hostPath"}},[a("el-col",{staticStyle:{"margin-left":"0px"},attrs:{span:24,offset:1}},[a("el-input",{staticStyle:{width:"440px"},attrs:{size:"small"},model:{value:e.mount.hostPath,callback:function(t){e.$set(e.mount,"hostPath",t)},expression:"mount.hostPath"}},[a("template",{slot:"append"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:e.initData}},[e._v(" 选择数据服务")])])],2)],1)],1)],1),a("el-dialog",{attrs:{title:"目录挂载",visible:e.childDialogTableVisible,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.childDialogTableVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{size:"small",placeholder:"搜索"},model:{value:e.dataName,callback:function(t){e.dataName=t},expression:"dataName"}})],1),a("el-col",{attrs:{span:8,offset:4}},[a("el-button-group",[a("el-button",{attrs:{type:1==e.type?"success":"primary",size:"small"},on:{click:function(t){return e.getDataSet(1)}}},[e._v("数据集")]),a("el-button",{attrs:{type:1!=e.type?"success":"primary",size:"small"},on:{click:function(t){return e.getDataSet(2)}}},[e._v("结果集")])],1)],1)],1),a("el-table",{attrs:{data:e.selectedData,"highlight-current-row":"","max-height":"300"},on:{"row-click":e.initRealPath}},[a("el-table-column",{attrs:{property:"name",label:1==e.type?"数据集":"结果集",width:"150"}}),a("el-table-column",{attrs:{property:"catalog",label:"路径",width:"300"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.childDialogTableVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.childDialogTableVisible=!1}}},[e._v("确 定")])],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-form-item",{attrs:{label:"容器内路径",prop:"mountPath"}},[a("el-col",{staticStyle:{"margin-left":"0px"},attrs:{span:24,offset:1}},[a("el-input",{staticStyle:{width:"440px"},attrs:{size:"small"},model:{value:e.mount.mountPath,callback:function(t){e.$set(e.mount,"mountPath",t)},expression:"mount.mountPath"}})],1)],1)],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.addMountData()}}},[e._v("添加")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"管理存储变量",name:"third"}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-row",[a("h3",{staticStyle:{"margin-left":"10px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 管理变量 ")])]),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.mountData,"row-style":{height:"40px"},"cell-style":{padding:"5px"},"max-height":"200"}},[a("el-table-column",{attrs:{label:"路径地址",prop:"hostPath"}}),a("el-table-column",{attrs:{label:"容器内路径",prop:"mountPath"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-buttom":"3px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteMountData(t.$index)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],1)],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"820px"},attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"30","show-word-limit":""},model:{value:e.taskInfo.description,callback:function(t){e.$set(e.taskInfo,"description",t)},expression:"taskInfo.description"}})],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"725px"},on:{click:function(t){return e.cancleTask()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createTask()}}},[e._v("确 定")])],1)],1)],1)],1)},Tt=[],Zt=(a(82526),a(41817),{name:"CreateJob",data:function(){return{jobDialogVisible:!1,mount:{hostPath:"",mountPath:"/"},mountRules:{hostPath:[{required:!0,message:"不能为空",trigger:"blur"}],mountPath:[{required:!0,message:"不能为空",trigger:"blur"}]},mountData:[],type:1,dataName:"",childDialogTableVisible:!1,vcJob:{vcJobId:"",vcJobCnName:"",vcJobName:"",vcJobType:"batch",queueName:"default",queueId:1,maxRetry:0,priorityClassName:"middle-priority",parallelExecution:!0},vcJobRules:{vcJobCnName:[{required:!0,message:"请输入作业中文名",trigger:"blur"},{min:4,max:45,message:"长度在4到45字符",trigger:"blur"}],vcJobName:[{required:!0,message:"请输入作业英文名",trigger:"blur"},{min:4,max:45,message:"请输入4-45位小写字母，数字，中划线组合并以字母开头",trigger:"blur"}],maxRetry:[{required:!0,message:"请输入作业尝试重启次数",trigger:"blur"}],priorityClassName:[{required:!0,message:"请选择作业优先级",trigger:"change"}]},target:{templateId:null,clusterId:0,startNow:!1,envId:1},tasks:[],taskInfo:{taskName:"",taskCnName:"",podReplicas:1,podMinReplicas:1,requestCpu:1,requestMemory:4,gpuCalPower:100,gpuVideoMem:88,command:null,workingDir:null,description:"",repository:"default",repositoryDir:"cluster-default-default",image:"",imagePrefix:"",imageVersion:"",policiesAction:"",policiesEvent:"",containerOptions:"",oldContainerOptions:'{"bocoPlatform-ports":[],"bocoPlatform-envs":[],"bocoPlatform-configs":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-volumes":[],"bocoPlatform-schedulingManagement":[]}'},taskRules:{taskName:[{required:!0,message:"请输入作业英文名",trigger:"blur"},{min:4,max:45,message:"请输入4-45位小写字母，数字，中划线组合并以字母开头",trigger:"blur"}],taskCnName:[{required:!0,message:"请输入作业中文名",trigger:"blur"},{min:4,max:45,message:"长度在4到45字符",trigger:"blur"}],repository:[{required:!0,trigger:"change"}],repositoryDir:[{required:!0,trigger:"change"}],imagePrefix:[{required:!0,trigger:"change"}],imageVersion:[{required:!0,trigger:"change"}]},dialogFormVisible:!1,formLabelWidth:"120px",bocoPlatformenvs:[],bocoPlatformports:[],bocoPlatformschedulingManagement:[],bocoPlatformlifecycle:[],bocoPlatformprobe:[],bocoPlatformconfigs:[],bocoPlatformconfigMounts:[],bocoPlatformvolumes:[],bocoPlatformvolumeMounts:[]}},computed:(0,u.Z)((0,u.Z)({},(0,te.rn)("CreateJob",["queueList","warehouseList","imageCatalogList","imageList","imageVersionList","data"])),{},{fullImage:function(){return this.taskInfo.imagePrefix+":"+this.taskInfo.imageVersion},selectedData:function(){var e=this,t=[];return""==this.dataName?this.data:(this.data.forEach((function(a){-1!=a.name.indexOf(e.dataName)&&t.push(a)})),t)}}),methods:{changeTaskpoliciesEvent:function(e){"PodFailed"==e&&(this.taskInfo.policiesAction="CompleteJob")},changeTaskpoliciesAction:function(e){e&&(this.taskInfo.policiesEvent="PodFailed")},createJob:function(){var e=this;this.$refs["jobForm"].validate(function(){var t=(0,c.Z)((0,l.Z)().mark((function t(a){var i;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.abrupt("return",!1);case 4:return e.vcJob.queueId=e.queueList[0].queueId,t.next=7,X({tasks:e.tasks,target:e.target,vcJob:e.vcJob});case 7:i=t.sent,"200"==i.code&&e.$router.push("/job");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},createAndStartJob:function(){var e=this;this.$refs["jobForm"].validate(function(){var t=(0,c.Z)((0,l.Z)().mark((function t(a){var i;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.abrupt("return",!1);case 4:return e.target.startNow=!0,e.vcJob.queueId=e.queueList[0].queueId,t.next=8,X({tasks:e.tasks,target:e.target,vcJob:e.vcJob});case 8:i=t.sent,"200"==i.code?(e.$message({type:"success",message:i.message}),e.$router.push("/job")):e.$message({type:"warning",message:i.message});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getImage:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a,i;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogFormVisible=!0,t.next=3,U(e.imageCatalogList[1].catalogId);case 3:if(a=t.sent,"200"!=a.code){t.next=10;break}return e.$store.dispatch("CreateJob/getImage",a.data),t.next=8,H(a.data[0].imageName);case 8:i=t.sent,1==i.success&&e.$store.dispatch("CreateJob/getImageVersion",i.rows);case 10:e.initImageSelected();case 11:case"end":return t.stop()}}),t)})))()},deleteTask:function(e){this.tasks.splice(e,1)},createTask:function(){var e=this;this.$refs["taskForm"].validate((function(t){if(!t)return!1;e.dialogFormVisible=!1;var a=e.formatTaskInfo();e.tasks.push(a),e.vcJob.vcJobName="work-"+e.tasks[0].taskCnName,e.vcJob.vcJobCnName=e.vcJob.vcJobName,e.cancleTask()}))},formatTaskInfo:function(){var e={};e.taskName=this.taskInfo.taskName,e.taskCnName=this.taskInfo.taskCnName,e.podReplicas=this.taskInfo.podReplicas,e.podMinReplicas=this.taskInfo.podMinReplicas,e.requestCpu=this.taskInfo.requestCpu,e.requestMemory=this.taskInfo.requestMemory,e.gpuCalPower=this.taskInfo.gpuCalPower,e.gpuVideoMem=this.taskInfo.gpuVideoMem,e.command=this.taskInfo.command,e.workingDir=this.taskInfo.workingDir,e.description=this.taskInfo.description,e.repository=this.taskInfo.repository,e.repositoryDir=this.taskInfo.repositoryDir,e.image=this.fullImage,e.policiesAction=this.taskInfo.policiesAction,e.policiesEvent=this.taskInfo.policiesEvent;for(var t="",a="",i=0;i<this.mountData.length;i++)t+='{"name":"name'+i+'","hostPath":"'+this.mountData[i].hostPath+'"},',a+='{"name":"name'+i+'","mountPath":"'+this.mountData[i].mountPath+'"}';return e.containerOptions='{"bocoPlatform-envs":[],"bocoPlatform-ports":[],"bocoPlatform-schedulingManagement":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-configs":[],"bocoPlatform-configMounts":[],"bocoPlatform-volumes":['+t+'],"bocoPlatform-volumeMounts":['+a+"]}",e.oldContainerOptions='{"bocoPlatform-ports":[],"bocoPlatform-envs":[],"bocoPlatform-configs":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-volumes":[],"bocoPlatform-schedulingManagement":[]}',e},cancleTask:function(){this.dialogFormVisible=!1,this.taskInfo={taskName:"",taskCnName:"",podReplicas:1,podMinReplicas:1,requestCpu:1,requestMemory:4,gpuCalPower:100,gpuVideoMem:88,command:null,workingDir:null,description:"",repository:"default",repositoryDir:"cluster-default-default",image:"",imagePrefix:"",imageVersion:"",policiesAction:"",policiesEvent:"",containerOptions:"",oldContainerOptions:'{"bocoPlatform-ports":[],"bocoPlatform-envs":[],"bocoPlatform-configs":[],"bocoPlatform-lifecycle":[],"bocoPlatform-probe":[],"bocoPlatform-volumes":[],"bocoPlatform-schedulingManagement":[]}'},this.initImageSelected(),this.mountData=[],this.clearValidate("taskForm"),this.clearValidate("storageForm")},clearValidate:function(e){this.$refs[e].clearValidate()},deleteMountData:function(e){this.mountData.splice(e,1)},addMountData:function(){var e=this;this.$refs["storageForm"].validate((function(t){if(!t)return!1;var a={hostPath:"",mountPath:""};a.hostPath=e.mount.hostPath,a.mountPath=e.mount.mountPath,e.mountData.push(a),e.mount.hostPath="",e.mount.mountPath="/",e.$message({type:"success",message:"添加成功!"})}))},initRealPath:function(e,t,a){this.mount.hostPath=e.catalog},initData:function(){this.childDialogTableVisible=!0,this.getDataSet(this.type)},getDataSet:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.type=e,a.next=3,W(t.type);case 3:i=a.sent,200==i.code&&t.$store.dispatch("CreateJob/getDataSet",i.data);case 5:case"end":return a.stop()}}),a)})))()},changeImage:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,H(result4.data[0].imageName);case 2:i=a.sent,1==i.success&&t.$store.dispatch("CreateJob/getImageVersion",i.rows),t.taskInfo.imagePrefix=e,t.taskInfo.imageVersion=t.imageVersionList[0].imageTag;case 6:case"end":return a.stop()}}),a)})))()},changeImageCatalog:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,U(e);case 2:if(i=a.sent,"200"!=i.code){a.next=9;break}return t.$store.dispatch("CreateJob/getImage",i.data),a.next=7,H(i.data[0].imageName);case 7:s=a.sent,1==s.success&&t.$store.dispatch("CreateJob/getImageVersion",s.rows);case 9:t.taskInfo.repositoryDir=e,t.taskInfo.imagePrefix=t.imageList[0].imageName,t.taskInfo.imageVersion=t.imageVersionList[0].imageTag,t.updateName();case 13:case"end":return a.stop()}}),a)})))()},initImageSelected:function(){this.taskInfo.repository=this.warehouseList[0].warehouseId,this.taskInfo.repositoryDir=this.imageCatalogList[this.imageCatalogList.length-1].catalogId,this.taskInfo.imagePrefix=this.imageList[0].imageName,this.taskInfo.imageVersion=this.imageVersionList[0].imageTag,this.updateName()},updateName:function(){var e=new Date;this.taskInfo.taskCnName="task"+(e.getMonth()+1)+e.getHours()+e.getMinutes()+e.getSeconds(),this.taskInfo.taskName=this.taskInfo.taskCnName}},mounted:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a,i,s;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:if(a=t.sent,1!=a.success){t.next=14;break}return e.$store.dispatch("CreateJob/getQueueList",a.rows),t.next=7,B(a.rows[0].clusterId);case 7:if(i=t.sent,"200"!=i.code){t.next=14;break}return e.$store.dispatch("CreateJob/getWareHouseList",i.data),t.next=12,G(i.data[0].warehouseId);case 12:s=t.sent,"200"==s.code&&e.$store.dispatch("CreateJob/getWareHouseImageList",s.data);case 14:case"end":return t.stop()}}),t)})))()}}),$t=Zt,Et=(0,se.Z)($t,zt,Tt,!1,null,"0ff782d2",null),Dt=Et.exports,Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("模型管理")]),a("el-breadcrumb-item",[e._v("测试模型")])],1)],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-card",{staticClass:"left-card",attrs:{"body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"12px"},attrs:{span:16}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 测试模型列表 ")])]),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-top":"10px","padding-right":"5px","padding-top":"5px","padding-bottom":"5px","padding-left":"3px"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:function(t){e.parentFileDialogVisible=!0}}},[e._v("新建")])],1)],1)],1),a("el-dialog",{attrs:{title:"新建测试模型",visible:e.parentFileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的测试模型名称",size:"small"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createParentFile}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",[a("el-table",{staticClass:"size",staticStyle:{width:"100%","margin-top":"10px"},attrs:{"highlight-current-row":"","show-header":!1,"max-height":"600px","row-style":{height:"0px"},"cell-style":{padding:"0px"},data:e.parentFileList}},[a("el-table-column",{attrs:{prop:"name",label:"文件名",align:"left","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"parentIcon",on:{click:function(a){return e.updateChileFileList(t.row.id,e.pageNum,null,t.row.name)}}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"right",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-edit-outline parentIcon",on:{click:function(a){return e.updateParentFileNameDialogVisible(t.row)}}})]),a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-delete parentIcon",staticStyle:{"margin-left":"10px"},on:{click:function(a){return e.deleteParentFile(t.row.id)}}})])],1)]}}])})],1),a("el-dialog",{attrs:{title:"重命名数据集",visible:e.parentFileNameDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.parentFileNameDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入重命名的数据集名称",size:"small"},model:{value:e.newParentFileName,callback:function(t){e.newParentFileName=t},expression:"newParentFileName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.parentFileNameDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updateParentFileName()}}},[e._v("确 定")])],1)],1)],1)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("el-card",{staticStyle:{height:"calc(100vh - 170px)","margin-top":"10px","margin-left":"10px",overflow:"auto"},attrs:{"body-style":{padding:"0px"}}},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px","margin-top":"3px"}},[a("span",{staticClass:"size",staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 测试模型文件列表 ")])]),a("el-col",{attrs:{span:20}},[e.parentFileName?a("h3",{staticClass:"size"},[e._v(" 当前测试模型: "),a("el-tag",{attrs:{size:"small"}},[e._v(e._s(e.parentFileName))])],1):e._e()])],1),a("el-row",{staticStyle:{"margin-top":"10px","margin-left":"10px","font-size":"20px"}},[a("el-input",{staticStyle:{width:"99%"},attrs:{disabled:"",size:"small"},model:{value:e.dirpath,callback:function(t){e.dirpath=t},expression:"dirpath"}},[a("template",{slot:"prepend"},[e._v("当前路径:")])],2)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-d-arrow-left",size:"small"},on:{click:e.goBack}},[e._v("返回")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-folder-add",size:"small"},on:{click:function(t){e.fileDialogVisible=!0}}},[e._v("新建文件夹")])],1),a("el-dialog",{attrs:{title:"新建文件夹",visible:e.fileDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.fileDialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入新建的文件名",size:"small"},model:{value:e.newDirName,callback:function(t){e.newDirName=t},expression:"newDirName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.fileDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.newDir}},[e._v("确 定")])],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}}),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download",size:"small"},on:{click:e.downloadChildFiles}},[e._v("下载选中")])],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-button",{staticStyle:{"margin-top":"10px","margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.deleteFiles}},[e._v("删除选中")])],1)],1),a("el-row",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{ref:"table",staticClass:"size",staticStyle:{width:"100%"},attrs:{data:e.childFileList,"max-height":"560"},on:{"select-all":e.selectTableAll,select:e.selectFile}},[a("el-table-column",{attrs:{width:"80",type:"selection"}}),a("el-table-column",{attrs:{prop:"fileName",label:"文件名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-col",{attrs:{span:1}},[1==t.row.fileType?a("i",{staticClass:"el-icon-folder"}):e._e(),1!=t.row.fileType?a("i",{staticClass:"el-icon-document"}):e._e()]),a("el-col",{attrs:{span:22,offset:1}},[e.isShow[t.$index]?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{"margin-left":"5px"},attrs:{size:"mini",placeholder:t.row.fileName},on:{blur:function(a){return e.updatename(t.$index,t.row)},focus:function(a){e.oldname=t.row.fileName}},model:{value:t.row.fileName,callback:function(a){e.$set(t.row,"fileName",a)},expression:"scope.row.fileName"}}):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isShow[t.$index],expression:"!isShow[scope.$index]"}],staticStyle:{"margin-left":"5px"},on:{click:function(a){return e.openDir(t.row)}}},[e._v(e._s(t.row.fileName))])],1)],1)]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"modifyTime",label:"修改时间",width:"250"}}),a("el-table-column",{attrs:{prop:"fileSize",label:"大小","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"250","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.changeIsShow(t.$index)}}},[e._v("重命名")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",icon:"el-icon-download",size:"small"},on:{click:function(a){return e.downloadChildFile(t.row.fileName)}}},[e._v("下载")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.deleteFile(t.row.fileName)}}},[e._v("删除")])]}}])})],1)],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":e.page,layout:"prev, pager, next,sizes",total:Number(e.totalRecord)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)],1)],1)],1)},Ot=[],Rt={name:"Data",data:function(){return{page:10,isShow:[],parentId:"",path:[],checkedfile:[],fileDialogVisible:!1,uploadDialogVisible:!1,parentFileDialogVisible:!1,parentFileNameDialogVisible:!1,newDirName:"",oldname:"",parentFileName:"",newParentFileName:"",newParentFileId:""}},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},computed:(0,u.Z)((0,u.Z)({},(0,te.rn)("ResultFile",["parentFileList","childFileList","pageNum","filePath","totalRecord"])),{},{dirpath:function(){var e="";return this.path.forEach((function(t){e=e+"/"+t})),e}}),methods:{downloadChildFiles:function(){for(var e=0;e<this.checkedfile.length;e++)this.downloadChildFile(this.checkedfile[e])},downloadChildFile:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s,n,r,o;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,D(e,t.parentId,t.dirpath);case 2:if(i=a.sent,s=i.data,n=s.split("/"),"200"!=i.code){a.next=10;break}return a.next=8,J(s);case 8:r=a.sent,1==r.data?window.open("http://202.195.239.146:91/"+n[3]+"/"+n[4]):o=setInterval((0,c.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J(s);case 2:t=e.sent,1==t.data&&(window.open("http://202.195.239.146:91"+n[0]),clearInterval(o));case 4:case"end":return e.stop()}}),e)}))),2e4);case 10:case"end":return a.stop()}}),a)})))()},updateChileFileList:function(e,t,a,i){this.path=[],this.parentId=e,this.parentFileName=i,this.updateFileList(e,t,a)},updateParentFileNameDialogVisible:function(e){this.parentFileNameDialogVisible=!0,this.newParentFileName=e.name,this.newParentFileId=e.id},updateParentFileName:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Z(e.newParentFileId,e.newParentFileName,"",6,2);case 2:a=t.sent,"200"==a.code?(e.$message({type:"success",message:"更新成功"}),e.parentFileNameDialogVisible=!1,e.updateParentFileList(),e.newParentFileName=""):e.$message.error("更新失败");case 4:case"end":return t.stop()}}),t)})))()},deleteParentFile:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return alert("是否确认删除?"),a.next=3,T(e);case 3:i=a.sent,"200"==i.code?(t.$message({type:"success",message:"删除成功"}),t.updateParentFileList()):t.$message.error(i.data);case 5:case"end":return a.stop()}}),a)})))()},createParentFile:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z(e.newParentFileName,"",6,2);case 2:a=t.sent,"200"==a.code?(e.parentFileDialogVisible=!1,e.$message({type:"success",message:"新建成功"}),e.updateParentFileList(),e.newParentFileName=""):e.$message.error("新建失败");case 4:case"end":return t.stop()}}),t)})))()},changeIsShow:function(e){var t=!this.isShow[e];this.isShow.splice(e,1,t)},initShow:function(){if(null!=this.childFileList)for(var e=0;e<this.childFileList.length;e++)this.isShow.push(!1)},previewFile:function(e){var t="http://127.0.0.1:8080/preview"+this.dirpath+"/"+e,i=a(79719).Base64;window.open("http://127.0.0.1:8012/onlinePreview?url="+encodeURIComponent(i.encode(t)))},deleteFiles:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O(e.parentId,e.checkedfile,e.dirpath);case 2:a=t.sent,"200"==a.code&&e.$message({type:"success",message:"删除成功"}),e.updateFileList(e.parentId,e.pageNum,e.dirpath),e.checkedfile=[];case 6:case"end":return t.stop()}}),t)})))()},deleteFile:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=[],i.push(e),a.next=4,O(t.parentId,i,t.dirpath);case 4:s=a.sent,"200"==s.code&&t.$message({type:"success",message:"删除成功"}),t.updateFileList(t.parentId,t.pageNum,t.dirpath);case 7:case"end":return a.stop()}}),a)})))()},uploadFile:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s,n;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.file.size<2048e3)){a.next=10;break}return i=new FormData,i.append("file",e.file),s=e.file.size+"-"+e.file.name.substring(0,2)+e.file.name.split(".")[e.file.name.split(".").length-1],a.next=6,R(e.file.size,e.file.size,s,e.file.name,e.file.webkitRelativePath,t.dirpath,t.parentId,e.file);case 6:n=a.sent,"200"==n.code?t.updateFileList(t.parentId,t.pageNum,t.dirpath):t.$message.error("上传失败"),a.next=11;break;case 10:t.$message.error("文件过大,无法上传");case 11:case"end":return a.stop()}}),a)})))()},submitUpload:function(){this.$refs.upload.submit()},handleUpload:function(e){var t=this;this.uploadDialogVisible=!0,"uploadFile"==e?this.$nextTick((function(){t.$refs.upload.$children[0].$refs.input.webkitdirectory=!1})):this.$nextTick((function(){t.$refs.upload.$children[0].$refs.input.webkitdirectory=!0}))},newDir:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,E(e.parentId,e.dirpath,e.newDirName,null);case 2:a=t.sent,"200"==a.code?(e.$message({type:"success",message:"新建成功"}),e.updateFileList(e.parentId,e.pageNum,e.dirpath)):e.$message.error("新建失败:文件名重复!"),e.fileDialogVisible=!1,e.newDirName="";case 6:case"end":return t.stop()}}),t)})))()},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},selectTableAll:function(){var e=this;null!=this.childFileList&&(this.checkedfile.length>=this.childFileList.length?this.checkedfile=[]:(this.checkedfile=[],this.childFileList.forEach((function(t){e.checkedfile.push(t.fileName)}))))},selectFile:function(e,t){this.checkedfile.includes(t.fileName)?this.checkedfile.forEach((function(e,a,i){e==t.fileName&&i.splice(a,1)})):this.checkedfile.push(t.fileName),null!=this.childFileList&&this.checkedfile.length==this.childFileList.length?this.checkedall=!0:this.checkedall=!1},goBack:function(){this.path.pop(),this.updateFileList(this.parentId,1,this.dirpath)},openDir:function(e){1==e.fileType&&(this.path.push(e.fileName),this.updateFileList(this.parentId,1,this.dirpath))},updateFileList:function(e,t,a){null==e&&this.parentFileList.length>0&&(e=this.parentFileList[0].id,this.ParentFileName=this.parentFileList[0].fileName),this.$store.dispatch("ResultFile/getChildFileList",{dataId:e,filePath:a,current:t,size:this.page}),this.initShow()},updateParentFileList:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L(2,0,0);case 2:a=t.sent,"200"==a.code&&(e.$store.dispatch("ResultFile/getParentFileList",a.data),e.parentFileName=a.data[0].name),null!=e.parentFileList&&e.updateFileList(e.parentFileList[0].id,e.pageNum,null);case 5:case"end":return t.stop()}}),t)})))()},updatename:function(e,t){var a=this;return(0,c.Z)((0,l.Z)().mark((function i(){var s;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.changeIsShow(e),a.oldname==t.fileName){i.next=8;break}return i.next=4,$(a.parentId,a.dirpath,a.oldname,t.fileName);case 4:s=i.sent,"200"==s.code?a.$message({type:"success",message:"修改成功"}):a.$message.error("修改失败"),i.next=9;break;case 8:a.$message.warning("新名称与原名称相同");case 9:case"end":return i.stop()}}),i)})))()},handleCurrentChange:function(e){this.updateFileList(this.parentId,e,this.dirpath)},handleSizeChange:function(e){this.page=e,this.updateFileList(this.parentId,this.pageNum,this.dirpath)}},mounted:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L(2,0,0);case 2:a=t.sent,a.data.length>0&&(e.$store.dispatch("ResultFile/getParentFileList",a.data),e.parentFileName=a.data[0].name,"200"==a.code&&a.data.length>0&&e.$store.dispatch("ResultFile/getChildFileList",{dataId:a.data[0].id,filePath:null,current:1,size:e.page}),e.initShow(),e.parentId=a.data[0].id);case 4:case"end":return t.stop()}}),t)})))()}},Vt=Rt,At=(0,se.Z)(Vt,Jt,Ot,!1,null,"17885682",null),jt=At.exports,Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("我的作业")]),a("el-breadcrumb-item",[a("span",{staticClass:"bread",on:{click:e.toJob}},[e._v("作业列表")])]),a("el-breadcrumb-item",[e._v(e._s(e.joblist[e.index].vcJobCnName))])],1)],1),a("el-card",{staticStyle:{"background-color":"#eaebed",margin:"10px",height:"calc(100vh - 170px)"},attrs:{"body-style":{padding:"0px"}}},[a("el-row",[a("el-card",{staticStyle:{height:"85px",margin:"10px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 基本信息 ")])]),a("el-row",{staticStyle:{"margin-top":"30px","margin-left":"20px"}},[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"size"},[e._v("作业名称："+e._s(e.joblist[e.index].vcJobCnName))])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"size"},[e._v("作业类型：标准作业")])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"size"},[e._v("所属队列：default")])])],1)],1)],1),a("el-row",[a("el-card",{staticStyle:{height:"calc(100vh - 290px)","margin-left":"10px","margin-right":"10px","margin-buttom":"10px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{span:12}},[a("h3",{staticClass:"size",staticStyle:{"margin-left":"5px"}},[a("span",{staticStyle:{color:"#409eff"}},[e._v("|")]),e._v(" 计算实例列表 ")])]),a("el-row",{staticStyle:{"margin-top":"10px","margin-left":"20px"}},[a("el-col",{staticStyle:{margin:"10px"},attrs:{span:4}},[a("el-input",{attrs:{size:"small",placeholder:"请输入节点名称","prefix-icon":"el-icon-search"},model:{value:e.hostName,callback:function(t){e.hostName=t},expression:"hostName"}})],1),a("el-col",{staticStyle:{margin:"10px"},attrs:{span:4}},[a("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"请输入计算实例名称"},model:{value:e.podName,callback:function(t){e.podName=t},expression:"podName"}})],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:1}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.searchList()}}},[e._v("搜索")])],1),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:8}},[e.showHostName?a("el-tag",{staticStyle:{"margin-top":"10px",height:"32px"},attrs:{closable:""},on:{close:e.clearHostSearch}},[e._v("节点:"+e._s(e.hostName))]):e._e(),e.showPodName?a("el-tag",{staticStyle:{"margin-top":"10px",height:"32px","margin-left":"10px"},attrs:{closable:""},on:{close:e.clearPodSearch}},[e._v("计算实例:"+e._s(e.podName))]):e._e()],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{staticClass:"size",staticStyle:{width:"100%","margin-top":"10px","margin-left":"10px","margin-rigth":"10px"},attrs:{"row-style":{height:"20px"},"cell-style":{padding:"8px"},data:e.formatedJobInfoList,border:!0,"max-height":"360"}},[a("el-table-column",{attrs:{prop:"hostName",label:"节点名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"hostIp",label:"节点IP","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"podName",label:"计算实例","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"status",label:"实例状态","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taskName",label:"所属任务","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始运行时间","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"endTime",label:"运行结束时间","show-overflow-tooltip":""}})],1)],1),a("el-col",{staticStyle:{"text-align":"center"}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-pagination",{attrs:{background:!0,"page-sizes":[10,20,30],"page-size":10,layout:"prev, pager, next,sizes","page-count":Number(e.jobInfoPageCount)},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)],1)],1)],1)},Ut=[],qt=(a(64765),{name:"JobInfo",data:function(){return{index:0,hostName:"",podName:"",showHostName:!1,showPodName:!1}},computed:(0,u.Z)((0,u.Z)({},(0,te.rn)("Job",["joblist","jobInfoList","jobInfoCurrPageNum","jobInfoPageCount","jobInfoPageSize"])),{},{formatedJobInfoList:function(){for(var e=this.jobInfoList,t=0;t<e.length;t++)e[t].startTime=mt(e[t].startTime),e[t].endTime=mt(e[t].endTime),"1970-01-01 08:00:00"==mt(e[t].startTime)&&(e[t].startTime=""),"1970-01-01 08:00:00"==mt(e[t].endTime)&&(e[t].endTime="");return e}}),methods:{toJob:function(){this.$router.push("/job")},searchList:function(){""!=this.hostName&&(this.showHostName=!0),""!=this.podName&&(this.showPodName=!0),this.search()},clearHostSearch:function(){this.hostName="",this.showHostName=!1,this.search()},clearPodSearch:function(){this.podName="",this.showPodName=!1,this.search()},search:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,M(e.joblist[e.index].clusterId,1,e.hostName,e.jobInfoPageSize,e.podName,e.joblist[e.index].vcJobName);case 2:a=t.sent,1==a.success&&e.$store.dispatch("Job/getJobInfoList",{currPageNum:a.currPageNum,pageCount:a.pageCount,pageSize:a.pageSize,jobInfoList:a.rows});case 4:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,M(t.joblist[t.index].clusterId,e,t.hostName,t.jobInfoPageSize,t.podName,t.joblist[t.index].vcJobName);case 2:i=a.sent,1==i.success&&t.$store.dispatch("Job/getJobInfoList",{currPageNum:i.currPageNum,pageCount:i.pageCount,pageSize:i.pageSize,jobInfoList:i.rows});case 4:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,M(t.joblist[t.index].clusterId,1,t.hostName,e,t.podName,t.joblist[t.index].vcJobName);case 2:i=a.sent,1==i.success&&t.$store.dispatch("Job/getJobInfoList",{currPageNum:i.currPageNum,pageCount:i.pageCount,pageSize:i.pageSize,jobInfoList:i.rows});case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.index=e.$route.params.index,0==e.joblist.length&&e.$router.push("/job"),t.next=4,M(e.joblist[e.index].clusterId,1,"",10,"",e.joblist[e.index].vcJobName);case 4:a=t.sent,1==a.success&&e.$store.dispatch("Job/getJobInfoList",{currPageNum:a.currPageNum,pageCount:a.pageCount,pageSize:a.pageSize,jobInfoList:a.rows});case 6:case"end":return t.stop()}}),t)})))()}}),Bt=qt,Gt=(0,se.Z)(Bt,Mt,Ut,!1,null,"36e34597",null),Ht=Gt.exports,Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("在线IDE")]),a("el-breadcrumb-item",[e._v("IDE列表")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-row",{staticStyle:{"margin-left":"10px",width:"400px"}},[a("el-button-group",[a("el-button",{attrs:{type:1==e.type?"success":"primary",size:"small"},on:{click:function(t){return e.getDataSet(1)}}},[e._v("训练模型")]),a("el-button",{attrs:{type:1!=e.type?"success":"primary",size:"small"},on:{click:function(t){return e.getDataSet(2)}}},[e._v("测试模型")])],1)],1)],1),a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-table",{staticStyle:{"font-size":"16px"},attrs:{data:e.data,"highlight-current-row":"","max-height":"600"}},[a("el-table-column",{attrs:{property:"name",label:1==e.type?"训练模型":"测试模型"}}),a("el-table-column",{attrs:{property:"catalog",label:"路径"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openIDE(t.row.catalog)}}},[e._v("打开IDE")])]}}])})],1)],1)],1),a("el-dialog",{staticClass:"dialogClass",attrs:{title:"在线IDE",visible:e.dialogVisible,fullscreen:"","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("iframe",{staticStyle:{width:"100%",height:"calc(100vh - 58px)"},attrs:{name:"iframe",src:"http://202.195.239.146:92/ide/my/?folder=%2Fhome%2Fcoder%2Fworkspace%2F"}})])],1)},Xt=[],Kt=(a(73210),a(4723),function(){var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)document.cookie=e[t]+"=0;expires="+new Date(0).toUTCString()}),Qt={name:"Ide",data:function(){return{type:1,dialogVisible:!1,name:""}},computed:(0,u.Z)({},(0,te.rn)("CreateJob",["data"])),methods:{openIDE:function(e){this.name=e,_({name:e,password:e});var t=this,a=ce.Loading.service({fullscreen:!0,text:"在线IDE加载中..."});setTimeout((function(){t.axios({url:"http://202.195.239.146:92/node-manager/user/register",method:"post",data:x().stringify({name:e,password:e})}).then((function(e){}))}),100),setTimeout((function(){t.axios({url:"http://202.195.239.146:92/node-manager/user/login",method:"post",data:x().stringify({name:e,password:e})}).then((function(e){k()}))}),200),setTimeout((function(){y()}),900),setTimeout((function(){a.close(),t.dialogVisible=!0}),3e3)},stopIDE:function(e){_({name:e,password:e}),I(),this.$message({type:"success",message:"关闭成功!"})},getDataSet:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s,n,r;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.type=e,a.next=3,W(t.type);case 3:for(i=a.sent,200==i.code&&t.$store.dispatch("CreateJob/getDataSet",i.data),s=t,n=function(e){setTimeout((function(){s.axios({url:"http://202.195.239.146:92/node-manager/user/register",method:"post",data:x().stringify({name:s.data[e].catalog,password:s.data[e].catalog})}).then((function(e){}))}),100*(e+1))},r=0;r<t.data.length;r++)n(r);case 8:case"end":return a.stop()}}),a)})))()},handleClose:function(e){var t=this,a=this;this.$confirm("确认关闭？").then((function(i){e(),Kt(),a.stopIDE(t.name),location.reload()})).catch((function(e){}))}},mounted:function(){this.getDataSet(this.type)}},Yt=Qt,ea=(0,se.Z)(Yt,Wt,Xt,!1,null,"4ccc9180",null),ta=ea.exports,aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-breadcrumb",{staticClass:"size",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("个人中心")]),a("el-breadcrumb-item",[e._v("信息管理")])],1)],1),a("el-card",{staticClass:"card-style",staticStyle:{height:"calc(100vh - 170px)",overflow:"auto"},attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("Transition",{attrs:{appear:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutRight"}},[a("el-form",{ref:"userForm",staticStyle:{margin:"0px",padding:"0px",width:"calc(100vh-250px)"},attrs:{model:e.userInfo,rules:e.userInfoRules}},[a("el-descriptions",{staticClass:"positioncss size",staticStyle:{width:"100%"},attrs:{title:"信息管理",column:2,border:""}},[a("template",{slot:"extra"},[e.edit?e._e():a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(t){e.edit=!0}}},[e._v("编辑")]),a("el-form-item",[e.edit?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-check"},on:{click:function(t){return e.updateUserInfo()}}},[e._v("保存")]):e._e(),e.edit?a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",size:"small",icon:"el-icon-close"},on:{click:function(t){return e.cancelUpdate()}}},[e._v("取消")]):e._e()],1)],1),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-info"}),e._v(" 登录账号 ")]),e._v(e._s(e.userInfo.login))],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),e._v(" 用户名")]),e._v(e._s(e.userInfo.name))],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-edit"}),e._v(" 密码 ")]),a("span",{staticClass:"passwd",on:{click:function(t){e.passwordDialogVisible=!0}}},[e._v("修改密码")])],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-message"}),e._v(" 邮箱 ")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],attrs:{size:"small"}},[e._v(e._s(e.userInfo.email))]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],attrs:{prop:"email"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1)],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-mobile-phone"}),e._v(" 手机 ")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],attrs:{size:"small"}},[e._v(e._s(e.userInfo.phone))]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],attrs:{prop:"phone"}},[a("el-input",{attrs:{size:"small"},model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1)],2)],2)],1)],1),a("el-dialog",{staticClass:"dialogClass",attrs:{title:"修改密码",visible:e.passwordDialogVisible,width:"400px","before-close":e.handleClose},on:{"update:visible":function(t){e.passwordDialogVisible=t}}},[a("el-form",{ref:"passwdForm",staticStyle:{margin:"0px",padding:"0px"},attrs:{"label-position":"right","label-width":"100px",rules:e.passwdRules,model:e.passwd}},[a("el-row",[a("el-form-item",{attrs:{label:"当前密码",prop:"oldPassword"}},[a("el-input",{staticStyle:{width:"270px"},attrs:{placeholder:"请输入当前密码",size:"small","show-password":""},on:{blur:function(t){return e.verifyPasswd()}},model:{value:e.passwd.oldPassword,callback:function(t){e.$set(e.passwd,"oldPassword",t)},expression:"passwd.oldPassword"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"新密码",prop:"newPassword1"}},[a("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请输入新密码",size:"small"},model:{value:e.passwd.newPassword1,callback:function(t){e.$set(e.passwd,"newPassword1",t)},expression:"passwd.newPassword1"}})],1)],1),a("el-row",{staticStyle:{"margin-bottom":"15px"}},[a("el-form-item",{attrs:{label:"二次确认",prop:"newPassword2"}},[a("el-input",{staticStyle:{width:"270px"},attrs:{"show-password":"",placeholder:"请再次输入新密码",size:"small"},model:{value:e.passwd.newPassword2,callback:function(t){e.$set(e.passwd,"newPassword2",t)},expression:"passwd.newPassword2"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.closePasswd()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.updatePasswd()}}},[e._v("确 定")])],1)],1)],1)],1)},ia=[],sa=(a(33161),a(9653),a(77601),{name:"UserInfo",data:function(){var e=this,t=function(t,a,i){return""===e.passwd.newPassword2?i(new Error("请再次输入密码")):e.passwd.newPassword2!=e.passwd.newPassword1?i(new Error("两次输入密码不一致!")):i()},a=function(e,t,a){var i=/^1[3|4|5|6|7|8][0-9]{9}$/;if(!t)return a(new Error("电话号码不能为空"));setTimeout((function(){Number.isInteger(+t)?i.test(t)?a():a(new Error("电话号码格式不正确")):a(new Error("请输入数字值"))}),100)};return{edit:!1,passwordDialogVisible:!1,passwd:{oldPassword:"",newPassword1:"",newPassword2:""},passwdRules:{oldPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword1:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:8,max:16,message:"请输入8-16位字符",trigger:"blur"}],newPassword2:[{required:!0,validator:t,trigger:"change"}]},userInfo:{},userInfoRules:{phone:[{required:!0,validator:a,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]}}},computed:{},methods:{updateUserInfo:function(){var e=this;this.$refs["userForm"].validate(function(){var t=(0,c.Z)((0,l.Z)().mark((function t(a){var i;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,ee({accountId:JSON.parse(localStorage.getItem("userInfo")).id,dynamicFields:{},email:e.userInfo.email,phone:e.userInfo.phone});case 6:i=t.sent,"200"==i.code?(e.edit=!1,localStorage.setItem("userInfo",JSON.stringify(e.userInfo)),e.$message({type:"success",message:"修改成功"})):e.$message.error("修改失败");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancelUpdate:function(){this.edit=!1,this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.clearValidate("userForm")},clearValidate:function(e){this.$refs[e].clearValidate()},verifyPasswd:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var i,s;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=a(79719).Base64,""==e.passwd.oldPassword){t.next=6;break}return t.next=4,Q(i.encode(e.passwd.oldPassword));case 4:s=t.sent,!0!==s.data&&(e.$message.error("原密码错误!"),e.passwd.oldPassword="");case 6:case"end":return t.stop()}}),t)})))()},handleClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(a){t.passwd.oldPassword="",t.passwd.newPassword1="",t.passwd.newPassword2="",e()})).catch((function(e){}))},closePasswd:function(){this.passwordDialogVisible=!1,this.passwd.oldPassword="",this.passwd.newPassword1="",this.passwd.newPassword2=""},updatePasswd:function(){var e=this;this.passwordDialogVisible=!1;var t=this;this.$refs["passwdForm"].validate(function(){var i=(0,c.Z)((0,l.Z)().mark((function i(s){var n;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s){i.next=4;break}return i.abrupt("return",!1);case 4:return n=a(79719).Base64,i.next=7,Y({password:n.encode(e.passwd.newPassword1),oldPassword:n.encode(e.passwd.oldPassword),id:e.userInfo.id});case 7:i.sent,t.logout();case 9:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}},mounted:function(){this.userInfo=JSON.parse(localStorage.getItem("userInfo"))}}),na=sa,ra=(0,se.Z)(na,aa,ia,!1,null,"29621cf4",null),oa=ra.exports,la=[{name:"login",path:"/login",component:Ce,meta:{show:!1}},{name:"userinfo",path:"/userinfo",component:oa,meta:{show:!0,requireAuth:!0}},{name:"standardjob",path:"/standardjob",component:Dt,meta:{show:!0,requireAuth:!0}},{name:"ide",path:"/ide",component:ta,meta:{show:!0,requireAuth:!0}},{name:"jobInfo",path:"/jobinfo/:index",component:Ht,meta:{show:!0,requireAuth:!0}},{name:"job",path:"/job",component:wt,meta:{show:!0,requireAuth:!0}},{name:"images",path:"/images",component:Ft,meta:{show:!0,requireAuth:!0}},{name:"data",path:"/data",component:It,meta:{show:!0,requireAuth:!0}},{name:"resultdata",path:"/resultdata",component:jt,meta:{show:!0,requireAuth:!0}},{path:"/*",redirect:"/login"}];i["default"].use(lt.Z);var ca=lt.Z.prototype.push;lt.Z.prototype.push=function(e,t,a){t&&a?ca.call(this,e,t,a):ca.call(this,e,(function(){}),(function(){}))};var ua=lt.Z.prototype.Replace;lt.Z.prototype.Replace=function(e,t,a){t&&a?ua.call(this,e,t,a):ua.call(this,e,(function(){}),(function(){}))};var pa=new lt.Z({routes:la,scrollBehavior:function(e,t,a){return{y:0}}});i["default"].use(lt.Z),i["default"].use(ue()),i["default"].use(ct.Z,d()),i["default"].prototype.$echarts=ut,pa.beforeEach((function(e,t,a){e.meta.requireAuth&&(localStorage.getItem("token")?a():a({path:"/login",query:{redirect:e.fullPath}})),"login"===e.name&&localStorage.getItem("token")&&a({path:"/job"}),a()})),i["default"].config.productionTip=!1,new i["default"]({render:function(e){return e(Fe)},router:pa,store:ot,beforeCreate:function(){i["default"].prototype.$bus=this}}).$mount("#app")},83630:function(e,t,a){"use strict";e.exports=a.p+"img/log.bca7a89a.svg"},57570:function(e,t,a){"use strict";e.exports=a.p+"img/titleicon.6f632fe7.jpg"},24654:function(){}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,i,s,n){if(!i){var r=1/0;for(u=0;u<e.length;u++){i=e[u][0],s=e[u][1],n=e[u][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[i,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,r=i[0],o=i[1],l=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var u=l(a)}for(t&&t(i);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},i=self["webpackChunkCloudPlatform"]=self["webpackChunkCloudPlatform"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(76879)}));i=a.O(i)})();